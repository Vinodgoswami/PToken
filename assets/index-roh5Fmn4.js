import{g as ti,a as dn,c as Wh,i as Vh,r as Gh,d as Ut,P as Yh,T as Jh,b as bi}from"./index-CFW5SQ-J.js";var Rn={exports:{}},mo;function vc(){if(mo)return Rn.exports;mo=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(w,g,a){return Function.prototype.apply.call(w,g,a)},r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=function(w){return Object.getOwnPropertyNames(w).concat(Object.getOwnPropertySymbols(w))}:r=function(w){return Object.getOwnPropertyNames(w)};function n(_){console&&console.warn&&console.warn(_)}var i=Number.isNaN||function(w){return w!==w};function s(){s.init.call(this)}Rn.exports=s,Rn.exports.once=M,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var c=10;function o(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(_){if(typeof _!="number"||_<0||i(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");c=_}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(w){if(typeof w!="number"||w<0||i(w))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+w+".");return this._maxListeners=w,this};function u(_){return _._maxListeners===void 0?s.defaultMaxListeners:_._maxListeners}s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(w){for(var g=[],a=1;a<arguments.length;a++)g.push(arguments[a]);var y=w==="error",$=this._events;if($!==void 0)y=y&&$.error===void 0;else if(!y)return!1;if(y){var U;if(g.length>0&&(U=g[0]),U instanceof Error)throw U;var G=new Error("Unhandled error."+(U?" ("+U.message+")":""));throw G.context=U,G}var J=$[w];if(J===void 0)return!1;if(typeof J=="function")e(J,this,g);else for(var Z=J.length,R=E(J,Z),a=0;a<Z;++a)e(R[a],this,g);return!0};function l(_,w,g,a){var y,$,U;if(o(g),$=_._events,$===void 0?($=_._events=Object.create(null),_._eventsCount=0):($.newListener!==void 0&&(_.emit("newListener",w,g.listener?g.listener:g),$=_._events),U=$[w]),U===void 0)U=$[w]=g,++_._eventsCount;else if(typeof U=="function"?U=$[w]=a?[g,U]:[U,g]:a?U.unshift(g):U.push(g),y=u(_),y>0&&U.length>y&&!U.warned){U.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+U.length+" "+String(w)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=_,G.type=w,G.count=U.length,n(G)}return _}s.prototype.addListener=function(w,g){return l(this,w,g,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(w,g){return l(this,w,g,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(_,w,g){var a={fired:!1,wrapFn:void 0,target:_,type:w,listener:g},y=d.bind(a);return y.listener=g,a.wrapFn=y,y}s.prototype.once=function(w,g){return o(g),this.on(w,m(this,w,g)),this},s.prototype.prependOnceListener=function(w,g){return o(g),this.prependListener(w,m(this,w,g)),this},s.prototype.removeListener=function(w,g){var a,y,$,U,G;if(o(g),y=this._events,y===void 0)return this;if(a=y[w],a===void 0)return this;if(a===g||a.listener===g)--this._eventsCount===0?this._events=Object.create(null):(delete y[w],y.removeListener&&this.emit("removeListener",w,a.listener||g));else if(typeof a!="function"){for($=-1,U=a.length-1;U>=0;U--)if(a[U]===g||a[U].listener===g){G=a[U].listener,$=U;break}if($<0)return this;$===0?a.shift():T(a,$),a.length===1&&(y[w]=a[0]),y.removeListener!==void 0&&this.emit("removeListener",w,G||g)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(w){var g,a,y;if(a=this._events,a===void 0)return this;if(a.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):a[w]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete a[w]),this;if(arguments.length===0){var $=Object.keys(a),U;for(y=0;y<$.length;++y)U=$[y],U!=="removeListener"&&this.removeAllListeners(U);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(g=a[w],typeof g=="function")this.removeListener(w,g);else if(g!==void 0)for(y=g.length-1;y>=0;y--)this.removeListener(w,g[y]);return this};function b(_,w,g){var a=_._events;if(a===void 0)return[];var y=a[w];return y===void 0?[]:typeof y=="function"?g?[y.listener||y]:[y]:g?N(y):E(y,y.length)}s.prototype.listeners=function(w){return b(this,w,!0)},s.prototype.rawListeners=function(w){return b(this,w,!1)},s.listenerCount=function(_,w){return typeof _.listenerCount=="function"?_.listenerCount(w):x.call(_,w)},s.prototype.listenerCount=x;function x(_){var w=this._events;if(w!==void 0){var g=w[_];if(typeof g=="function")return 1;if(g!==void 0)return g.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function E(_,w){for(var g=new Array(w),a=0;a<w;++a)g[a]=_[a];return g}function T(_,w){for(;w+1<_.length;w++)_[w]=_[w+1];_.pop()}function N(_){for(var w=new Array(_.length),g=0;g<w.length;++g)w[g]=_[g].listener||_[g];return w}function M(_,w){return new Promise(function(g,a){function y(U){_.removeListener(w,$),a(U)}function $(){typeof _.removeListener=="function"&&_.removeListener("error",y),g([].slice.call(arguments))}C(_,w,$,{once:!0}),w!=="error"&&S(_,y,{once:!0})})}function S(_,w,g){typeof _.on=="function"&&C(_,"error",w,g)}function C(_,w,g,a){if(typeof _.on=="function")a.once?_.once(w,g):_.on(w,g);else if(typeof _.addEventListener=="function")_.addEventListener(w,function y($){a.once&&_.removeEventListener(w,y),g($)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof _)}return Rn.exports}var Mt=vc();const bc=ti(Mt);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Vi=function(t,e){return Vi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Vi(t,e)};function Qh(t,e){Vi(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Gi=function(){return Gi=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Gi.apply(this,arguments)};function Xh(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Zh(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var o=t.length-1;o>=0;o--)(c=t[o])&&(s=(i<3?c(s):i>3?c(e,r,s):c(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function ef(t,e){return function(r,n){e(r,n,t)}}function tf(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function rf(t,e,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function o(d){try{l(n.next(d))}catch(m){c(m)}}function u(d){try{l(n.throw(d))}catch(m){c(m)}}function l(d){d.done?s(d.value):i(d.value).then(o,u)}l((n=n.apply(t,e||[])).next())})}function nf(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function o(l){return function(d){return u([l,d])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(d){l=[6,d],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function sf(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function of(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Yi(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ec(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(o){c={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return s}function af(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ec(arguments[e]));return t}function cf(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],c=0,o=s.length;c<o;c++,i++)n[i]=s[c];return n}function an(t){return this instanceof an?(this.v=t,this):new an(t)}function uf(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(b){n[b]&&(i[b]=function(x){return new Promise(function(E,T){s.push([b,x,E,T])>1||o(b,x)})})}function o(b,x){try{u(n[b](x))}catch(E){m(s[0][3],E)}}function u(b){b.value instanceof an?Promise.resolve(b.value.v).then(l,d):m(s[0][2],b)}function l(b){o("next",b)}function d(b){o("throw",b)}function m(b,x){b(x),s.shift(),s.length&&o(s[0][0],s[0][1])}}function lf(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(c){return(r=!r)?{value:an(t[i](c)),done:i==="return"}:s?s(c):c}:s}}function hf(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Yi=="function"?Yi(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(c){return new Promise(function(o,u){c=t[s](c),i(o,u,c.done,c.value)})}}function i(s,c,o,u){Promise.resolve(u).then(function(l){s({value:l,done:o})},c)}}function ff(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function df(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function pf(t){return t&&t.__esModule?t:{default:t}}function gf(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function _f(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const yf=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Gi},__asyncDelegator:lf,__asyncGenerator:uf,__asyncValues:hf,__await:an,__awaiter:rf,__classPrivateFieldGet:gf,__classPrivateFieldSet:_f,__createBinding:sf,__decorate:Zh,__exportStar:of,__extends:Qh,__generator:nf,__importDefault:pf,__importStar:df,__makeTemplateObject:ff,__metadata:tf,__param:ef,__read:Ec,__rest:Xh,__spread:af,__spreadArrays:cf,__values:Yi},Symbol.toStringTag,{value:"Module"}));function mf(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var bs={},Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});var xc=Ne.getLocalStorage=Lc=Ne.getLocalStorageOrThrow=Pc=Ne.getCrypto=Rc=Ne.getCryptoOrThrow=Ac=Ne.getLocation=Nc=Ne.getLocationOrThrow=Oc=Ne.getNavigator=Tc=Ne.getNavigatorOrThrow=Cc=Ne.getDocument=Ic=Ne.getDocumentOrThrow=Dc=Ne.getFromWindowOrThrow=Sc=Ne.getFromWindow=void 0;function yr(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}var Sc=Ne.getFromWindow=yr;function Br(t){const e=yr(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}var Dc=Ne.getFromWindowOrThrow=Br;function wf(){return Br("document")}var Ic=Ne.getDocumentOrThrow=wf;function vf(){return yr("document")}var Cc=Ne.getDocument=vf;function bf(){return Br("navigator")}var Tc=Ne.getNavigatorOrThrow=bf;function Ef(){return yr("navigator")}var Oc=Ne.getNavigator=Ef;function xf(){return Br("location")}var Nc=Ne.getLocationOrThrow=xf;function Sf(){return yr("location")}var Ac=Ne.getLocation=Sf;function Df(){return Br("crypto")}var Rc=Ne.getCryptoOrThrow=Df;function If(){return yr("crypto")}var Pc=Ne.getCrypto=If;function Cf(){return Br("localStorage")}var Lc=Ne.getLocalStorageOrThrow=Cf;function Tf(){return yr("localStorage")}xc=Ne.getLocalStorage=Tf;Object.defineProperty(bs,"__esModule",{value:!0});var Uc=bs.getWindowMetadata=void 0;const wo=Ne;function Of(){let t,e;try{t=wo.getDocumentOrThrow(),e=wo.getLocationOrThrow()}catch{return null}function r(){const m=t.getElementsByTagName("link"),b=[];for(let x=0;x<m.length;x++){const E=m[x],T=E.getAttribute("rel");if(T&&T.toLowerCase().indexOf("icon")>-1){const N=E.getAttribute("href");if(N)if(N.toLowerCase().indexOf("https:")===-1&&N.toLowerCase().indexOf("http:")===-1&&N.indexOf("//")!==0){let M=e.protocol+"//"+e.host;if(N.indexOf("/")===0)M+=N;else{const S=e.pathname.split("/");S.pop();const C=S.join("/");M+=C+"/"+N}b.push(M)}else if(N.indexOf("//")===0){const M=e.protocol+N;b.push(M)}else b.push(N)}}return b}function n(...m){const b=t.getElementsByTagName("meta");for(let x=0;x<b.length;x++){const E=b[x],T=["itemprop","property","name"].map(N=>E.getAttribute(N)).filter(N=>N?m.includes(N):!1);if(T.length&&T){const N=E.getAttribute("content");if(N)return N}}return""}function i(){let m=n("name","og:site_name","og:title","twitter:title");return m||(m=t.title),m}function s(){return n("description","og:description","twitter:description","keywords")}const c=i(),o=s(),u=e.origin,l=r();return{description:o,url:u,icons:l,name:c}}Uc=bs.getWindowMetadata=Of;var Nf=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],c=0,o=s.length;c<o;c++,i++)n[i]=s[c];return n},Af=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),Rf=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Pf=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),Lf=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Uf=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Mf=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,$f=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,vo=3,Bf=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",Mf]],bo=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Ff(t){return t?Eo(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Uf:typeof navigator<"u"?Eo(navigator.userAgent):zf()}function kf(t){return t!==""&&Bf.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function Eo(t){var e=kf(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Lf;var i=n[1]&&n[1].split(/[._]/).slice(0,3);i?i.length<vo&&(i=Nf(i,jf(vo-i.length))):i=[];var s=i.join("."),c=qf(t),o=$f.exec(t);return o&&o[1]?new Pf(r,s,c,o[1]):new Af(r,s,c)}function qf(t){for(var e=0,r=bo.length;e<r;e++){var n=bo[e],i=n[0],s=n[1],c=s.exec(t);if(c)return i}return null}function zf(){var t=typeof process<"u"&&process.version;return t?new Rf(process.version.slice(1)):null}function jf(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}function Es(t){return Ff(t)}function ri(){const t=Es();return t&&t.os?t.os:void 0}function Mc(){const t=ri();return t?t.toLowerCase().includes("android"):!1}function $c(){const t=ri();return t?t.toLowerCase().includes("ios")||t.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1:!1}function Kf(){return ri()?Mc()||$c():!1}function Bc(){const t=Es();return t&&t.name?t.name.toLowerCase()==="node":!1}function Hf(){return!Bc()&&!!Fc()}const Wf=Sc,Vf=Dc,Gf=Ic,Yf=Cc,Jf=Tc,Fc=Oc,Qf=Nc,Xf=Ac,Zf=Rc,ed=Pc,td=Lc,ni=xc;function rd(){return Uc()}function nd(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}function id(t){return typeof t=="string"?t:JSON.stringify(t)}const kc=nd,qc=id;function zc(t,e){const r=qc(e),n=ni();n&&n.setItem(t,r)}function sd(t){let e=null,r=null;const n=ni();return n&&(r=n.getItem(t)),e=r&&kc(r),e}function od(t){const e=ni();e&&e.removeItem(t)}const jc="WALLETCONNECT_DEEPLINK_CHOICE";function ad(t,e){const r=encodeURIComponent(t);return e.universalLink?`${e.universalLink}/wc?uri=${r}`:e.deepLink?`${e.deepLink}${e.deepLink.endsWith(":")?"//":"/"}wc?uri=${r}`:""}function cd(t){const e=t.href.split("?")[0];zc(jc,Object.assign(Object.assign({},t),{href:e}))}function Kc(t,e){return t.filter(r=>r.name.toLowerCase().includes(e.toLowerCase()))[0]}function ud(t,e){let r=t;return e&&(r=e.map(n=>Kc(t,n)).filter(Boolean)),r}const Hc="https://registry.walletconnect.com";function ld(){return Hc+"/api/v2/wallets"}function hd(){return Hc+"/api/v2/dapps"}function Wc(t,e="mobile"){var r;return{name:t.name||"",shortName:t.metadata.shortName||"",color:t.metadata.colors.primary||"",logo:(r=t.image_url.sm)!==null&&r!==void 0?r:"",universalLink:t[e].universal||"",deepLink:t[e].native||""}}function fd(t,e="mobile"){return Object.values(t).filter(r=>!!r[e].universal||!!r[e].native).map(r=>Wc(r,e))}const dd=Object.freeze(Object.defineProperty({__proto__:null,detectEnv:Es,detectOS:ri,formatIOSMobile:ad,formatMobileRegistry:fd,formatMobileRegistryEntry:Wc,getClientMeta:rd,getCrypto:ed,getCryptoOrThrow:Zf,getDappRegistryUrl:hd,getDocument:Yf,getDocumentOrThrow:Gf,getFromWindow:Wf,getFromWindowOrThrow:Vf,getLocal:sd,getLocalStorage:ni,getLocalStorageOrThrow:td,getLocation:Xf,getLocationOrThrow:Qf,getMobileLinkRegistry:ud,getMobileRegistryEntry:Kc,getNavigator:Fc,getNavigatorOrThrow:Jf,getWalletRegistryUrl:ld,isAndroid:Mc,isBrowser:Hf,isIOS:$c,isMobile:Kf,isNode:Bc,mobileLinkChoiceKey:jc,removeLocal:od,safeJsonParse:kc,safeJsonStringify:qc,saveMobileLinkInfo:cd,setLocal:zc},Symbol.toStringTag,{value:"Module"})),pd=dn(dd);var pn={},gd=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Vc={},ir={},_d={}.toString,xs=Array.isArray||function(t){return _d.call(t)=="[object Array]"},yd=xs;function md(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},t.foo()===42}catch{return!1}}Ee.TYPED_ARRAY_SUPPORT=md();var xo=Ee.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function Ee(t,e,r){return!Ee.TYPED_ARRAY_SUPPORT&&!(this instanceof Ee)?new Ee(t,e,r):typeof t=="number"?Gc(this,t):Dd(this,t,e,r)}Ee.TYPED_ARRAY_SUPPORT&&(Ee.prototype.__proto__=Uint8Array.prototype,Ee.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Ee[Symbol.species]===Ee&&Object.defineProperty(Ee,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}));function Ss(t){if(t>=xo)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+xo.toString(16)+" bytes");return t|0}function wd(t){return t!==t}function Ar(t,e){var r;return Ee.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(e),r.__proto__=Ee.prototype):(r=t,r===null&&(r=new Ee(e)),r.length=e),r}function Gc(t,e){var r=Ar(t,e<0?0:Ss(e)|0);if(!Ee.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)r[n]=0;return r}function vd(t,e){var r=Jc(e)|0,n=Ar(t,r),i=n.write(e);return i!==r&&(n=n.slice(0,i)),n}function Ji(t,e){for(var r=e.length<0?0:Ss(e.length)|0,n=Ar(t,r),i=0;i<r;i+=1)n[i]=e[i]&255;return n}function bd(t,e,r,n){if(r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");var i;return r===void 0&&n===void 0?i=new Uint8Array(e):n===void 0?i=new Uint8Array(e,r):i=new Uint8Array(e,r,n),Ee.TYPED_ARRAY_SUPPORT?i.__proto__=Ee.prototype:i=Ji(t,i),i}function Ed(t,e){if(Ee.isBuffer(e)){var r=Ss(e.length)|0,n=Ar(t,r);return n.length===0||e.copy(n,0,0,r),n}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||wd(e.length)?Ar(t,0):Ji(t,e);if(e.type==="Buffer"&&Array.isArray(e.data))return Ji(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Yc(t,e){e=e||1/0;for(var r,n=t.length,i=null,s=[],c=0;c<n;++c){if(r=t.charCodeAt(c),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(c+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function Jc(t){if(Ee.isBuffer(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var e=t.length;return e===0?0:Yc(t).length}function xd(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Sd(t,e,r,n){return xd(Yc(e,t.length-r),t,r,n)}function Dd(t,e,r,n){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?bd(t,e,r,n):typeof e=="string"?vd(t,e):Ed(t,e)}Ee.prototype.write=function(e,r,n){r===void 0?(n=this.length,r=0):n===void 0&&typeof r=="string"?(n=this.length,r=0):isFinite(r)&&(r=r|0,isFinite(n)?n=n|0:n=void 0);var i=this.length-r;if((n===void 0||n>i)&&(n=i),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");return Sd(this,e,r,n)};Ee.prototype.slice=function(e,r){var n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);var i;if(Ee.TYPED_ARRAY_SUPPORT)i=this.subarray(e,r),i.__proto__=Ee.prototype;else{var s=r-e;i=new Ee(s,void 0);for(var c=0;c<s;++c)i[c]=this[c+e]}return i};Ee.prototype.copy=function(e,r,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);var s=i-n,c;if(this===e&&n<r&&r<i)for(c=s-1;c>=0;--c)e[c+r]=this[c+n];else if(s<1e3||!Ee.TYPED_ARRAY_SUPPORT)for(c=0;c<s;++c)e[c+r]=this[c+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),r);return s};Ee.prototype.fill=function(e,r,n){if(typeof e=="string"){if(typeof r=="string"?(r=0,n=this.length):typeof n=="string"&&(n=this.length),e.length===1){var i=e.charCodeAt(0);i<256&&(e=i)}}else typeof e=="number"&&(e=e&255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);var s;if(typeof e=="number")for(s=r;s<n;++s)this[s]=e;else{var c=Ee.isBuffer(e)?e:new Ee(e),o=c.length;for(s=0;s<n-r;++s)this[s+r]=c[s%o]}return this};Ee.concat=function(e,r){if(!yd(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Ar(null,0);var n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;var i=Gc(null,r),s=0;for(n=0;n<e.length;++n){var c=e[n];if(!Ee.isBuffer(c))throw new TypeError('"list" argument must be an Array of Buffers');c.copy(i,s),s+=c.length}return i};Ee.byteLength=Jc;Ee.prototype._isBuffer=!0;Ee.isBuffer=function(e){return!!(e!=null&&e._isBuffer)};ir.alloc=function(t){var e=new Ee(t);return e.fill(0),e};ir.from=function(t){return new Ee(t)};var Et={},Ds,Id=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Et.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Et.getSymbolTotalCodewords=function(e){return Id[e]};Et.getBCHDigit=function(t){for(var e=0;t!==0;)e++,t>>>=1;return e};Et.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');Ds=e};Et.isKanjiModeEnabled=function(){return typeof Ds<"u"};Et.toSJIS=function(e){return Ds(e)};var ii={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");var n=r.toLowerCase();switch(n){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(ii);function Qc(){this.buffer=[],this.length=0}Qc.prototype={get:function(t){var e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(var r=0;r<e;r++)this.putBit((t>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Cd=Qc,So=ir;function gn(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=So.alloc(t*t),this.reservedBit=So.alloc(t*t)}gn.prototype.set=function(t,e,r,n){var i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)};gn.prototype.get=function(t,e){return this.data[t*this.size+e]};gn.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r};gn.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var Td=gn,Xc={};(function(t){var e=Et.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];for(var i=Math.floor(n/7)+2,s=e(n),c=s===145?26:Math.ceil((s-13)/(2*i-2))*2,o=[s-7],u=1;u<i-1;u++)o[u]=o[u-1]-c;return o.push(6),o.reverse()},t.getPositions=function(n){for(var i=[],s=t.getRowColCoords(n),c=s.length,o=0;o<c;o++)for(var u=0;u<c;u++)o===0&&u===0||o===0&&u===c-1||o===c-1&&u===0||i.push([s[o],s[u]]);return i}})(Xc);var Zc={},Od=Et.getSymbolSize,Do=7;Zc.getPositions=function(e){var r=Od(e);return[[0,0],[r-Do,0],[0,r-Do]]};var eu={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){for(var s=i.size,c=0,o=0,u=0,l=null,d=null,m=0;m<s;m++){o=u=0,l=d=null;for(var b=0;b<s;b++){var x=i.get(m,b);x===l?o++:(o>=5&&(c+=e.N1+(o-5)),l=x,o=1),x=i.get(b,m),x===d?u++:(u>=5&&(c+=e.N1+(u-5)),d=x,u=1)}o>=5&&(c+=e.N1+(o-5)),u>=5&&(c+=e.N1+(u-5))}return c},t.getPenaltyN2=function(i){for(var s=i.size,c=0,o=0;o<s-1;o++)for(var u=0;u<s-1;u++){var l=i.get(o,u)+i.get(o,u+1)+i.get(o+1,u)+i.get(o+1,u+1);(l===4||l===0)&&c++}return c*e.N2},t.getPenaltyN3=function(i){for(var s=i.size,c=0,o=0,u=0,l=0;l<s;l++){o=u=0;for(var d=0;d<s;d++)o=o<<1&2047|i.get(l,d),d>=10&&(o===1488||o===93)&&c++,u=u<<1&2047|i.get(d,l),d>=10&&(u===1488||u===93)&&c++}return c*e.N3},t.getPenaltyN4=function(i){for(var s=0,c=i.data.length,o=0;o<c;o++)s+=i.data[o];var u=Math.abs(Math.ceil(s*100/c/5)-10);return u*e.N4};function r(n,i,s){switch(n){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,s){for(var c=s.size,o=0;o<c;o++)for(var u=0;u<c;u++)s.isReserved(u,o)||s.xor(u,o,r(i,u,o))},t.getBestMask=function(i,s){for(var c=Object.keys(t.Patterns).length,o=0,u=1/0,l=0;l<c;l++){s(l),t.applyMask(l,i);var d=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(l,i),d<u&&(u=d,o=l)}return o}})(eu);var si={},tr=ii,Pn=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ln=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];si.getBlocksCount=function(e,r){switch(r){case tr.L:return Pn[(e-1)*4+0];case tr.M:return Pn[(e-1)*4+1];case tr.Q:return Pn[(e-1)*4+2];case tr.H:return Pn[(e-1)*4+3];default:return}};si.getTotalCodewordsCount=function(e,r){switch(r){case tr.L:return Ln[(e-1)*4+0];case tr.M:return Ln[(e-1)*4+1];case tr.Q:return Ln[(e-1)*4+2];case tr.H:return Ln[(e-1)*4+3];default:return}};var tu={},oi={},ru=ir,rn=ru.alloc(512),jn=ru.alloc(256);(function(){for(var e=1,r=0;r<255;r++)rn[r]=e,jn[e]=r,e<<=1,e&256&&(e^=285);for(r=255;r<512;r++)rn[r]=rn[r-255]})();oi.log=function(e){if(e<1)throw new Error("log("+e+")");return jn[e]};oi.exp=function(e){return rn[e]};oi.mul=function(e,r){return e===0||r===0?0:rn[jn[e]+jn[r]]};(function(t){var e=ir,r=oi;t.mul=function(i,s){for(var c=e.alloc(i.length+s.length-1),o=0;o<i.length;o++)for(var u=0;u<s.length;u++)c[o+u]^=r.mul(i[o],s[u]);return c},t.mod=function(i,s){for(var c=e.from(i);c.length-s.length>=0;){for(var o=c[0],u=0;u<s.length;u++)c[u]^=r.mul(s[u],o);for(var l=0;l<c.length&&c[l]===0;)l++;c=c.slice(l)}return c},t.generateECPolynomial=function(i){for(var s=e.from([1]),c=0;c<i;c++)s=t.mul(s,[1,r.exp(c)]);return s}})(tu);var nu={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){var e=Wh,r=Vh,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=S,t.INSPECT_MAX_BYTES=50;var i=2147483647;t.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var v=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(v,f),v.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function c(v){if(v>i)throw new RangeError('The value "'+v+'" is invalid for option "size"');var f=new Uint8Array(v);return Object.setPrototypeOf(f,o.prototype),f}function o(v,f,p){if(typeof v=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(v)}return u(v,f,p)}o.poolSize=8192;function u(v,f,p){if(typeof v=="string")return b(v,f);if(ArrayBuffer.isView(v))return E(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(ee(v,ArrayBuffer)||v&&ee(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ee(v,SharedArrayBuffer)||v&&ee(v.buffer,SharedArrayBuffer)))return T(v,f,p);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var I=v.valueOf&&v.valueOf();if(I!=null&&I!==v)return o.from(I,f,p);var A=N(v);if(A)return A;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return o.from(v[Symbol.toPrimitive]("string"),f,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}o.from=function(v,f,p){return u(v,f,p)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function l(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function d(v,f,p){return l(v),v<=0?c(v):f!==void 0?typeof p=="string"?c(v).fill(f,p):c(v).fill(f):c(v)}o.alloc=function(v,f,p){return d(v,f,p)};function m(v){return l(v),c(v<0?0:M(v)|0)}o.allocUnsafe=function(v){return m(v)},o.allocUnsafeSlow=function(v){return m(v)};function b(v,f){if((typeof f!="string"||f==="")&&(f="utf8"),!o.isEncoding(f))throw new TypeError("Unknown encoding: "+f);var p=C(v,f)|0,I=c(p),A=I.write(v,f);return A!==p&&(I=I.slice(0,A)),I}function x(v){for(var f=v.length<0?0:M(v.length)|0,p=c(f),I=0;I<f;I+=1)p[I]=v[I]&255;return p}function E(v){if(ee(v,Uint8Array)){var f=new Uint8Array(v);return T(f.buffer,f.byteOffset,f.byteLength)}return x(v)}function T(v,f,p){if(f<0||v.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<f+(p||0))throw new RangeError('"length" is outside of buffer bounds');var I;return f===void 0&&p===void 0?I=new Uint8Array(v):p===void 0?I=new Uint8Array(v,f):I=new Uint8Array(v,f,p),Object.setPrototypeOf(I,o.prototype),I}function N(v){if(o.isBuffer(v)){var f=M(v.length)|0,p=c(f);return p.length===0||v.copy(p,0,0,f),p}if(v.length!==void 0)return typeof v.length!="number"||ve(v.length)?c(0):x(v);if(v.type==="Buffer"&&Array.isArray(v.data))return x(v.data)}function M(v){if(v>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return v|0}function S(v){return+v!=v&&(v=0),o.alloc(+v)}o.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==o.prototype},o.compare=function(f,p){if(ee(f,Uint8Array)&&(f=o.from(f,f.offset,f.byteLength)),ee(p,Uint8Array)&&(p=o.from(p,p.offset,p.byteLength)),!o.isBuffer(f)||!o.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===p)return 0;for(var I=f.length,A=p.length,q=0,z=Math.min(I,A);q<z;++q)if(f[q]!==p[q]){I=f[q],A=p[q];break}return I<A?-1:A<I?1:0},o.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(f,p){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return o.alloc(0);var I;if(p===void 0)for(p=0,I=0;I<f.length;++I)p+=f[I].length;var A=o.allocUnsafe(p),q=0;for(I=0;I<f.length;++I){var z=f[I];if(ee(z,Uint8Array))q+z.length>A.length?o.from(z).copy(A,q):Uint8Array.prototype.set.call(A,z,q);else if(o.isBuffer(z))z.copy(A,q);else throw new TypeError('"list" argument must be an Array of Buffers');q+=z.length}return A};function C(v,f){if(o.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||ee(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);var p=v.length,I=arguments.length>2&&arguments[2]===!0;if(!I&&p===0)return 0;for(var A=!1;;)switch(f){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return B(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return O(v).length;default:if(A)return I?-1:B(v).length;f=(""+f).toLowerCase(),A=!0}}o.byteLength=C;function _(v,f,p){var I=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,f>>>=0,p<=f))return"";for(v||(v="utf8");;)switch(v){case"hex":return W(this,f,p);case"utf8":case"utf-8":return R(this,f,p);case"ascii":return Y(this,f,p);case"latin1":case"binary":return K(this,f,p);case"base64":return Z(this,f,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,f,p);default:if(I)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),I=!0}}o.prototype._isBuffer=!0;function w(v,f,p){var I=v[f];v[f]=v[p],v[p]=I}o.prototype.swap16=function(){var f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var p=0;p<f;p+=2)w(this,p,p+1);return this},o.prototype.swap32=function(){var f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var p=0;p<f;p+=4)w(this,p,p+3),w(this,p+1,p+2);return this},o.prototype.swap64=function(){var f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var p=0;p<f;p+=8)w(this,p,p+7),w(this,p+1,p+6),w(this,p+2,p+5),w(this,p+3,p+4);return this},o.prototype.toString=function(){var f=this.length;return f===0?"":arguments.length===0?R(this,0,f):_.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(f){if(!o.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:o.compare(this,f)===0},o.prototype.inspect=function(){var f="",p=t.INSPECT_MAX_BYTES;return f=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(f+=" ... "),"<Buffer "+f+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(f,p,I,A,q){if(ee(f,Uint8Array)&&(f=o.from(f,f.offset,f.byteLength)),!o.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(p===void 0&&(p=0),I===void 0&&(I=f?f.length:0),A===void 0&&(A=0),q===void 0&&(q=this.length),p<0||I>f.length||A<0||q>this.length)throw new RangeError("out of range index");if(A>=q&&p>=I)return 0;if(A>=q)return-1;if(p>=I)return 1;if(p>>>=0,I>>>=0,A>>>=0,q>>>=0,this===f)return 0;for(var z=q-A,ne=I-p,oe=Math.min(z,ne),ue=this.slice(A,q),fe=f.slice(p,I),ae=0;ae<oe;++ae)if(ue[ae]!==fe[ae]){z=ue[ae],ne=fe[ae];break}return z<ne?-1:ne<z?1:0};function g(v,f,p,I,A){if(v.length===0)return-1;if(typeof p=="string"?(I=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,ve(p)&&(p=A?0:v.length-1),p<0&&(p=v.length+p),p>=v.length){if(A)return-1;p=v.length-1}else if(p<0)if(A)p=0;else return-1;if(typeof f=="string"&&(f=o.from(f,I)),o.isBuffer(f))return f.length===0?-1:a(v,f,p,I,A);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?A?Uint8Array.prototype.indexOf.call(v,f,p):Uint8Array.prototype.lastIndexOf.call(v,f,p):a(v,[f],p,I,A);throw new TypeError("val must be string, number or Buffer")}function a(v,f,p,I,A){var q=1,z=v.length,ne=f.length;if(I!==void 0&&(I=String(I).toLowerCase(),I==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if(v.length<2||f.length<2)return-1;q=2,z/=2,ne/=2,p/=2}function oe(be,_e){return q===1?be[_e]:be.readUInt16BE(_e*q)}var ue;if(A){var fe=-1;for(ue=p;ue<z;ue++)if(oe(v,ue)===oe(f,fe===-1?0:ue-fe)){if(fe===-1&&(fe=ue),ue-fe+1===ne)return fe*q}else fe!==-1&&(ue-=ue-fe),fe=-1}else for(p+ne>z&&(p=z-ne),ue=p;ue>=0;ue--){for(var ae=!0,ye=0;ye<ne;ye++)if(oe(v,ue+ye)!==oe(f,ye)){ae=!1;break}if(ae)return ue}return-1}o.prototype.includes=function(f,p,I){return this.indexOf(f,p,I)!==-1},o.prototype.indexOf=function(f,p,I){return g(this,f,p,I,!0)},o.prototype.lastIndexOf=function(f,p,I){return g(this,f,p,I,!1)};function y(v,f,p,I){p=Number(p)||0;var A=v.length-p;I?(I=Number(I),I>A&&(I=A)):I=A;var q=f.length;I>q/2&&(I=q/2);for(var z=0;z<I;++z){var ne=parseInt(f.substr(z*2,2),16);if(ve(ne))return z;v[p+z]=ne}return z}function $(v,f,p,I){return X(B(f,v.length-p),v,p,I)}function U(v,f,p,I){return X(P(f),v,p,I)}function G(v,f,p,I){return X(O(f),v,p,I)}function J(v,f,p,I){return X(h(f,v.length-p),v,p,I)}o.prototype.write=function(f,p,I,A){if(p===void 0)A="utf8",I=this.length,p=0;else if(I===void 0&&typeof p=="string")A=p,I=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(I)?(I=I>>>0,A===void 0&&(A="utf8")):(A=I,I=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var q=this.length-p;if((I===void 0||I>q)&&(I=q),f.length>0&&(I<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");A||(A="utf8");for(var z=!1;;)switch(A){case"hex":return y(this,f,p,I);case"utf8":case"utf-8":return $(this,f,p,I);case"ascii":case"latin1":case"binary":return U(this,f,p,I);case"base64":return G(this,f,p,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,f,p,I);default:if(z)throw new TypeError("Unknown encoding: "+A);A=(""+A).toLowerCase(),z=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Z(v,f,p){return f===0&&p===v.length?e.fromByteArray(v):e.fromByteArray(v.slice(f,p))}function R(v,f,p){p=Math.min(v.length,p);for(var I=[],A=f;A<p;){var q=v[A],z=null,ne=q>239?4:q>223?3:q>191?2:1;if(A+ne<=p){var oe,ue,fe,ae;switch(ne){case 1:q<128&&(z=q);break;case 2:oe=v[A+1],(oe&192)===128&&(ae=(q&31)<<6|oe&63,ae>127&&(z=ae));break;case 3:oe=v[A+1],ue=v[A+2],(oe&192)===128&&(ue&192)===128&&(ae=(q&15)<<12|(oe&63)<<6|ue&63,ae>2047&&(ae<55296||ae>57343)&&(z=ae));break;case 4:oe=v[A+1],ue=v[A+2],fe=v[A+3],(oe&192)===128&&(ue&192)===128&&(fe&192)===128&&(ae=(q&15)<<18|(oe&63)<<12|(ue&63)<<6|fe&63,ae>65535&&ae<1114112&&(z=ae))}}z===null?(z=65533,ne=1):z>65535&&(z-=65536,I.push(z>>>10&1023|55296),z=56320|z&1023),I.push(z),A+=ne}return re(I)}var k=4096;function re(v){var f=v.length;if(f<=k)return String.fromCharCode.apply(String,v);for(var p="",I=0;I<f;)p+=String.fromCharCode.apply(String,v.slice(I,I+=k));return p}function Y(v,f,p){var I="";p=Math.min(v.length,p);for(var A=f;A<p;++A)I+=String.fromCharCode(v[A]&127);return I}function K(v,f,p){var I="";p=Math.min(v.length,p);for(var A=f;A<p;++A)I+=String.fromCharCode(v[A]);return I}function W(v,f,p){var I=v.length;(!f||f<0)&&(f=0),(!p||p<0||p>I)&&(p=I);for(var A="",q=f;q<p;++q)A+=xe[v[q]];return A}function j(v,f,p){for(var I=v.slice(f,p),A="",q=0;q<I.length-1;q+=2)A+=String.fromCharCode(I[q]+I[q+1]*256);return A}o.prototype.slice=function(f,p){var I=this.length;f=~~f,p=p===void 0?I:~~p,f<0?(f+=I,f<0&&(f=0)):f>I&&(f=I),p<0?(p+=I,p<0&&(p=0)):p>I&&(p=I),p<f&&(p=f);var A=this.subarray(f,p);return Object.setPrototypeOf(A,o.prototype),A};function H(v,f,p){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+f>p)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(f,p,I){f=f>>>0,p=p>>>0,I||H(f,p,this.length);for(var A=this[f],q=1,z=0;++z<p&&(q*=256);)A+=this[f+z]*q;return A},o.prototype.readUintBE=o.prototype.readUIntBE=function(f,p,I){f=f>>>0,p=p>>>0,I||H(f,p,this.length);for(var A=this[f+--p],q=1;p>0&&(q*=256);)A+=this[f+--p]*q;return A},o.prototype.readUint8=o.prototype.readUInt8=function(f,p){return f=f>>>0,p||H(f,1,this.length),this[f]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(f,p){return f=f>>>0,p||H(f,2,this.length),this[f]|this[f+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(f,p){return f=f>>>0,p||H(f,2,this.length),this[f]<<8|this[f+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(f,p){return f=f>>>0,p||H(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(f,p){return f=f>>>0,p||H(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},o.prototype.readIntLE=function(f,p,I){f=f>>>0,p=p>>>0,I||H(f,p,this.length);for(var A=this[f],q=1,z=0;++z<p&&(q*=256);)A+=this[f+z]*q;return q*=128,A>=q&&(A-=Math.pow(2,8*p)),A},o.prototype.readIntBE=function(f,p,I){f=f>>>0,p=p>>>0,I||H(f,p,this.length);for(var A=p,q=1,z=this[f+--A];A>0&&(q*=256);)z+=this[f+--A]*q;return q*=128,z>=q&&(z-=Math.pow(2,8*p)),z},o.prototype.readInt8=function(f,p){return f=f>>>0,p||H(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},o.prototype.readInt16LE=function(f,p){f=f>>>0,p||H(f,2,this.length);var I=this[f]|this[f+1]<<8;return I&32768?I|4294901760:I},o.prototype.readInt16BE=function(f,p){f=f>>>0,p||H(f,2,this.length);var I=this[f+1]|this[f]<<8;return I&32768?I|4294901760:I},o.prototype.readInt32LE=function(f,p){return f=f>>>0,p||H(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},o.prototype.readInt32BE=function(f,p){return f=f>>>0,p||H(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},o.prototype.readFloatLE=function(f,p){return f=f>>>0,p||H(f,4,this.length),r.read(this,f,!0,23,4)},o.prototype.readFloatBE=function(f,p){return f=f>>>0,p||H(f,4,this.length),r.read(this,f,!1,23,4)},o.prototype.readDoubleLE=function(f,p){return f=f>>>0,p||H(f,8,this.length),r.read(this,f,!0,52,8)},o.prototype.readDoubleBE=function(f,p){return f=f>>>0,p||H(f,8,this.length),r.read(this,f,!1,52,8)};function le(v,f,p,I,A,q){if(!o.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>A||f<q)throw new RangeError('"value" argument is out of bounds');if(p+I>v.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(f,p,I,A){if(f=+f,p=p>>>0,I=I>>>0,!A){var q=Math.pow(2,8*I)-1;le(this,f,p,I,q,0)}var z=1,ne=0;for(this[p]=f&255;++ne<I&&(z*=256);)this[p+ne]=f/z&255;return p+I},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(f,p,I,A){if(f=+f,p=p>>>0,I=I>>>0,!A){var q=Math.pow(2,8*I)-1;le(this,f,p,I,q,0)}var z=I-1,ne=1;for(this[p+z]=f&255;--z>=0&&(ne*=256);)this[p+z]=f/ne&255;return p+I},o.prototype.writeUint8=o.prototype.writeUInt8=function(f,p,I){return f=+f,p=p>>>0,I||le(this,f,p,1,255,0),this[p]=f&255,p+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(f,p,I){return f=+f,p=p>>>0,I||le(this,f,p,2,65535,0),this[p]=f&255,this[p+1]=f>>>8,p+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(f,p,I){return f=+f,p=p>>>0,I||le(this,f,p,2,65535,0),this[p]=f>>>8,this[p+1]=f&255,p+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(f,p,I){return f=+f,p=p>>>0,I||le(this,f,p,4,4294967295,0),this[p+3]=f>>>24,this[p+2]=f>>>16,this[p+1]=f>>>8,this[p]=f&255,p+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(f,p,I){return f=+f,p=p>>>0,I||le(this,f,p,4,4294967295,0),this[p]=f>>>24,this[p+1]=f>>>16,this[p+2]=f>>>8,this[p+3]=f&255,p+4},o.prototype.writeIntLE=function(f,p,I,A){if(f=+f,p=p>>>0,!A){var q=Math.pow(2,8*I-1);le(this,f,p,I,q-1,-q)}var z=0,ne=1,oe=0;for(this[p]=f&255;++z<I&&(ne*=256);)f<0&&oe===0&&this[p+z-1]!==0&&(oe=1),this[p+z]=(f/ne>>0)-oe&255;return p+I},o.prototype.writeIntBE=function(f,p,I,A){if(f=+f,p=p>>>0,!A){var q=Math.pow(2,8*I-1);le(this,f,p,I,q-1,-q)}var z=I-1,ne=1,oe=0;for(this[p+z]=f&255;--z>=0&&(ne*=256);)f<0&&oe===0&&this[p+z+1]!==0&&(oe=1),this[p+z]=(f/ne>>0)-oe&255;return p+I},o.prototype.writeInt8=function(f,p,I){return f=+f,p=p>>>0,I||le(this,f,p,1,127,-128),f<0&&(f=255+f+1),this[p]=f&255,p+1},o.prototype.writeInt16LE=function(f,p,I){return f=+f,p=p>>>0,I||le(this,f,p,2,32767,-32768),this[p]=f&255,this[p+1]=f>>>8,p+2},o.prototype.writeInt16BE=function(f,p,I){return f=+f,p=p>>>0,I||le(this,f,p,2,32767,-32768),this[p]=f>>>8,this[p+1]=f&255,p+2},o.prototype.writeInt32LE=function(f,p,I){return f=+f,p=p>>>0,I||le(this,f,p,4,2147483647,-2147483648),this[p]=f&255,this[p+1]=f>>>8,this[p+2]=f>>>16,this[p+3]=f>>>24,p+4},o.prototype.writeInt32BE=function(f,p,I){return f=+f,p=p>>>0,I||le(this,f,p,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[p]=f>>>24,this[p+1]=f>>>16,this[p+2]=f>>>8,this[p+3]=f&255,p+4};function Q(v,f,p,I,A,q){if(p+I>v.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function de(v,f,p,I,A){return f=+f,p=p>>>0,A||Q(v,f,p,4),r.write(v,f,p,I,23,4),p+4}o.prototype.writeFloatLE=function(f,p,I){return de(this,f,p,!0,I)},o.prototype.writeFloatBE=function(f,p,I){return de(this,f,p,!1,I)};function se(v,f,p,I,A){return f=+f,p=p>>>0,A||Q(v,f,p,8),r.write(v,f,p,I,52,8),p+8}o.prototype.writeDoubleLE=function(f,p,I){return se(this,f,p,!0,I)},o.prototype.writeDoubleBE=function(f,p,I){return se(this,f,p,!1,I)},o.prototype.copy=function(f,p,I,A){if(!o.isBuffer(f))throw new TypeError("argument should be a Buffer");if(I||(I=0),!A&&A!==0&&(A=this.length),p>=f.length&&(p=f.length),p||(p=0),A>0&&A<I&&(A=I),A===I||f.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(I<0||I>=this.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("sourceEnd out of bounds");A>this.length&&(A=this.length),f.length-p<A-I&&(A=f.length-p+I);var q=A-I;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(p,I,A):Uint8Array.prototype.set.call(f,this.subarray(I,A),p),q},o.prototype.fill=function(f,p,I,A){if(typeof f=="string"){if(typeof p=="string"?(A=p,p=0,I=this.length):typeof I=="string"&&(A=I,I=this.length),A!==void 0&&typeof A!="string")throw new TypeError("encoding must be a string");if(typeof A=="string"&&!o.isEncoding(A))throw new TypeError("Unknown encoding: "+A);if(f.length===1){var q=f.charCodeAt(0);(A==="utf8"&&q<128||A==="latin1")&&(f=q)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(p<0||this.length<p||this.length<I)throw new RangeError("Out of range index");if(I<=p)return this;p=p>>>0,I=I===void 0?this.length:I>>>0,f||(f=0);var z;if(typeof f=="number")for(z=p;z<I;++z)this[z]=f;else{var ne=o.isBuffer(f)?f:o.from(f,A),oe=ne.length;if(oe===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(z=0;z<I-p;++z)this[z+p]=ne[z%oe]}return this};var pe=/[^+/0-9A-Za-z-_]/g;function F(v){if(v=v.split("=")[0],v=v.trim().replace(pe,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function B(v,f){f=f||1/0;for(var p,I=v.length,A=null,q=[],z=0;z<I;++z){if(p=v.charCodeAt(z),p>55295&&p<57344){if(!A){if(p>56319){(f-=3)>-1&&q.push(239,191,189);continue}else if(z+1===I){(f-=3)>-1&&q.push(239,191,189);continue}A=p;continue}if(p<56320){(f-=3)>-1&&q.push(239,191,189),A=p;continue}p=(A-55296<<10|p-56320)+65536}else A&&(f-=3)>-1&&q.push(239,191,189);if(A=null,p<128){if((f-=1)<0)break;q.push(p)}else if(p<2048){if((f-=2)<0)break;q.push(p>>6|192,p&63|128)}else if(p<65536){if((f-=3)<0)break;q.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((f-=4)<0)break;q.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return q}function P(v){for(var f=[],p=0;p<v.length;++p)f.push(v.charCodeAt(p)&255);return f}function h(v,f){for(var p,I,A,q=[],z=0;z<v.length&&!((f-=2)<0);++z)p=v.charCodeAt(z),I=p>>8,A=p%256,q.push(A),q.push(I);return q}function O(v){return e.toByteArray(F(v))}function X(v,f,p,I){for(var A=0;A<I&&!(A+p>=f.length||A>=v.length);++A)f[A+p]=v[A];return A}function ee(v,f){return v instanceof f||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===f.name}function ve(v){return v!==v}var xe=function(){for(var v="0123456789abcdef",f=new Array(256),p=0;p<16;++p)for(var I=p*16,A=0;A<16;++A)f[I+A]=v[p]+v[A];return f}()})(nu);var Io=ir,iu=tu,Nd=nu.Buffer;function Is(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Is.prototype.initialize=function(e){this.degree=e,this.genPoly=iu.generateECPolynomial(this.degree)};Is.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");var r=Io.alloc(this.degree),n=Nd.concat([e,r],e.length+this.degree),i=iu.mod(n,this.genPoly),s=this.degree-i.length;if(s>0){var c=Io.alloc(this.degree);return i.copy(c,s),c}return i};var Ad=Is,su={},sr={},Cs={};Cs.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var $t={},ou="[0-9]+",Rd="[A-Z $%*+\\-./:]+",cn="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";cn=cn.replace(/u/g,"\\u");var Pd="(?:(?![A-Z0-9 $%*+\\-./:]|"+cn+`)(?:.|[\r
]))+`;$t.KANJI=new RegExp(cn,"g");$t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");$t.BYTE=new RegExp(Pd,"g");$t.NUMERIC=new RegExp(ou,"g");$t.ALPHANUMERIC=new RegExp(Rd,"g");var Ld=new RegExp("^"+cn+"$"),Ud=new RegExp("^"+ou+"$"),Md=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");$t.testKanji=function(e){return Ld.test(e)};$t.testNumeric=function(e){return Ud.test(e)};$t.testAlphanumeric=function(e){return Md.test(e)};(function(t){var e=Cs,r=$t;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,c){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(c))throw new Error("Invalid version: "+c);return c>=1&&c<10?s.ccBits[0]:c<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");var s=i.toLowerCase();switch(s){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,c){if(t.isValid(s))return s;try{return n(s)}catch{return c}}})(sr);(function(t){var e=Et,r=si,n=ii,i=sr,s=Cs,c=xs,o=7973,u=e.getBCHDigit(o);function l(x,E,T){for(var N=1;N<=40;N++)if(E<=t.getCapacity(N,T,x))return N}function d(x,E){return i.getCharCountIndicator(x,E)+4}function m(x,E){var T=0;return x.forEach(function(N){var M=d(N.mode,E);T+=M+N.getBitsLength()}),T}function b(x,E){for(var T=1;T<=40;T++){var N=m(x,T);if(N<=t.getCapacity(T,E,i.MIXED))return T}}t.from=function(E,T){return s.isValid(E)?parseInt(E,10):T},t.getCapacity=function(E,T,N){if(!s.isValid(E))throw new Error("Invalid QR Code version");typeof N>"u"&&(N=i.BYTE);var M=e.getSymbolTotalCodewords(E),S=r.getTotalCodewordsCount(E,T),C=(M-S)*8;if(N===i.MIXED)return C;var _=C-d(N,E);switch(N){case i.NUMERIC:return Math.floor(_/10*3);case i.ALPHANUMERIC:return Math.floor(_/11*2);case i.KANJI:return Math.floor(_/13);case i.BYTE:default:return Math.floor(_/8)}},t.getBestVersionForData=function(E,T){var N,M=n.from(T,n.M);if(c(E)){if(E.length>1)return b(E,M);if(E.length===0)return 1;N=E[0]}else N=E;return l(N.mode,N.getLength(),M)},t.getEncodedBits=function(E){if(!s.isValid(E)||E<7)throw new Error("Invalid QR Code version");for(var T=E<<12;e.getBCHDigit(T)-u>=0;)T^=o<<e.getBCHDigit(T)-u;return E<<12|T}})(su);var au={},Qi=Et,cu=1335,$d=21522,Co=Qi.getBCHDigit(cu);au.getEncodedBits=function(e,r){for(var n=e.bit<<3|r,i=n<<10;Qi.getBCHDigit(i)-Co>=0;)i^=cu<<Qi.getBCHDigit(i)-Co;return(n<<10|i)^$d};var uu={},Bd=sr;function Rr(t){this.mode=Bd.NUMERIC,this.data=t.toString()}Rr.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Rr.prototype.getLength=function(){return this.data.length};Rr.prototype.getBitsLength=function(){return Rr.getBitsLength(this.data.length)};Rr.prototype.write=function(e){var r,n,i;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),i=parseInt(n,10),e.put(i,10);var s=this.data.length-r;s>0&&(n=this.data.substr(r),i=parseInt(n,10),e.put(i,s*3+1))};var Fd=Rr,kd=sr,Ei=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Pr(t){this.mode=kd.ALPHANUMERIC,this.data=t}Pr.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Pr.prototype.getLength=function(){return this.data.length};Pr.prototype.getBitsLength=function(){return Pr.getBitsLength(this.data.length)};Pr.prototype.write=function(e){var r;for(r=0;r+2<=this.data.length;r+=2){var n=Ei.indexOf(this.data[r])*45;n+=Ei.indexOf(this.data[r+1]),e.put(n,11)}this.data.length%2&&e.put(Ei.indexOf(this.data[r]),6)};var qd=Pr,zd=ir,jd=sr;function Lr(t){this.mode=jd.BYTE,this.data=zd.from(t)}Lr.getBitsLength=function(e){return e*8};Lr.prototype.getLength=function(){return this.data.length};Lr.prototype.getBitsLength=function(){return Lr.getBitsLength(this.data.length)};Lr.prototype.write=function(t){for(var e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)};var Kd=Lr,Hd=sr,Wd=Et;function Ur(t){this.mode=Hd.KANJI,this.data=t}Ur.getBitsLength=function(e){return e*13};Ur.prototype.getLength=function(){return this.data.length};Ur.prototype.getBitsLength=function(){return Ur.getBitsLength(this.data.length)};Ur.prototype.write=function(t){var e;for(e=0;e<this.data.length;e++){var r=Wd.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),t.put(r,13)}};var Vd=Ur,lu={exports:{}};(function(t){var e={single_source_shortest_paths:function(r,n,i){var s={},c={};c[n]=0;var o=e.PriorityQueue.make();o.push(n,0);for(var u,l,d,m,b,x,E,T,N;!o.empty();){u=o.pop(),l=u.value,m=u.cost,b=r[l]||{};for(d in b)b.hasOwnProperty(d)&&(x=b[d],E=m+x,T=c[d],N=typeof c[d]>"u",(N||T>E)&&(c[d]=E,o.push(d,E),s[d]=l))}if(typeof i<"u"&&typeof c[i]>"u"){var M=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(M)}return s},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],s=n;s;)i.push(s),r[s],s=r[s];return i.reverse(),i},find_path:function(r,n,i){var s=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},s;r=r||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(lu);var Gd=lu.exports;(function(t){var e=sr,r=Fd,n=qd,i=Kd,s=Vd,c=$t,o=Et,u=Gd;function l(M){return unescape(encodeURIComponent(M)).length}function d(M,S,C){for(var _=[],w;(w=M.exec(C))!==null;)_.push({data:w[0],index:w.index,mode:S,length:w[0].length});return _}function m(M){var S=d(c.NUMERIC,e.NUMERIC,M),C=d(c.ALPHANUMERIC,e.ALPHANUMERIC,M),_,w;o.isKanjiModeEnabled()?(_=d(c.BYTE,e.BYTE,M),w=d(c.KANJI,e.KANJI,M)):(_=d(c.BYTE_KANJI,e.BYTE,M),w=[]);var g=S.concat(C,_,w);return g.sort(function(a,y){return a.index-y.index}).map(function(a){return{data:a.data,mode:a.mode,length:a.length}})}function b(M,S){switch(S){case e.NUMERIC:return r.getBitsLength(M);case e.ALPHANUMERIC:return n.getBitsLength(M);case e.KANJI:return s.getBitsLength(M);case e.BYTE:return i.getBitsLength(M)}}function x(M){return M.reduce(function(S,C){var _=S.length-1>=0?S[S.length-1]:null;return _&&_.mode===C.mode?(S[S.length-1].data+=C.data,S):(S.push(C),S)},[])}function E(M){for(var S=[],C=0;C<M.length;C++){var _=M[C];switch(_.mode){case e.NUMERIC:S.push([_,{data:_.data,mode:e.ALPHANUMERIC,length:_.length},{data:_.data,mode:e.BYTE,length:_.length}]);break;case e.ALPHANUMERIC:S.push([_,{data:_.data,mode:e.BYTE,length:_.length}]);break;case e.KANJI:S.push([_,{data:_.data,mode:e.BYTE,length:l(_.data)}]);break;case e.BYTE:S.push([{data:_.data,mode:e.BYTE,length:l(_.data)}])}}return S}function T(M,S){for(var C={},_={start:{}},w=["start"],g=0;g<M.length;g++){for(var a=M[g],y=[],$=0;$<a.length;$++){var U=a[$],G=""+g+$;y.push(G),C[G]={node:U,lastCount:0},_[G]={};for(var J=0;J<w.length;J++){var Z=w[J];C[Z]&&C[Z].node.mode===U.mode?(_[Z][G]=b(C[Z].lastCount+U.length,U.mode)-b(C[Z].lastCount,U.mode),C[Z].lastCount+=U.length):(C[Z]&&(C[Z].lastCount=U.length),_[Z][G]=b(U.length,U.mode)+4+e.getCharCountIndicator(U.mode,S))}}w=y}for(J=0;J<w.length;J++)_[w[J]].end=0;return{map:_,table:C}}function N(M,S){var C,_=e.getBestModeForData(M);if(C=e.from(S,_),C!==e.BYTE&&C.bit<_.bit)throw new Error('"'+M+'" cannot be encoded with mode '+e.toString(C)+`.
 Suggested mode is: `+e.toString(_));switch(C===e.KANJI&&!o.isKanjiModeEnabled()&&(C=e.BYTE),C){case e.NUMERIC:return new r(M);case e.ALPHANUMERIC:return new n(M);case e.KANJI:return new s(M);case e.BYTE:return new i(M)}}t.fromArray=function(S){return S.reduce(function(C,_){return typeof _=="string"?C.push(N(_,null)):_.data&&C.push(N(_.data,_.mode)),C},[])},t.fromString=function(S,C){for(var _=m(S,o.isKanjiModeEnabled()),w=E(_),g=T(w,C),a=u.find_path(g.map,"start","end"),y=[],$=1;$<a.length-1;$++)y.push(g.table[a[$]].node);return t.fromArray(x(y))},t.rawSplit=function(S){return t.fromArray(m(S,o.isKanjiModeEnabled()))}})(uu);var To=ir,ai=Et,xi=ii,Yd=Cd,Jd=Td,Qd=Xc,Xd=Zc,Xi=eu,Zi=si,Zd=Ad,Kn=su,ep=au,tp=sr,Si=uu,rp=xs;function np(t,e){for(var r=t.size,n=Xd.getPositions(e),i=0;i<n.length;i++)for(var s=n[i][0],c=n[i][1],o=-1;o<=7;o++)if(!(s+o<=-1||r<=s+o))for(var u=-1;u<=7;u++)c+u<=-1||r<=c+u||(o>=0&&o<=6&&(u===0||u===6)||u>=0&&u<=6&&(o===0||o===6)||o>=2&&o<=4&&u>=2&&u<=4?t.set(s+o,c+u,!0,!0):t.set(s+o,c+u,!1,!0))}function ip(t){for(var e=t.size,r=8;r<e-8;r++){var n=r%2===0;t.set(r,6,n,!0),t.set(6,r,n,!0)}}function sp(t,e){for(var r=Qd.getPositions(e),n=0;n<r.length;n++)for(var i=r[n][0],s=r[n][1],c=-2;c<=2;c++)for(var o=-2;o<=2;o++)c===-2||c===2||o===-2||o===2||c===0&&o===0?t.set(i+c,s+o,!0,!0):t.set(i+c,s+o,!1,!0)}function op(t,e){for(var r=t.size,n=Kn.getEncodedBits(e),i,s,c,o=0;o<18;o++)i=Math.floor(o/3),s=o%3+r-8-3,c=(n>>o&1)===1,t.set(i,s,c,!0),t.set(s,i,c,!0)}function Di(t,e,r){var n=t.size,i=ep.getEncodedBits(e,r),s,c;for(s=0;s<15;s++)c=(i>>s&1)===1,s<6?t.set(s,8,c,!0):s<8?t.set(s+1,8,c,!0):t.set(n-15+s,8,c,!0),s<8?t.set(8,n-s-1,c,!0):s<9?t.set(8,15-s-1+1,c,!0):t.set(8,15-s-1,c,!0);t.set(n-8,8,1,!0)}function ap(t,e){for(var r=t.size,n=-1,i=r-1,s=7,c=0,o=r-1;o>0;o-=2)for(o===6&&o--;;){for(var u=0;u<2;u++)if(!t.isReserved(i,o-u)){var l=!1;c<e.length&&(l=(e[c]>>>s&1)===1),t.set(i,o-u,l),s--,s===-1&&(c++,s=7)}if(i+=n,i<0||r<=i){i-=n,n=-n;break}}}function cp(t,e,r){var n=new Yd;r.forEach(function(l){n.put(l.mode.bit,4),n.put(l.getLength(),tp.getCharCountIndicator(l.mode,t)),l.write(n)});var i=ai.getSymbolTotalCodewords(t),s=Zi.getTotalCodewordsCount(t,e),c=(i-s)*8;for(n.getLengthInBits()+4<=c&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);for(var o=(c-n.getLengthInBits())/8,u=0;u<o;u++)n.put(u%2?17:236,8);return up(n,t,e)}function up(t,e,r){for(var n=ai.getSymbolTotalCodewords(e),i=Zi.getTotalCodewordsCount(e,r),s=n-i,c=Zi.getBlocksCount(e,r),o=n%c,u=c-o,l=Math.floor(n/c),d=Math.floor(s/c),m=d+1,b=l-d,x=new Zd(b),E=0,T=new Array(c),N=new Array(c),M=0,S=To.from(t.buffer),C=0;C<c;C++){var _=C<u?d:m;T[C]=S.slice(E,E+_),N[C]=x.encode(T[C]),E+=_,M=Math.max(M,_)}var w=To.alloc(n),g=0,a,y;for(a=0;a<M;a++)for(y=0;y<c;y++)a<T[y].length&&(w[g++]=T[y][a]);for(a=0;a<b;a++)for(y=0;y<c;y++)w[g++]=N[y][a];return w}function lp(t,e,r,n){var i;if(rp(t))i=Si.fromArray(t);else if(typeof t=="string"){var s=e;if(!s){var c=Si.rawSplit(t);s=Kn.getBestVersionForData(c,r)}i=Si.fromString(t,s||40)}else throw new Error("Invalid data");var o=Kn.getBestVersionForData(i,r);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=o;else if(e<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);var u=cp(e,r,i),l=ai.getSymbolSize(e),d=new Jd(l);return np(d,e),ip(d),sp(d,e),Di(d,r,0),e>=7&&op(d,e),ap(d,u),isNaN(n)&&(n=Xi.getBestMask(d,Di.bind(null,d,r))),Xi.applyMask(n,d),Di(d,r,n),{modules:d,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}Vc.create=function(e,r){if(typeof e>"u"||e==="")throw new Error("No input text");var n=xi.M,i,s;return typeof r<"u"&&(n=xi.from(r.errorCorrectionLevel,xi.M),i=Kn.from(r.version),s=Xi.from(r.maskPattern),r.toSJISFunc&&ai.setToSJISFunction(r.toSJISFunc)),lp(e,i,n,s)};var hu={},Ts={};(function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");var n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");var i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});var i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,c=n.scale||4;return{width:s,scale:s?4:c,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){var s=t.getScale(n,i);return Math.floor((n+i.margin*2)*s)},t.qrToImageData=function(n,i,s){for(var c=i.modules.size,o=i.modules.data,u=t.getScale(c,s),l=Math.floor((c+s.margin*2)*u),d=s.margin*u,m=[s.color.light,s.color.dark],b=0;b<l;b++)for(var x=0;x<l;x++){var E=(b*l+x)*4,T=s.color.light;if(b>=d&&x>=d&&b<l-d&&x<l-d){var N=Math.floor((b-d)/u),M=Math.floor((x-d)/u);T=m[o[N*c+M]?1:0]}n[E++]=T.r,n[E++]=T.g,n[E++]=T.b,n[E]=T.a}}})(Ts);(function(t){var e=Ts;function r(i,s,c){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=c,s.width=c,s.style.height=c+"px",s.style.width=c+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,c,o){var u=o,l=c;typeof u>"u"&&(!c||!c.getContext)&&(u=c,c=void 0),c||(l=n()),u=e.getOptions(u);var d=e.getImageWidth(s.modules.size,u),m=l.getContext("2d"),b=m.createImageData(d,d);return e.qrToImageData(b.data,s,u),r(m,l,d),m.putImageData(b,0,0),l},t.renderToDataURL=function(s,c,o){var u=o;typeof u>"u"&&(!c||!c.getContext)&&(u=c,c=void 0),u||(u={});var l=t.render(s,c,u),d=u.type||"image/png",m=u.rendererOpts||{};return l.toDataURL(d,m.quality)}})(hu);var fu={},hp=Ts;function Oo(t,e){var r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function Ii(t,e,r){var n=t+e;return typeof r<"u"&&(n+=" "+r),n}function fp(t,e,r){for(var n="",i=0,s=!1,c=0,o=0;o<t.length;o++){var u=Math.floor(o%e),l=Math.floor(o/e);!u&&!s&&(s=!0),t[o]?(c++,o>0&&u>0&&t[o-1]||(n+=s?Ii("M",u+r,.5+l+r):Ii("m",i,0),i=0,s=!1),u+1<e&&t[o+1]||(n+=Ii("h",c),c=0)):i++}return n}fu.render=function(e,r,n){var i=hp.getOptions(r),s=e.modules.size,c=e.modules.data,o=s+i.margin*2,u=i.color.light.a?"<path "+Oo(i.color.light,"fill")+' d="M0 0h'+o+"v"+o+'H0z"/>':"",l="<path "+Oo(i.color.dark,"stroke")+' d="'+fp(c,s,i.margin)+'"/>',d='viewBox="0 0 '+o+" "+o+'"',m=i.width?'width="'+i.width+'" height="'+i.width+'" ':"",b='<svg xmlns="http://www.w3.org/2000/svg" '+m+d+' shape-rendering="crispEdges">'+u+l+`</svg>
`;return typeof n=="function"&&n(null,b),b};var dp=gd,es=Vc,du=hu,pp=fu;function Os(t,e,r,n,i){var s=[].slice.call(arguments,1),c=s.length,o=typeof s[c-1]=="function";if(!o&&!dp())throw new Error("Callback required as last argument");if(o){if(c<2)throw new Error("Too few arguments provided");c===2?(i=r,r=e,e=n=void 0):c===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(c<1)throw new Error("Too few arguments provided");return c===1?(r=e,e=n=void 0):c===2&&!e.getContext&&(n=r,r=e,e=void 0),new Promise(function(l,d){try{var m=es.create(r,n);l(t(m,e,n))}catch(b){d(b)}})}try{var u=es.create(r,n);i(null,t(u,e,n))}catch(l){i(l)}}pn.create=es.create;pn.toCanvas=Os.bind(null,du.render);pn.toDataURL=Os.bind(null,du.renderToDataURL);pn.toString=Os.bind(null,function(t,e,r){return pp.render(t,r)});var gp=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,r=[],n=0;n<t.rangeCount;n++)r.push(t.getRangeAt(n));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return t.removeAllRanges(),function(){t.type==="Caret"&&t.removeAllRanges(),t.rangeCount||r.forEach(function(i){t.addRange(i)}),e&&e.focus()}},_p=gp,No={"text/plain":"Text","text/html":"Url",default:"Text"},yp="Copy to clipboard: #{key}, Enter";function mp(t){var e=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}function wp(t,e){var r,n,i,s,c,o,u=!1;e||(e={}),r=e.debug||!1;try{i=_p(),s=document.createRange(),c=document.getSelection(),o=document.createElement("span"),o.textContent=t,o.ariaHidden="true",o.style.all="unset",o.style.position="fixed",o.style.top=0,o.style.clip="rect(0, 0, 0, 0)",o.style.whiteSpace="pre",o.style.webkitUserSelect="text",o.style.MozUserSelect="text",o.style.msUserSelect="text",o.style.userSelect="text",o.addEventListener("copy",function(d){if(d.stopPropagation(),e.format)if(d.preventDefault(),typeof d.clipboardData>"u"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var m=No[e.format]||No.default;window.clipboardData.setData(m,t)}else d.clipboardData.clearData(),d.clipboardData.setData(e.format,t);e.onCopy&&(d.preventDefault(),e.onCopy(d.clipboardData))}),document.body.appendChild(o),s.selectNodeContents(o),c.addRange(s);var l=document.execCommand("copy");if(!l)throw new Error("copy command was unsuccessful");u=!0}catch(d){r&&console.error("unable to copy using execCommand: ",d),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),u=!0}catch(m){r&&console.error("unable to copy using clipboardData: ",m),r&&console.error("falling back to prompt"),n=mp("message"in e?e.message:yp),window.prompt(n,t)}}finally{c&&(typeof c.removeRange=="function"?c.removeRange(s):c.removeAllRanges()),o&&document.body.removeChild(o),i()}return u}var vp=wp,ge,nn,Ns,pu,Ao,As,gu,Gt={},ci=[],bp=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function Vt(t,e){for(var r in e)t[r]=e[r];return t}function _u(t){var e=t.parentNode;e&&e.removeChild(t)}function Yt(t,e,r){var n,i=arguments,s={};for(n in e)n!=="key"&&n!=="ref"&&(s[n]=e[n]);if(arguments.length>3)for(r=[r],n=3;n<arguments.length;n++)r.push(i[n]);if(r!=null&&(s.children=r),typeof t=="function"&&t.defaultProps!=null)for(n in t.defaultProps)s[n]===void 0&&(s[n]=t.defaultProps[n]);return Hn(t,s,e&&e.key,e&&e.ref,null)}function Hn(t,e,r,n,i){var s={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i};return i==null&&(s.__v=s),ge.vnode&&ge.vnode(s),s}function yu(){return{}}function _n(t){return t.children}function At(t,e){this.props=t,this.context=e}function un(t,e){if(e==null)return t.__?un(t.__,t.__.__k.indexOf(t)+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?un(t):null}function mu(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return mu(t)}}function Fn(t){(!t.__d&&(t.__d=!0)&&nn.push(t)&&!Ns++||Ao!==ge.debounceRendering)&&((Ao=ge.debounceRendering)||pu)(Ep)}function Ep(){for(var t;Ns=nn.length;)t=nn.sort(function(e,r){return e.__v.__b-r.__v.__b}),nn=[],t.some(function(e){var r,n,i,s,c,o,u;e.__d&&(o=(c=(r=e).__v).__e,(u=r.__P)&&(n=[],(i=Vt({},c)).__v=i,s=Rs(u,c,i,r.__n,u.ownerSVGElement!==void 0,null,n,o??un(c)),vu(n,c),s!=o&&mu(c)))})}function wu(t,e,r,n,i,s,c,o,u){var l,d,m,b,x,E,T,N=r&&r.__k||ci,M=N.length;if(o==Gt&&(o=s!=null?s[0]:M?un(r,0):null),l=0,e.__k=rr(e.__k,function(S){if(S!=null){if(S.__=e,S.__b=e.__b+1,(m=N[l])===null||m&&S.key==m.key&&S.type===m.type)N[l]=void 0;else for(d=0;d<M;d++){if((m=N[d])&&S.key==m.key&&S.type===m.type){N[d]=void 0;break}m=null}if(b=Rs(t,S,m=m||Gt,n,i,s,c,o,u),(d=S.ref)&&m.ref!=d&&(T||(T=[]),m.ref&&T.push(m.ref,null,S),T.push(d,S.__c||b,S)),b!=null){var C;if(E==null&&(E=b),S.__d!==void 0)C=S.__d,S.__d=void 0;else if(s==m||b!=o||b.parentNode==null){e:if(o==null||o.parentNode!==t)t.appendChild(b),C=null;else{for(x=o,d=0;(x=x.nextSibling)&&d<M;d+=2)if(x==b)break e;t.insertBefore(b,o),C=o}e.type=="option"&&(t.value="")}o=C!==void 0?C:b.nextSibling,typeof e.type=="function"&&(e.__d=o)}else o&&m.__e==o&&o.parentNode!=t&&(o=un(m))}return l++,S}),e.__e=E,s!=null&&typeof e.type!="function")for(l=s.length;l--;)s[l]!=null&&_u(s[l]);for(l=M;l--;)N[l]!=null&&sn(N[l],N[l]);if(T)for(l=0;l<T.length;l++)bu(T[l],T[++l],T[++l])}function rr(t,e,r){if(r==null&&(r=[]),t==null||typeof t=="boolean")e&&r.push(e(null));else if(Array.isArray(t))for(var n=0;n<t.length;n++)rr(t[n],e,r);else r.push(e?e(typeof t=="string"||typeof t=="number"?Hn(null,t,null,null,t):t.__e!=null||t.__c!=null?Hn(t.type,t.props,t.key,null,t.__v):t):t);return r}function xp(t,e,r,n,i){var s;for(s in r)s==="children"||s==="key"||s in e||Wn(t,s,null,r[s],n);for(s in e)i&&typeof e[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||r[s]===e[s]||Wn(t,s,e[s],r[s],n)}function Ro(t,e,r){e[0]==="-"?t.setProperty(e,r):t[e]=typeof r=="number"&&bp.test(e)===!1?r+"px":r??""}function Wn(t,e,r,n,i){var s,c,o,u,l;if(i?e==="className"&&(e="class"):e==="class"&&(e="className"),e==="style")if(s=t.style,typeof r=="string")s.cssText=r;else{if(typeof n=="string"&&(s.cssText="",n=null),n)for(u in n)r&&u in r||Ro(s,u,"");if(r)for(l in r)n&&r[l]===n[l]||Ro(s,l,r[l])}else e[0]==="o"&&e[1]==="n"?(c=e!==(e=e.replace(/Capture$/,"")),o=e.toLowerCase(),e=(o in t?o:e).slice(2),r?(n||t.addEventListener(e,Po,c),(t.l||(t.l={}))[e]=r):t.removeEventListener(e,Po,c)):e!=="list"&&e!=="tagName"&&e!=="form"&&e!=="type"&&e!=="size"&&!i&&e in t?t[e]=r??"":typeof r!="function"&&e!=="dangerouslySetInnerHTML"&&(e!==(e=e.replace(/^xlink:?/,""))?r==null||r===!1?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),r):r==null||r===!1&&!/^ar/.test(e)?t.removeAttribute(e):t.setAttribute(e,r))}function Po(t){this.l[t.type](ge.event?ge.event(t):t)}function Rs(t,e,r,n,i,s,c,o,u){var l,d,m,b,x,E,T,N,M,S,C=e.type;if(e.constructor!==void 0)return null;(l=ge.__b)&&l(e);try{e:if(typeof C=="function"){if(N=e.props,M=(l=C.contextType)&&n[l.__c],S=l?M?M.props.value:l.__:n,r.__c?T=(d=e.__c=r.__c).__=d.__E:("prototype"in C&&C.prototype.render?e.__c=d=new C(N,S):(e.__c=d=new At(N,S),d.constructor=C,d.render=Dp),M&&M.sub(d),d.props=N,d.state||(d.state={}),d.context=S,d.__n=n,m=d.__d=!0,d.__h=[]),d.__s==null&&(d.__s=d.state),C.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Vt({},d.__s)),Vt(d.__s,C.getDerivedStateFromProps(N,d.__s))),b=d.props,x=d.state,m)C.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(C.getDerivedStateFromProps==null&&N!==b&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(N,S),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(N,d.__s,S)===!1||e.__v===r.__v&&!d.__){for(d.props=N,d.state=d.__s,e.__v!==r.__v&&(d.__d=!1),d.__v=e,e.__e=r.__e,e.__k=r.__k,d.__h.length&&c.push(d),l=0;l<e.__k.length;l++)e.__k[l]&&(e.__k[l].__=e);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(N,d.__s,S),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(b,x,E)})}d.context=S,d.props=N,d.state=d.__s,(l=ge.__r)&&l(e),d.__d=!1,d.__v=e,d.__P=t,l=d.render(d.props,d.state,d.context),e.__k=l!=null&&l.type==_n&&l.key==null?l.props.children:Array.isArray(l)?l:[l],d.getChildContext!=null&&(n=Vt(Vt({},n),d.getChildContext())),m||d.getSnapshotBeforeUpdate==null||(E=d.getSnapshotBeforeUpdate(b,x)),wu(t,e,r,n,i,s,c,o,u),d.base=e.__e,d.__h.length&&c.push(d),T&&(d.__E=d.__=null),d.__e=!1}else s==null&&e.__v===r.__v?(e.__k=r.__k,e.__e=r.__e):e.__e=Sp(r.__e,e,r,n,i,s,c,u);(l=ge.diffed)&&l(e)}catch(_){e.__v=null,ge.__e(_,e,r)}return e.__e}function vu(t,e){ge.__c&&ge.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(n){n.call(r)})}catch(n){ge.__e(n,r.__v)}})}function Sp(t,e,r,n,i,s,c,o){var u,l,d,m,b,x=r.props,E=e.props;if(i=e.type==="svg"||i,s!=null){for(u=0;u<s.length;u++)if((l=s[u])!=null&&((e.type===null?l.nodeType===3:l.localName===e.type)||t==l)){t=l,s[u]=null;break}}if(t==null){if(e.type===null)return document.createTextNode(E);t=i?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,E.is&&{is:E.is}),s=null,o=!1}if(e.type===null)x!==E&&t.data!=E&&(t.data=E);else{if(s!=null&&(s=ci.slice.call(t.childNodes)),d=(x=r.props||Gt).dangerouslySetInnerHTML,m=E.dangerouslySetInnerHTML,!o){if(x===Gt)for(x={},b=0;b<t.attributes.length;b++)x[t.attributes[b].name]=t.attributes[b].value;(m||d)&&(m&&d&&m.__html==d.__html||(t.innerHTML=m&&m.__html||""))}xp(t,E,x,i,o),m?e.__k=[]:(e.__k=e.props.children,wu(t,e,r,n,e.type!=="foreignObject"&&i,s,c,Gt,o)),o||("value"in E&&(u=E.value)!==void 0&&u!==t.value&&Wn(t,"value",u,x.value,!1),"checked"in E&&(u=E.checked)!==void 0&&u!==t.checked&&Wn(t,"checked",u,x.checked,!1))}return t}function bu(t,e,r){try{typeof t=="function"?t(e):t.current=e}catch(n){ge.__e(n,r)}}function sn(t,e,r){var n,i,s;if(ge.unmount&&ge.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||bu(n,null,e)),r||typeof t.type=="function"||(r=(i=t.__e)!=null),t.__e=t.__d=void 0,(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(c){ge.__e(c,e)}n.base=n.__P=null}if(n=t.__k)for(s=0;s<n.length;s++)n[s]&&sn(n[s],e,r);i!=null&&_u(i)}function Dp(t,e,r){return this.constructor(t,r)}function ln(t,e,r){var n,i,s;ge.__&&ge.__(t,e),i=(n=r===As)?null:r&&r.__k||e.__k,t=Yt(_n,null,[t]),s=[],Rs(e,(n?e:r||e).__k=t,i||Gt,Gt,e.ownerSVGElement!==void 0,r&&!n?[r]:i?null:ci.slice.call(e.childNodes),s,r||Gt,n),vu(s,t)}function Eu(t,e){ln(t,e,As)}function Ip(t,e){var r,n;for(n in e=Vt(Vt({},t.props),e),arguments.length>2&&(e.children=ci.slice.call(arguments,2)),r={},e)n!=="key"&&n!=="ref"&&(r[n]=e[n]);return Hn(t.type,r,e.key||t.key,e.ref||t.ref,null)}function xu(t){var e={},r={__c:"__cC"+gu++,__:t,Consumer:function(n,i){return n.children(i)},Provider:function(n){var i,s=this;return this.getChildContext||(i=[],this.getChildContext=function(){return e[r.__c]=s,e},this.shouldComponentUpdate=function(c){s.props.value!==c.value&&i.some(function(o){o.context=c.value,Fn(o)})},this.sub=function(c){i.push(c);var o=c.componentWillUnmount;c.componentWillUnmount=function(){i.splice(i.indexOf(c),1),o&&o.call(c)}}),n.children}};return r.Consumer.contextType=r,r.Provider.__=r,r}ge={__e:function(t,e){for(var r,n;e=e.__;)if((r=e.__c)&&!r.__)try{if(r.constructor&&r.constructor.getDerivedStateFromError!=null&&(n=!0,r.setState(r.constructor.getDerivedStateFromError(t))),r.componentDidCatch!=null&&(n=!0,r.componentDidCatch(t)),n)return Fn(r.__E=r)}catch(i){t=i}throw t}},At.prototype.setState=function(t,e){var r;r=this.__s!==this.state?this.__s:this.__s=Vt({},this.state),typeof t=="function"&&(t=t(r,this.props)),t&&Vt(r,t),t!=null&&this.__v&&(e&&this.__h.push(e),Fn(this))},At.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Fn(this))},At.prototype.render=_n,nn=[],Ns=0,pu=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,As=Gt,gu=0;var mr,_t,Lo,Mr=0,ts=[],Uo=ge.__r,Mo=ge.diffed,$o=ge.__c,Bo=ge.unmount;function Fr(t,e){ge.__h&&ge.__h(_t,t,Mr||e),Mr=0;var r=_t.__H||(_t.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function Ps(t){return Mr=1,Ls(Nu,t)}function Ls(t,e,r){var n=Fr(mr++,2);return n.__c||(n.__c=_t,n.__=[r?r(e):Nu(void 0,e),function(i){var s=t(n.__[0],i);n.__[0]!==s&&(n.__[0]=s,n.__c.setState({}))}]),n.__}function Su(t,e){var r=Fr(mr++,3);!ge.__s&&Ms(r.__H,e)&&(r.__=t,r.__H=e,_t.__H.__h.push(r))}function Us(t,e){var r=Fr(mr++,4);!ge.__s&&Ms(r.__H,e)&&(r.__=t,r.__H=e,_t.__h.push(r))}function Du(t){return Mr=5,ui(function(){return{current:t}},[])}function Iu(t,e,r){Mr=6,Us(function(){typeof t=="function"?t(e()):t&&(t.current=e())},r==null?r:r.concat(t))}function ui(t,e){var r=Fr(mr++,7);return Ms(r.__H,e)?(r.__H=e,r.__h=t,r.__=t()):r.__}function Cu(t,e){return Mr=8,ui(function(){return t},e)}function Tu(t){var e=_t.context[t.__c],r=Fr(mr++,9);return r.__c=t,e?(r.__==null&&(r.__=!0,e.sub(_t)),e.props.value):t.__}function Ou(t,e){ge.useDebugValue&&ge.useDebugValue(e?e(t):t)}function Cp(t){var e=Fr(mr++,10),r=Ps();return e.__=t,_t.componentDidCatch||(_t.componentDidCatch=function(n){e.__&&e.__(n),r[1](n)}),[r[0],function(){r[1](void 0)}]}function Tp(){ts.some(function(t){if(t.__P)try{t.__H.__h.forEach(rs),t.__H.__h.forEach(ns),t.__H.__h=[]}catch(e){return t.__H.__h=[],ge.__e(e,t.__v),!0}}),ts=[]}function rs(t){t.t&&t.t()}function ns(t){var e=t.__();typeof e=="function"&&(t.t=e)}function Ms(t,e){return!t||e.some(function(r,n){return r!==t[n]})}function Nu(t,e){return typeof e=="function"?e(t):e}ge.__r=function(t){Uo&&Uo(t),mr=0,(_t=t.__c).__H&&(_t.__H.__h.forEach(rs),_t.__H.__h.forEach(ns),_t.__H.__h=[])},ge.diffed=function(t){Mo&&Mo(t);var e=t.__c;if(e){var r=e.__H;r&&r.__h.length&&(ts.push(e)!==1&&Lo===ge.requestAnimationFrame||((Lo=ge.requestAnimationFrame)||function(n){var i,s=function(){clearTimeout(c),cancelAnimationFrame(i),setTimeout(n)},c=setTimeout(s,100);typeof window<"u"&&(i=requestAnimationFrame(s))})(Tp))}},ge.__c=function(t,e){e.some(function(r){try{r.__h.forEach(rs),r.__h=r.__h.filter(function(n){return!n.__||ns(n)})}catch(n){e.some(function(i){i.__h&&(i.__h=[])}),e=[],ge.__e(n,r.__v)}}),$o&&$o(t,e)},ge.unmount=function(t){Bo&&Bo(t);var e=t.__c;if(e){var r=e.__H;if(r)try{r.__.forEach(function(n){return n.t&&n.t()})}catch(n){ge.__e(n,e.__v)}}};function $s(t,e){for(var r in e)t[r]=e[r];return t}function is(t,e){for(var r in t)if(r!=="__source"&&!(r in e))return!0;for(var n in e)if(n!=="__source"&&t[n]!==e[n])return!0;return!1}var Au=function(t){var e,r;function n(i){var s;return(s=t.call(this,i)||this).isPureReactComponent=!0,s}return r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,n.prototype.shouldComponentUpdate=function(i,s){return is(this.props,i)||is(this.state,s)},n}(At);function Ru(t,e){function r(i){var s=this.props.ref,c=s==i.ref;return!c&&s&&(s.call?s(null):s.current=null),e?!e(this.props,i)||!c:is(this.props,i)}function n(i){return this.shouldComponentUpdate=r,Yt(t,$s({},i))}return n.prototype.isReactComponent=!0,n.displayName="Memo("+(t.displayName||t.name)+")",n.t=!0,n}var Fo=ge.__b;function Pu(t){function e(r){var n=$s({},r);return delete n.ref,t(n,r.ref)}return e.prototype.isReactComponent=e.t=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}ge.__b=function(t){t.type&&t.type.t&&t.ref&&(t.props.ref=t.ref,t.ref=null),Fo&&Fo(t)};var ko=function(t,e){return t?rr(t).reduce(function(r,n,i){return r.concat(e(n,i))},[]):null},Lu={map:ko,forEach:ko,count:function(t){return t?rr(t).length:0},only:function(t){if((t=rr(t)).length!==1)throw new Error("Children.only() expects only one child.");return t[0]},toArray:rr},Op=ge.__e;function Uu(t){return t&&((t=$s({},t)).__c=null,t.__k=t.__k&&t.__k.map(Uu)),t}function Vn(){this.__u=0,this.o=null,this.__b=null}function Mu(t){var e=t.__.__c;return e&&e.u&&e.u(t)}function $u(t){var e,r,n;function i(s){if(e||(e=t()).then(function(c){r=c.default||c},function(c){n=c}),n)throw n;if(!r)throw e;return Yt(r,s)}return i.displayName="Lazy",i.t=!0,i}function Cr(){this.i=null,this.l=null}ge.__e=function(t,e,r){if(t.then){for(var n,i=e;i=i.__;)if((n=i.__c)&&n.__c)return n.__c(t,e.__c)}Op(t,e,r)},(Vn.prototype=new At).__c=function(t,e){var r=this;r.o==null&&(r.o=[]),r.o.push(e);var n=Mu(r.__v),i=!1,s=function(){i||(i=!0,n?n(c):c())};e.__c=e.componentWillUnmount,e.componentWillUnmount=function(){s(),e.__c&&e.__c()};var c=function(){var o;if(!--r.__u)for(r.__v.__k[0]=r.state.u,r.setState({u:r.__b=null});o=r.o.pop();)o.forceUpdate()};r.__u++||r.setState({u:r.__b=r.__v.__k[0]}),t.then(s,s)},Vn.prototype.render=function(t,e){return this.__b&&(this.__v.__k[0]=Uu(this.__b),this.__b=null),[Yt(At,null,e.u?null:t.children),e.u&&t.fallback]};var qo=function(t,e,r){if(++r[1]===r[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(r=t.i;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;t.i=r=r[2]}};(Cr.prototype=new At).u=function(t){var e=this,r=Mu(e.__v),n=e.l.get(t);return n[0]++,function(i){var s=function(){e.props.revealOrder?(n.push(i),qo(e,t,n)):i()};r?r(s):s()}},Cr.prototype.render=function(t){this.i=null,this.l=new Map;var e=rr(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var r=e.length;r--;)this.l.set(e[r],this.i=[1,0,this.i]);return t.children},Cr.prototype.componentDidUpdate=Cr.prototype.componentDidMount=function(){var t=this;t.l.forEach(function(e,r){qo(t,r,e)})};var Np=function(){function t(){}var e=t.prototype;return e.getChildContext=function(){return this.props.context},e.render=function(r){return r.children},t}();function Ap(t){var e=this,r=t.container,n=Yt(Np,{context:e.context},t.vnode);return e.s&&e.s!==r&&(e.v.parentNode&&e.s.removeChild(e.v),sn(e.h),e.p=!1),t.vnode?e.p?(r.__k=e.__k,ln(n,r),e.__k=r.__k):(e.v=document.createTextNode(""),Eu("",r),r.appendChild(e.v),e.p=!0,e.s=r,ln(n,r,e.v),e.__k=e.v.__k):e.p&&(e.v.parentNode&&e.s.removeChild(e.v),sn(e.h)),e.h=n,e.componentWillUnmount=function(){e.v.parentNode&&e.s.removeChild(e.v),sn(e.h)},null}function Bu(t,e){return Yt(Ap,{vnode:t,container:e})}var zo=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;At.prototype.isReactComponent={};var Fu=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103;function ss(t,e,r){if(e.__k==null)for(;e.firstChild;)e.removeChild(e.firstChild);return ln(t,e),typeof r=="function"&&r(),t?t.__c:null}function Rp(t,e,r){return Eu(t,e),typeof r=="function"&&r(),t?t.__c:null}var jo=ge.event;function Ci(t,e){t["UNSAFE_"+e]&&!t[e]&&Object.defineProperty(t,e,{configurable:!1,get:function(){return this["UNSAFE_"+e]},set:function(r){this["UNSAFE_"+e]=r}})}ge.event=function(t){jo&&(t=jo(t)),t.persist=function(){};var e=!1,r=!1,n=t.stopPropagation;t.stopPropagation=function(){n.call(t),e=!0};var i=t.preventDefault;return t.preventDefault=function(){i.call(t),r=!0},t.isPropagationStopped=function(){return e},t.isDefaultPrevented=function(){return r},t.nativeEvent=t};var Ko={configurable:!0,get:function(){return this.class}},Ho=ge.vnode;ge.vnode=function(t){t.$$typeof=Fu;var e=t.type,r=t.props;if(e){if(r.class!=r.className&&(Ko.enumerable="className"in r,r.className!=null&&(r.class=r.className),Object.defineProperty(r,"className",Ko)),typeof e!="function"){var n,i,s;for(s in r.defaultValue&&r.value!==void 0&&(r.value||r.value===0||(r.value=r.defaultValue),delete r.defaultValue),Array.isArray(r.value)&&r.multiple&&e==="select"&&(rr(r.children).forEach(function(c){r.value.indexOf(c.props.value)!=-1&&(c.props.selected=!0)}),delete r.value),r)if(n=zo.test(s))break;if(n)for(s in i=t.props={},r)i[zo.test(s)?s.replace(/[A-Z0-9]/,"-$&").toLowerCase():s]=r[s]}(function(c){var o=t.type,u=t.props;if(u&&typeof o=="string"){var l={};for(var d in u)/^on(Ani|Tra|Tou)/.test(d)&&(u[d.toLowerCase()]=u[d],delete u[d]),l[d.toLowerCase()]=d;if(l.ondoubleclick&&(u.ondblclick=u[l.ondoubleclick],delete u[l.ondoubleclick]),l.onbeforeinput&&(u.onbeforeinput=u[l.onbeforeinput],delete u[l.onbeforeinput]),l.onchange&&(o==="textarea"||o.toLowerCase()==="input"&&!/^fil|che|ra/i.test(u.type))){var m=l.oninput||"oninput";u[m]||(u[m]=u[l.onchange],delete u[l.onchange])}}})(),typeof e=="function"&&!e.m&&e.prototype&&(Ci(e.prototype,"componentWillMount"),Ci(e.prototype,"componentWillReceiveProps"),Ci(e.prototype,"componentWillUpdate"),e.m=!0)}Ho&&Ho(t)};var Pp="16.8.0";function ku(t){return Yt.bind(null,t)}function Bs(t){return!!t&&t.$$typeof===Fu}function qu(t){return Bs(t)?Ip.apply(null,arguments):t}function zu(t){return!!t.__k&&(ln(null,t),!0)}function ju(t){return t&&(t.base||t.nodeType===1&&t)||null}var Ku=function(t,e){return t(e)};const Lp={useState:Ps,useReducer:Ls,useEffect:Su,useLayoutEffect:Us,useRef:Du,useImperativeHandle:Iu,useMemo:ui,useCallback:Cu,useContext:Tu,useDebugValue:Ou,version:"16.8.0",Children:Lu,render:ss,hydrate:ss,unmountComponentAtNode:zu,createPortal:Bu,createElement:Yt,createContext:xu,createFactory:ku,cloneElement:qu,createRef:yu,Fragment:_n,isValidElement:Bs,findDOMNode:ju,Component:At,PureComponent:Au,memo:Ru,forwardRef:Pu,unstable_batchedUpdates:Ku,Suspense:Vn,SuspenseList:Cr,lazy:$u},Up=Object.freeze(Object.defineProperty({__proto__:null,Children:Lu,Component:At,Fragment:_n,PureComponent:Au,Suspense:Vn,SuspenseList:Cr,cloneElement:qu,createContext:xu,createElement:Yt,createFactory:ku,createPortal:Bu,createRef:yu,default:Lp,findDOMNode:ju,forwardRef:Pu,hydrate:Rp,isValidElement:Bs,lazy:$u,memo:Ru,render:ss,unmountComponentAtNode:zu,unstable_batchedUpdates:Ku,useCallback:Cu,useContext:Tu,useDebugValue:Ou,useEffect:Su,useErrorBoundary:Cp,useImperativeHandle:Iu,useLayoutEffect:Us,useMemo:ui,useReducer:Ls,useRef:Du,useState:Ps,version:Pp},Symbol.toStringTag,{value:"Module"})),Mp=dn(Up);function Hu(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var lt=pd,Wu=Hu(pn),$p=Hu(vp),ie=Mp;function Bp(t){Wu.toString(t,{type:"terminal"}).then(console.log)}var Fp=`:root {
  --animation-duration: 300ms;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

#walletconnect-wrapper {
  -webkit-user-select: none;
  align-items: center;
  display: flex;
  height: 100%;
  justify-content: center;
  left: 0;
  pointer-events: none;
  position: fixed;
  top: 0;
  user-select: none;
  width: 100%;
  z-index: 99999999999999;
}

.walletconnect-modal__headerLogo {
  height: 21px;
}

.walletconnect-modal__header p {
  color: #ffffff;
  font-size: 20px;
  font-weight: 600;
  margin: 0;
  align-items: flex-start;
  display: flex;
  flex: 1;
  margin-left: 5px;
}

.walletconnect-modal__close__wrapper {
  position: absolute;
  top: 0px;
  right: 0px;
  z-index: 10000;
  background: white;
  border-radius: 26px;
  padding: 6px;
  box-sizing: border-box;
  width: 26px;
  height: 26px;
  cursor: pointer;
}

.walletconnect-modal__close__icon {
  position: relative;
  top: 7px;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: rotate(45deg);
}

.walletconnect-modal__close__line1 {
  position: absolute;
  width: 100%;
  border: 1px solid rgb(48, 52, 59);
}

.walletconnect-modal__close__line2 {
  position: absolute;
  width: 100%;
  border: 1px solid rgb(48, 52, 59);
  transform: rotate(90deg);
}

.walletconnect-qrcode__base {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  background: rgba(37, 41, 46, 0.95);
  height: 100%;
  left: 0;
  pointer-events: auto;
  position: fixed;
  top: 0;
  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  width: 100%;
  will-change: opacity;
  padding: 40px;
  box-sizing: border-box;
}

.walletconnect-qrcode__text {
  color: rgba(60, 66, 82, 0.6);
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0;
  line-height: 1.1875em;
  margin: 10px 0 20px 0;
  text-align: center;
  width: 100%;
}

@media only screen and (max-width: 768px) {
  .walletconnect-qrcode__text {
    font-size: 4vw;
  }
}

@media only screen and (max-width: 320px) {
  .walletconnect-qrcode__text {
    font-size: 14px;
  }
}

.walletconnect-qrcode__image {
  width: calc(100% - 30px);
  box-sizing: border-box;
  cursor: none;
  margin: 0 auto;
}

.walletconnect-qrcode__notification {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  font-size: 16px;
  padding: 16px 20px;
  border-radius: 16px;
  text-align: center;
  transition: all 0.1s ease-in-out;
  background: white;
  color: black;
  margin-bottom: -60px;
  opacity: 0;
}

.walletconnect-qrcode__notification.notification__show {
  opacity: 1;
}

@media only screen and (max-width: 768px) {
  .walletconnect-modal__header {
    height: 130px;
  }
  .walletconnect-modal__base {
    overflow: auto;
  }
}

@media only screen and (min-device-width: 415px) and (max-width: 768px) {
  #content {
    max-width: 768px;
    box-sizing: border-box;
  }
}

@media only screen and (min-width: 375px) and (max-width: 415px) {
  #content {
    max-width: 414px;
    box-sizing: border-box;
  }
}

@media only screen and (min-width: 320px) and (max-width: 375px) {
  #content {
    max-width: 375px;
    box-sizing: border-box;
  }
}

@media only screen and (max-width: 320px) {
  #content {
    max-width: 320px;
    box-sizing: border-box;
  }
}

.walletconnect-modal__base {
  -webkit-font-smoothing: antialiased;
  background: #ffffff;
  border-radius: 24px;
  box-shadow: 0 10px 50px 5px rgba(0, 0, 0, 0.4);
  font-family: ui-rounded, "SF Pro Rounded", "SF Pro Text", medium-content-sans-serif-font,
    -apple-system, BlinkMacSystemFont, ui-sans-serif, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell,
    "Open Sans", "Helvetica Neue", sans-serif;
  margin-top: 41px;
  padding: 24px 24px 22px;
  pointer-events: auto;
  position: relative;
  text-align: center;
  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  will-change: transform;
  overflow: visible;
  transform: translateY(-50%);
  top: 50%;
  max-width: 500px;
  margin: auto;
}

@media only screen and (max-width: 320px) {
  .walletconnect-modal__base {
    padding: 24px 12px;
  }
}

.walletconnect-modal__base .hidden {
  transform: translateY(150%);
  transition: 0.125s cubic-bezier(0.4, 0, 1, 1);
}

.walletconnect-modal__header {
  align-items: center;
  display: flex;
  height: 26px;
  left: 0;
  justify-content: space-between;
  position: absolute;
  top: -42px;
  width: 100%;
}

.walletconnect-modal__base .wc-logo {
  align-items: center;
  display: flex;
  height: 26px;
  margin-top: 15px;
  padding-bottom: 15px;
  pointer-events: auto;
}

.walletconnect-modal__base .wc-logo div {
  background-color: #3399ff;
  height: 21px;
  margin-right: 5px;
  mask-image: url("images/wc-logo.svg") center no-repeat;
  width: 32px;
}

.walletconnect-modal__base .wc-logo p {
  color: #ffffff;
  font-size: 20px;
  font-weight: 600;
  margin: 0;
}

.walletconnect-modal__base h2 {
  color: rgba(60, 66, 82, 0.6);
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0;
  line-height: 1.1875em;
  margin: 0 0 19px 0;
  text-align: center;
  width: 100%;
}

.walletconnect-modal__base__row {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  align-items: center;
  border-radius: 20px;
  cursor: pointer;
  display: flex;
  height: 56px;
  justify-content: space-between;
  padding: 0 15px;
  position: relative;
  margin: 0px 0px 8px;
  text-align: left;
  transition: 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  will-change: transform;
  text-decoration: none;
}

.walletconnect-modal__base__row:hover {
  background: rgba(60, 66, 82, 0.06);
}

.walletconnect-modal__base__row:active {
  background: rgba(60, 66, 82, 0.06);
  transform: scale(0.975);
  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.walletconnect-modal__base__row__h3 {
  color: #25292e;
  font-size: 20px;
  font-weight: 700;
  margin: 0;
  padding-bottom: 3px;
}

.walletconnect-modal__base__row__right {
  align-items: center;
  display: flex;
  justify-content: center;
}

.walletconnect-modal__base__row__right__app-icon {
  border-radius: 8px;
  height: 34px;
  margin: 0 11px 2px 0;
  width: 34px;
  background-size: 100%;
  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);
}

.walletconnect-modal__base__row__right__caret {
  height: 18px;
  opacity: 0.3;
  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  width: 8px;
  will-change: opacity;
}

.walletconnect-modal__base__row:hover .caret,
.walletconnect-modal__base__row:active .caret {
  opacity: 0.6;
}

.walletconnect-modal__mobile__toggle {
  width: 80%;
  display: flex;
  margin: 0 auto;
  position: relative;
  overflow: hidden;
  border-radius: 8px;
  margin-bottom: 18px;
  background: #d4d5d9;
}

.walletconnect-modal__single_wallet {
  display: flex;
  justify-content: center;
  margin-top: 7px;
  margin-bottom: 18px;
}

.walletconnect-modal__single_wallet a {
  cursor: pointer;
  color: rgb(64, 153, 255);
  font-size: 21px;
  font-weight: 800;
  text-decoration: none !important;
  margin: 0 auto;
}

.walletconnect-modal__mobile__toggle_selector {
  width: calc(50% - 8px);
  background: white;
  position: absolute;
  border-radius: 5px;
  height: calc(100% - 8px);
  top: 4px;
  transition: all 0.2s ease-in-out;
  transform: translate3d(4px, 0, 0);
}

.walletconnect-modal__mobile__toggle.right__selected .walletconnect-modal__mobile__toggle_selector {
  transform: translate3d(calc(100% + 12px), 0, 0);
}

.walletconnect-modal__mobile__toggle a {
  font-size: 12px;
  width: 50%;
  text-align: center;
  padding: 8px;
  margin: 0;
  font-weight: 600;
  z-index: 1;
}

.walletconnect-modal__footer {
  display: flex;
  justify-content: center;
  margin-top: 20px;
}

@media only screen and (max-width: 768px) {
  .walletconnect-modal__footer {
    margin-top: 5vw;
  }
}

.walletconnect-modal__footer a {
  cursor: pointer;
  color: #898d97;
  font-size: 15px;
  margin: 0 auto;
}

@media only screen and (max-width: 320px) {
  .walletconnect-modal__footer a {
    font-size: 14px;
  }
}

.walletconnect-connect__buttons__wrapper {
  max-height: 44vh;
}

.walletconnect-connect__buttons__wrapper__android {
  margin: 50% 0;
}

.walletconnect-connect__buttons__wrapper__wrap {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  margin: 10px 0;
}

@media only screen and (min-width: 768px) {
  .walletconnect-connect__buttons__wrapper__wrap {
    margin-top: 40px;
  }
}

.walletconnect-connect__button {
  background-color: rgb(64, 153, 255);
  padding: 12px;
  border-radius: 8px;
  text-decoration: none;
  color: rgb(255, 255, 255);
  font-weight: 500;
}

.walletconnect-connect__button__icon_anchor {
  cursor: pointer;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  margin: 8px;
  width: 42px;
  justify-self: center;
  flex-direction: column;
  text-decoration: none !important;
}

@media only screen and (max-width: 320px) {
  .walletconnect-connect__button__icon_anchor {
    margin: 4px;
  }
}

.walletconnect-connect__button__icon {
  border-radius: 10px;
  height: 42px;
  margin: 0;
  width: 42px;
  background-size: cover !important;
  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);
}

.walletconnect-connect__button__text {
  color: #424952;
  font-size: 2.7vw;
  text-decoration: none !important;
  padding: 0;
  margin-top: 1.8vw;
  font-weight: 600;
}

@media only screen and (min-width: 768px) {
  .walletconnect-connect__button__text {
    font-size: 16px;
    margin-top: 12px;
  }
}

.walletconnect-search__input {
  border: none;
  background: #d4d5d9;
  border-style: none;
  padding: 8px 16px;
  outline: none;
  font-style: normal;
  font-stretch: normal;
  font-size: 16px;
  font-style: normal;
  font-stretch: normal;
  line-height: normal;
  letter-spacing: normal;
  text-align: left;
  border-radius: 8px;
  width: calc(100% - 16px);
  margin: 0;
  margin-bottom: 8px;
}
`;typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function kp(t,e){try{var r=t()}catch(n){return e(n)}return r&&r.then?r.then(void 0,e):r}var qp="data:image/svg+xml,%3Csvg height='185' viewBox='0 0 300 185' width='300' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m61.4385429 36.2562612c48.9112241-47.8881663 128.2119871-47.8881663 177.1232091 0l5.886545 5.7634174c2.445561 2.3944081 2.445561 6.2765112 0 8.6709204l-20.136695 19.715503c-1.222781 1.1972051-3.2053 1.1972051-4.428081 0l-8.100584-7.9311479c-34.121692-33.4079817-89.443886-33.4079817-123.5655788 0l-8.6750562 8.4936051c-1.2227816 1.1972041-3.205301 1.1972041-4.4280806 0l-20.1366949-19.7155031c-2.4455612-2.3944092-2.4455612-6.2765122 0-8.6709204zm218.7677961 40.7737449 17.921697 17.546897c2.445549 2.3943969 2.445563 6.2764769.000031 8.6708899l-80.810171 79.121134c-2.445544 2.394426-6.410582 2.394453-8.85616.000062-.00001-.00001-.000022-.000022-.000032-.000032l-57.354143-56.154572c-.61139-.598602-1.60265-.598602-2.21404 0-.000004.000004-.000007.000008-.000011.000011l-57.3529212 56.154531c-2.4455368 2.394432-6.4105755 2.394472-8.8561612.000087-.0000143-.000014-.0000296-.000028-.0000449-.000044l-80.81241943-79.122185c-2.44556021-2.394408-2.44556021-6.2765115 0-8.6709197l17.92172963-17.5468673c2.4455602-2.3944082 6.4105989-2.3944082 8.8561602 0l57.3549775 56.155357c.6113908.598602 1.602649.598602 2.2140398 0 .0000092-.000009.0000174-.000017.0000265-.000024l57.3521031-56.155333c2.445505-2.3944633 6.410544-2.3945531 8.856161-.0002.000034.0000336.000068.0000673.000101.000101l57.354902 56.155432c.61139.598601 1.60265.598601 2.21404 0l57.353975-56.1543249c2.445561-2.3944092 6.410599-2.3944092 8.85616 0z' fill='%233b99fc'/%3E%3C/svg%3E",zp="WalletConnect",jp=300,Kp="rgb(64, 153, 255)",Vu="walletconnect-wrapper",Wo="walletconnect-style-sheet",Gu="walletconnect-qrcode-modal",Hp="walletconnect-qrcode-close",Yu="walletconnect-qrcode-text",Wp="walletconnect-connect-button";function Vp(t){return ie.createElement("div",{className:"walletconnect-modal__header"},ie.createElement("img",{src:qp,className:"walletconnect-modal__headerLogo"}),ie.createElement("p",null,zp),ie.createElement("div",{className:"walletconnect-modal__close__wrapper",onClick:t.onClose},ie.createElement("div",{id:Hp,className:"walletconnect-modal__close__icon"},ie.createElement("div",{className:"walletconnect-modal__close__line1"}),ie.createElement("div",{className:"walletconnect-modal__close__line2"}))))}function Gp(t){return ie.createElement("a",{className:"walletconnect-connect__button",href:t.href,id:Wp+"-"+t.name,onClick:t.onClick,rel:"noopener noreferrer",style:{backgroundColor:t.color},target:"_blank"},t.name)}var Yp="data:image/svg+xml,%3Csvg fill='none' height='18' viewBox='0 0 8 18' width='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath clip-rule='evenodd' d='m.586301.213898c-.435947.33907-.5144813.967342-.175411 1.403292l4.87831 6.27212c.28087.36111.28087.86677 0 1.22788l-4.878311 6.27211c-.33907.436-.260536 1.0642.175412 1.4033.435949.3391 1.064219.2605 1.403289-.1754l4.87832-6.2721c.84259-1.08336.84259-2.60034 0-3.68367l-4.87832-6.27212c-.33907-.4359474-.96734-.514482-1.403289-.175412z' fill='%233c4252' fill-rule='evenodd'/%3E%3C/svg%3E";function Jp(t){var e=t.color,r=t.href,n=t.name,i=t.logo,s=t.onClick;return ie.createElement("a",{className:"walletconnect-modal__base__row",href:r,onClick:s,rel:"noopener noreferrer",target:"_blank"},ie.createElement("h3",{className:"walletconnect-modal__base__row__h3"},n),ie.createElement("div",{className:"walletconnect-modal__base__row__right"},ie.createElement("div",{className:"walletconnect-modal__base__row__right__app-icon",style:{background:"url('"+i+"') "+e,backgroundSize:"100%"}}),ie.createElement("img",{src:Yp,className:"walletconnect-modal__base__row__right__caret"})))}function Qp(t){var e=t.color,r=t.href,n=t.name,i=t.logo,s=t.onClick,c=window.innerWidth<768?(n.length>8?2.5:2.7)+"vw":"inherit";return ie.createElement("a",{className:"walletconnect-connect__button__icon_anchor",href:r,onClick:s,rel:"noopener noreferrer",target:"_blank"},ie.createElement("div",{className:"walletconnect-connect__button__icon",style:{background:"url('"+i+"') "+e,backgroundSize:"100%"}}),ie.createElement("div",{style:{fontSize:c},className:"walletconnect-connect__button__text"},n))}var Xp=5,Ti=12;function Zp(t){var e=lt.isAndroid(),r=ie.useState(""),n=r[0],i=r[1],s=ie.useState(""),c=s[0],o=s[1],u=ie.useState(1),l=u[0],d=u[1],m=c?t.links.filter(function(_){return _.name.toLowerCase().includes(c.toLowerCase())}):t.links,b=t.errorMessage,x=c||m.length>Xp,E=Math.ceil(m.length/Ti),T=[(l-1)*Ti+1,l*Ti],N=m.length?m.filter(function(_,w){return w+1>=T[0]&&w+1<=T[1]}):[],M=!e&&E>1,S=void 0;function C(_){i(_.target.value),clearTimeout(S),_.target.value?S=setTimeout(function(){o(_.target.value),d(1)},1e3):(i(""),o(""),d(1))}return ie.createElement("div",null,ie.createElement("p",{id:Yu,className:"walletconnect-qrcode__text"},e?t.text.connect_mobile_wallet:t.text.choose_preferred_wallet),!e&&ie.createElement("input",{className:"walletconnect-search__input",placeholder:"Search",value:n,onChange:C}),ie.createElement("div",{className:"walletconnect-connect__buttons__wrapper"+(e?"__android":x&&m.length?"__wrap":"")},e?ie.createElement(Gp,{name:t.text.connect,color:Kp,href:t.uri,onClick:ie.useCallback(function(){lt.saveMobileLinkInfo({name:"Unknown",href:t.uri})},[])}):N.length?N.map(function(_){var w=_.color,g=_.name,a=_.shortName,y=_.logo,$=lt.formatIOSMobile(t.uri,_),U=ie.useCallback(function(){lt.saveMobileLinkInfo({name:g,href:$})},[N]);return x?ie.createElement(Qp,{color:w,href:$,name:a||g,logo:y,onClick:U}):ie.createElement(Jp,{color:w,href:$,name:g,logo:y,onClick:U})}):ie.createElement(ie.Fragment,null,ie.createElement("p",null,b.length?t.errorMessage:t.links.length&&!m.length?t.text.no_wallets_found:t.text.loading))),M&&ie.createElement("div",{className:"walletconnect-modal__footer"},Array(E).fill(0).map(function(_,w){var g=w+1,a=l===g;return ie.createElement("a",{style:{margin:"auto 10px",fontWeight:a?"bold":"normal"},onClick:function(){return d(g)}},g)})))}function eg(t){var e=!!t.message.trim();return ie.createElement("div",{className:"walletconnect-qrcode__notification"+(e?" notification__show":"")},t.message)}var tg=function(t){try{var e="";return Promise.resolve(Wu.toString(t,{margin:0,type:"svg"})).then(function(r){return typeof r=="string"&&(e=r.replace("<svg",'<svg class="walletconnect-qrcode__image"')),e})}catch(r){return Promise.reject(r)}};function rg(t){var e=ie.useState(""),r=e[0],n=e[1],i=ie.useState(""),s=i[0],c=i[1];ie.useEffect(function(){try{return Promise.resolve(tg(t.uri)).then(function(u){c(u)})}catch(u){Promise.reject(u)}},[]);var o=function(){var u=$p(t.uri);u?(n(t.text.copied_to_clipboard),setInterval(function(){return n("")},1200)):(n("Error"),setInterval(function(){return n("")},1200))};return ie.createElement("div",null,ie.createElement("p",{id:Yu,className:"walletconnect-qrcode__text"},t.text.scan_qrcode_with_wallet),ie.createElement("div",{dangerouslySetInnerHTML:{__html:s}}),ie.createElement("div",{className:"walletconnect-modal__footer"},ie.createElement("a",{onClick:o},t.text.copy_to_clipboard)),ie.createElement(eg,{message:r}))}function ng(t){var e=lt.isAndroid(),r=lt.isMobile(),n=r?t.qrcodeModalOptions&&t.qrcodeModalOptions.mobileLinks?t.qrcodeModalOptions.mobileLinks:void 0:t.qrcodeModalOptions&&t.qrcodeModalOptions.desktopLinks?t.qrcodeModalOptions.desktopLinks:void 0,i=ie.useState(!1),s=i[0],c=i[1],o=ie.useState(!1),u=o[0],l=o[1],d=ie.useState(!r),m=d[0],b=d[1],x={mobile:r,text:t.text,uri:t.uri,qrcodeModalOptions:t.qrcodeModalOptions},E=ie.useState(""),T=E[0],N=E[1],M=ie.useState(!1),S=M[0],C=M[1],_=ie.useState([]),w=_[0],g=_[1],a=ie.useState(""),y=a[0],$=a[1],U=function(){u||s||n&&!n.length||w.length>0||ie.useEffect(function(){var J=function(){try{if(e)return Promise.resolve();c(!0);var Z=kp(function(){var R=t.qrcodeModalOptions&&t.qrcodeModalOptions.registryUrl?t.qrcodeModalOptions.registryUrl:lt.getWalletRegistryUrl();return Promise.resolve(fetch(R)).then(function(k){return Promise.resolve(k.json()).then(function(re){var Y=re.listings,K=r?"mobile":"desktop",W=lt.getMobileLinkRegistry(lt.formatMobileRegistry(Y,K),n);c(!1),l(!0),$(W.length?"":t.text.no_supported_wallets),g(W);var j=W.length===1;j&&(N(lt.formatIOSMobile(t.uri,W[0])),b(!0)),C(j)})})},function(R){c(!1),l(!0),$(t.text.something_went_wrong),console.error(R)});return Promise.resolve(Z&&Z.then?Z.then(function(){}):void 0)}catch(R){return Promise.reject(R)}};J()})};U();var G=r?m:!m;return ie.createElement("div",{id:Gu,className:"walletconnect-qrcode__base animated fadeIn"},ie.createElement("div",{className:"walletconnect-modal__base"},ie.createElement(Vp,{onClose:t.onClose}),S&&m?ie.createElement("div",{className:"walletconnect-modal__single_wallet"},ie.createElement("a",{onClick:function(){return lt.saveMobileLinkInfo({name:w[0].name,href:T})},href:T,rel:"noopener noreferrer",target:"_blank"},t.text.connect_with+" "+(S?w[0].name:"")+" ›")):e||s||!s&&w.length?ie.createElement("div",{className:"walletconnect-modal__mobile__toggle"+(G?" right__selected":"")},ie.createElement("div",{className:"walletconnect-modal__mobile__toggle_selector"}),r?ie.createElement(ie.Fragment,null,ie.createElement("a",{onClick:function(){return b(!1),U()}},t.text.mobile),ie.createElement("a",{onClick:function(){return b(!0)}},t.text.qrcode)):ie.createElement(ie.Fragment,null,ie.createElement("a",{onClick:function(){return b(!0)}},t.text.qrcode),ie.createElement("a",{onClick:function(){return b(!1),U()}},t.text.desktop))):null,ie.createElement("div",null,m||!e&&!s&&!w.length?ie.createElement(rg,Object.assign({},x)):ie.createElement(Zp,Object.assign({},x,{links:w,errorMessage:y})))))}var ig={choose_preferred_wallet:"Wähle bevorzugte Wallet",connect_mobile_wallet:"Verbinde mit Mobile Wallet",scan_qrcode_with_wallet:"Scanne den QR-code mit einer WalletConnect kompatiblen Wallet",connect:"Verbinden",qrcode:"QR-Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"In die Zwischenablage kopieren",copied_to_clipboard:"In die Zwischenablage kopiert!",connect_with:"Verbinden mit Hilfe von",loading:"Laden...",something_went_wrong:"Etwas ist schief gelaufen",no_supported_wallets:"Es gibt noch keine unterstützten Wallet",no_wallets_found:"keine Wallet gefunden"},sg={choose_preferred_wallet:"Choose your preferred wallet",connect_mobile_wallet:"Connect to Mobile Wallet",scan_qrcode_with_wallet:"Scan QR code with a WalletConnect-compatible wallet",connect:"Connect",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copy to clipboard",copied_to_clipboard:"Copied to clipboard!",connect_with:"Connect with",loading:"Loading...",something_went_wrong:"Something went wrong",no_supported_wallets:"There are no supported wallets yet",no_wallets_found:"No wallets found"},og={choose_preferred_wallet:"Elige tu billetera preferida",connect_mobile_wallet:"Conectar a billetera móvil",scan_qrcode_with_wallet:"Escanea el código QR con una billetera compatible con WalletConnect",connect:"Conectar",qrcode:"Código QR",mobile:"Móvil",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Conectar mediante",loading:"Cargando...",something_went_wrong:"Algo salió mal",no_supported_wallets:"Todavía no hay billeteras compatibles",no_wallets_found:"No se encontraron billeteras"},ag={choose_preferred_wallet:"Choisissez votre portefeuille préféré",connect_mobile_wallet:"Se connecter au portefeuille mobile",scan_qrcode_with_wallet:"Scannez le QR code avec un portefeuille compatible WalletConnect",connect:"Se connecter",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copier",copied_to_clipboard:"Copié!",connect_with:"Connectez-vous à l'aide de",loading:"Chargement...",something_went_wrong:"Quelque chose a mal tourné",no_supported_wallets:"Il n'y a pas encore de portefeuilles pris en charge",no_wallets_found:"Aucun portefeuille trouvé"},cg={choose_preferred_wallet:"원하는 지갑을 선택하세요",connect_mobile_wallet:"모바일 지갑과 연결",scan_qrcode_with_wallet:"WalletConnect 지원 지갑에서 QR코드를 스캔하세요",connect:"연결",qrcode:"QR 코드",mobile:"모바일",desktop:"데스크탑",copy_to_clipboard:"클립보드에 복사",copied_to_clipboard:"클립보드에 복사되었습니다!",connect_with:"와 연결하다",loading:"로드 중...",something_went_wrong:"문제가 발생했습니다.",no_supported_wallets:"아직 지원되는 지갑이 없습니다",no_wallets_found:"지갑을 찾을 수 없습니다"},ug={choose_preferred_wallet:"Escolha sua carteira preferida",connect_mobile_wallet:"Conectar-se à carteira móvel",scan_qrcode_with_wallet:"Ler o código QR com uma carteira compatível com WalletConnect",connect:"Conectar",qrcode:"Código QR",mobile:"Móvel",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Ligar por meio de",loading:"Carregamento...",something_went_wrong:"Algo correu mal",no_supported_wallets:"Ainda não há carteiras suportadas",no_wallets_found:"Nenhuma carteira encontrada"},lg={choose_preferred_wallet:"选择你的钱包",connect_mobile_wallet:"连接至移动端钱包",scan_qrcode_with_wallet:"使用兼容 WalletConnect 的钱包扫描二维码",connect:"连接",qrcode:"二维码",mobile:"移动",desktop:"桌面",copy_to_clipboard:"复制到剪贴板",copied_to_clipboard:"复制到剪贴板成功！",connect_with:"通过以下方式连接",loading:"正在加载...",something_went_wrong:"出了问题",no_supported_wallets:"目前还没有支持的钱包",no_wallets_found:"没有找到钱包"},hg={choose_preferred_wallet:"کیف پول مورد نظر خود را انتخاب کنید",connect_mobile_wallet:"به کیف پول موبایل وصل شوید",scan_qrcode_with_wallet:"کد QR را با یک کیف پول سازگار با WalletConnect اسکن کنید",connect:"اتصال",qrcode:"کد QR",mobile:"سیار",desktop:"دسکتاپ",copy_to_clipboard:"کپی به کلیپ بورد",copied_to_clipboard:"در کلیپ بورد کپی شد!",connect_with:"ارتباط با",loading:"...بارگذاری",something_went_wrong:"مشکلی پیش آمد",no_supported_wallets:"هنوز هیچ کیف پول پشتیبانی شده ای وجود ندارد",no_wallets_found:"هیچ کیف پولی پیدا نشد"},Vo={de:ig,en:sg,es:og,fr:ag,ko:cg,pt:ug,zh:lg,fa:hg};function fg(){var t=lt.getDocumentOrThrow(),e=t.getElementById(Wo);e&&t.head.removeChild(e);var r=t.createElement("style");r.setAttribute("id",Wo),r.innerText=Fp,t.head.appendChild(r)}function dg(){var t=lt.getDocumentOrThrow(),e=t.createElement("div");return e.setAttribute("id",Vu),t.body.appendChild(e),e}function Ju(){var t=lt.getDocumentOrThrow(),e=t.getElementById(Gu);e&&(e.className=e.className.replace("fadeIn","fadeOut"),setTimeout(function(){var r=t.getElementById(Vu);r&&t.body.removeChild(r)},jp))}function pg(t){return function(){Ju(),t&&t()}}function gg(){var t=lt.getNavigatorOrThrow().language.split("-")[0]||"en";return Vo[t]||Vo.en}function _g(t,e,r){fg();var n=dg();ie.render(ie.createElement(ng,{text:gg(),uri:t,onClose:pg(e),qrcodeModalOptions:r}),n)}function yg(){Ju()}var Qu=function(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"};function mg(t,e,r){console.log(t),Qu()?Bp(t):_g(t,e,r)}function wg(){Qu()||yg()}var vg={open:mg,close:wg},bg=vg;const Go=ti(bg),Eg=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,xg=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Sg=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Dg(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Ig(t);return}return e}function Ig(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Un(t,e={}){if(typeof t!="string")return t;const r=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return r.slice(1,-1);if(r.length<=9){const n=r.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!Sg.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Eg.test(t)||xg.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Dg)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function Cg(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function et(t,...e){try{return Cg(t(...e))}catch(r){return Promise.reject(r)}}function Tg(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Og(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function kn(t){if(Tg(t))return String(t);if(Og(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return kn(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function Xu(){if(typeof Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const os="base64:";function Ng(t){if(typeof t=="string")return t;Xu();const e=Buffer.from(t).toString("base64");return os+e}function Ag(t){return typeof t!="string"||!t.startsWith(os)?t:(Xu(),Buffer.from(t.slice(os.length),"base64"))}function pt(t){return t?t.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function Rg(...t){return pt(t.join(":"))}function Mn(t){return t=pt(t),t?t+":":""}const Pg="memory",Lg=()=>{const t=new Map;return{name:Pg,options:{},hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return Array.from(t.keys())},clear(){t.clear()},dispose(){t.clear()}}};function Ug(t={}){const e={mounts:{"":t.driver||Lg()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=l=>{for(const d of e.mountpoints)if(l.startsWith(d))return{base:d,relativeKey:l.slice(d.length),driver:e.mounts[d]};return{base:"",relativeKey:l,driver:e.mounts[""]}},n=(l,d)=>e.mountpoints.filter(m=>m.startsWith(l)||d&&l.startsWith(m)).map(m=>({relativeBase:l.length>m.length?l.slice(m.length):void 0,mountpoint:m,driver:e.mounts[m]})),i=(l,d)=>{if(e.watching){d=pt(d);for(const m of e.watchListeners)m(l,d)}},s=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await Yo(e.mounts[l],i,l)}},c=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},o=(l,d,m)=>{const b=new Map,x=E=>{let T=b.get(E.base);return T||(T={driver:E.driver,base:E.base,items:[]},b.set(E.base,T)),T};for(const E of l){const T=typeof E=="string",N=pt(T?E:E.key),M=T?void 0:E.value,S=T||!E.options?d:{...d,...E.options},C=r(N);x(C).items.push({key:N,value:M,relativeKey:C.relativeKey,options:S})}return Promise.all([...b.values()].map(E=>m(E))).then(E=>E.flat())},u={hasItem(l,d={}){l=pt(l);const{relativeKey:m,driver:b}=r(l);return et(b.hasItem,m,d)},getItem(l,d={}){l=pt(l);const{relativeKey:m,driver:b}=r(l);return et(b.getItem,m,d).then(x=>Un(x))},getItems(l,d){return o(l,d,m=>m.driver.getItems?et(m.driver.getItems,m.items.map(b=>({key:b.relativeKey,options:b.options})),d).then(b=>b.map(x=>({key:Rg(m.base,x.key),value:Un(x.value)}))):Promise.all(m.items.map(b=>et(m.driver.getItem,b.relativeKey,b.options).then(x=>({key:b.key,value:Un(x)})))))},getItemRaw(l,d={}){l=pt(l);const{relativeKey:m,driver:b}=r(l);return b.getItemRaw?et(b.getItemRaw,m,d):et(b.getItem,m,d).then(x=>Ag(x))},async setItem(l,d,m={}){if(d===void 0)return u.removeItem(l);l=pt(l);const{relativeKey:b,driver:x}=r(l);x.setItem&&(await et(x.setItem,b,kn(d),m),x.watch||i("update",l))},async setItems(l,d){await o(l,d,async m=>{if(m.driver.setItems)return et(m.driver.setItems,m.items.map(b=>({key:b.relativeKey,value:kn(b.value),options:b.options})),d);m.driver.setItem&&await Promise.all(m.items.map(b=>et(m.driver.setItem,b.relativeKey,kn(b.value),b.options)))})},async setItemRaw(l,d,m={}){if(d===void 0)return u.removeItem(l,m);l=pt(l);const{relativeKey:b,driver:x}=r(l);if(x.setItemRaw)await et(x.setItemRaw,b,d,m);else if(x.setItem)await et(x.setItem,b,Ng(d),m);else return;x.watch||i("update",l)},async removeItem(l,d={}){typeof d=="boolean"&&(d={removeMeta:d}),l=pt(l);const{relativeKey:m,driver:b}=r(l);b.removeItem&&(await et(b.removeItem,m,d),(d.removeMeta||d.removeMata)&&await et(b.removeItem,m+"$",d),b.watch||i("remove",l))},async getMeta(l,d={}){typeof d=="boolean"&&(d={nativeOnly:d}),l=pt(l);const{relativeKey:m,driver:b}=r(l),x=Object.create(null);if(b.getMeta&&Object.assign(x,await et(b.getMeta,m,d)),!d.nativeOnly){const E=await et(b.getItem,m+"$",d).then(T=>Un(T));E&&typeof E=="object"&&(typeof E.atime=="string"&&(E.atime=new Date(E.atime)),typeof E.mtime=="string"&&(E.mtime=new Date(E.mtime)),Object.assign(x,E))}return x},setMeta(l,d,m={}){return this.setItem(l+"$",d,m)},removeMeta(l,d={}){return this.removeItem(l+"$",d)},async getKeys(l,d={}){l=Mn(l);const m=n(l,!0);let b=[];const x=[];for(const E of m){const N=(await et(E.driver.getKeys,E.relativeBase,d)).map(M=>E.mountpoint+pt(M)).filter(M=>!b.some(S=>M.startsWith(S)));x.push(...N),b=[E.mountpoint,...b.filter(M=>!M.startsWith(E.mountpoint))]}return l?x.filter(E=>E.startsWith(l)&&!E.endsWith("$")):x.filter(E=>!E.endsWith("$"))},async clear(l,d={}){l=Mn(l),await Promise.all(n(l,!1).map(async m=>{if(m.driver.clear)return et(m.driver.clear,m.relativeBase,d);if(m.driver.removeItem){const b=await m.driver.getKeys(m.relativeBase||"",d);return Promise.all(b.map(x=>m.driver.removeItem(x,d)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>Jo(l)))},async watch(l){return await s(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(d=>d!==l),e.watchListeners.length===0&&await c()}},async unwatch(){e.watchListeners=[],await c()},mount(l,d){if(l=Mn(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((m,b)=>b.length-m.length)),e.mounts[l]=d,e.watching&&Promise.resolve(Yo(d,i,l)).then(m=>{e.unwatch[l]=m}).catch(console.error),u},async unmount(l,d=!0){l=Mn(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&(e.unwatch[l](),delete e.unwatch[l]),d&&await Jo(e.mounts[l]),e.mountpoints=e.mountpoints.filter(m=>m!==l),delete e.mounts[l])},getMount(l=""){l=pt(l)+":";const d=r(l);return{driver:d.driver,base:d.base}},getMounts(l="",d={}){return l=pt(l),n(l,d.parents).map(b=>({driver:b.driver,base:b.mountpoint}))}};return u}function Yo(t,e,r){return t.watch?t.watch((n,i)=>e(n,r+i)):()=>{}}async function Jo(t){typeof t.dispose=="function"&&await et(t.dispose)}function wr(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function Zu(t,e){const r=indexedDB.open(t);r.onupgradeneeded=()=>r.result.createObjectStore(e);const n=wr(r);return(i,s)=>n.then(c=>s(c.transaction(e,i).objectStore(e)))}let Oi;function yn(){return Oi||(Oi=Zu("keyval-store","keyval")),Oi}function Qo(t,e=yn()){return e("readonly",r=>wr(r.get(t)))}function Mg(t,e,r=yn()){return r("readwrite",n=>(n.put(e,t),wr(n.transaction)))}function $g(t,e=yn()){return e("readwrite",r=>(r.delete(t),wr(r.transaction)))}function Bg(t=yn()){return t("readwrite",e=>(e.clear(),wr(e.transaction)))}function Fg(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},wr(t.transaction)}function kg(t=yn()){return t("readonly",e=>{if(e.getAllKeys)return wr(e.getAllKeys());const r=[];return Fg(e,n=>r.push(n.key)).then(()=>r)})}const qg=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),zg=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function li(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return zg(t)}catch{return t}}function mn(t){return typeof t=="string"?t:qg(t)||""}const jg="idb-keyval";var Kg=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=i=>e+i;let n;return t.dbName&&t.storeName&&(n=Zu(t.dbName,t.storeName)),{name:jg,options:t,async hasItem(i){return!(typeof await Qo(r(i),n)>"u")},async getItem(i){return await Qo(r(i),n)??null},setItem(i,s){return Mg(r(i),s,n)},removeItem(i){return $g(r(i),n)},getKeys(){return kg(n)},clear(){return Bg(n)}}};const Hg="WALLET_CONNECT_V2_INDEXED_DB",Wg="keyvaluestorage";let Vg=class{constructor(){this.indexedDb=Ug({driver:Kg({dbName:Hg,storeName:Wg})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,mn(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Ni=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qn={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Ni<"u"&&Ni.localStorage?qn.exports=Ni.localStorage:typeof window<"u"&&window.localStorage?qn.exports=window.localStorage:qn.exports=new e})();function Gg(t){var e;return[t[0],li((e=t[1])!=null?e:"")]}let Yg=class{constructor(){this.localStorage=qn.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Gg)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return li(r)}async setItem(e,r){this.localStorage.setItem(e,mn(r))}async removeItem(e){this.localStorage.removeItem(e)}};const Jg="wc_storage_version",Xo=1,Qg=async(t,e,r)=>{const n=Jg,i=await e.getItem(n);if(i&&i>=Xo){r(e);return}const s=await t.getKeys();if(!s.length){r(e);return}const c=[];for(;s.length;){const o=s.shift();if(!o)continue;const u=o.toLowerCase();if(u.includes("wc@")||u.includes("walletconnect")||u.includes("wc_")||u.includes("wallet_connect")){const l=await t.getItem(o);await e.setItem(o,l),c.push(o)}}await e.setItem(n,Xo),r(e),Xg(t,c)},Xg=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let Zg=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new Yg;this.storage=e;try{const r=new Vg;Qg(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};var kr={};const Bt=dn(yf);var Yr={},he={},Ai={},Jr={},Zo;function e0(){if(Zo)return Jr;Zo=1,Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Jr.delay=t,Jr}var hr={},Ri={},fr={},ea;function t0(){return ea||(ea=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.ONE_THOUSAND=fr.ONE_HUNDRED=void 0,fr.ONE_HUNDRED=100,fr.ONE_THOUSAND=1e3),fr}var Pi={},ta;function r0(){return ta||(ta=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Pi)),Pi}var ra;function el(){return ra||(ra=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Bt;e.__exportStar(t0(),t),e.__exportStar(r0(),t)}(Ri)),Ri}var na;function n0(){if(na)return hr;na=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.fromMiliseconds=hr.toMiliseconds=void 0;const t=el();function e(n){return n*t.ONE_THOUSAND}hr.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return hr.fromMiliseconds=r,hr}var ia;function i0(){return ia||(ia=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Bt;e.__exportStar(e0(),t),e.__exportStar(n0(),t)}(Ai)),Ai}var Sr={},sa;function s0(){if(sa)return Sr;sa=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Sr.Watch=t,Sr.default=t,Sr}var Li={},Qr={},oa;function o0(){if(oa)return Qr;oa=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.IWatch=void 0;class t{}return Qr.IWatch=t,Qr}var aa;function a0(){return aa||(aa=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Bt.__exportStar(o0(),t)}(Li)),Li}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Bt;e.__exportStar(i0(),t),e.__exportStar(s0(),t),e.__exportStar(a0(),t),e.__exportStar(el(),t)})(he);var Ui={},Xr={};let vr=class{};const c0=Object.freeze(Object.defineProperty({__proto__:null,IEvents:vr},Symbol.toStringTag,{value:"Module"})),u0=dn(c0);var ca;function l0(){if(ca)return Xr;ca=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.IHeartBeat=void 0;const t=u0;class e extends t.IEvents{constructor(n){super()}}return Xr.IHeartBeat=e,Xr}var ua;function tl(){return ua||(ua=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Bt.__exportStar(l0(),t)}(Ui)),Ui}var Mi={},dr={},la;function h0(){if(la)return dr;la=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.HEARTBEAT_EVENTS=dr.HEARTBEAT_INTERVAL=void 0;const t=he;return dr.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,dr.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},dr}var ha;function rl(){return ha||(ha=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Bt.__exportStar(h0(),t)}(Mi)),Mi}var fa;function f0(){if(fa)return Yr;fa=1,Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.HeartBeat=void 0;const t=Bt,e=vc(),r=he,n=tl(),i=rl();class s extends n.IHeartBeat{constructor(o){super(o),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=(o==null?void 0:o.interval)||i.HEARTBEAT_INTERVAL}static init(o){return t.__awaiter(this,void 0,void 0,function*(){const u=new s(o);return yield u.init(),u})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(o,u){this.events.on(o,u)}once(o,u){this.events.once(o,u)}off(o,u){this.events.off(o,u)}removeListener(o,u){this.events.removeListener(o,u)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return Yr.HeartBeat=s,Yr}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Bt;e.__exportStar(f0(),t),e.__exportStar(tl(),t),e.__exportStar(rl(),t)})(kr);var Se={},$i,da;function d0(){if(da)return $i;da=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}$i=e;function e(r,n,i){var s=i&&i.stringify||t,c=1;if(typeof r=="object"&&r!==null){var o=n.length+c;if(o===1)return r;var u=new Array(o);u[0]=s(r);for(var l=1;l<o;l++)u[l]=s(n[l]);return u.join(" ")}if(typeof r!="string")return r;var d=n.length;if(d===0)return r;for(var m="",b=1-c,x=-1,E=r&&r.length||0,T=0;T<E;){if(r.charCodeAt(T)===37&&T+1<E){switch(x=x>-1?x:0,r.charCodeAt(T+1)){case 100:case 102:if(b>=d||n[b]==null)break;x<T&&(m+=r.slice(x,T)),m+=Number(n[b]),x=T+2,T++;break;case 105:if(b>=d||n[b]==null)break;x<T&&(m+=r.slice(x,T)),m+=Math.floor(Number(n[b])),x=T+2,T++;break;case 79:case 111:case 106:if(b>=d||n[b]===void 0)break;x<T&&(m+=r.slice(x,T));var N=typeof n[b];if(N==="string"){m+="'"+n[b]+"'",x=T+2,T++;break}if(N==="function"){m+=n[b].name||"<anonymous>",x=T+2,T++;break}m+=s(n[b]),x=T+2,T++;break;case 115:if(b>=d)break;x<T&&(m+=r.slice(x,T)),m+=String(n[b]),x=T+2,T++;break;case 37:x<T&&(m+=r.slice(x,T)),m+="%",x=T+2,T++,b--;break}++b}++T}return x===-1?r:(x<E&&(m+=r.slice(x)),m)}return $i}var Bi,pa;function p0(){if(pa)return Bi;pa=1;const t=d0();Bi=i;const e=w().console||{},r={mapHttpRequest:E,mapHttpResponse:E,wrapRequestSerializer:T,wrapResponseSerializer:T,wrapErrorSerializer:T,req:E,res:E,err:b};function n(g,a){return Array.isArray(g)?g.filter(function($){return $!=="!stdSerializers.err"}):g===!0?Object.keys(a):!1}function i(g){g=g||{},g.browser=g.browser||{};const a=g.browser.transmit;if(a&&typeof a.send!="function")throw Error("pino: transmit option must have a send function");const y=g.browser.write||e;g.browser.write&&(g.browser.asObject=!0);const $=g.serializers||{},U=n(g.browser.serialize,$);let G=g.browser.serialize;Array.isArray(g.browser.serialize)&&g.browser.serialize.indexOf("!stdSerializers.err")>-1&&(G=!1);const J=["error","fatal","warn","info","debug","trace"];typeof y=="function"&&(y.error=y.fatal=y.warn=y.info=y.debug=y.trace=y),g.enabled===!1&&(g.level="silent");const Z=g.level||"info",R=Object.create(y);R.log||(R.log=N),Object.defineProperty(R,"levelVal",{get:re}),Object.defineProperty(R,"level",{get:Y,set:K});const k={transmit:a,serialize:U,asObject:g.browser.asObject,levels:J,timestamp:x(g)};R.levels=i.levels,R.level=Z,R.setMaxListeners=R.getMaxListeners=R.emit=R.addListener=R.on=R.prependListener=R.once=R.prependOnceListener=R.removeListener=R.removeAllListeners=R.listeners=R.listenerCount=R.eventNames=R.write=R.flush=N,R.serializers=$,R._serialize=U,R._stdErrSerialize=G,R.child=W,a&&(R._logEvent=m());function re(){return this.level==="silent"?1/0:this.levels.values[this.level]}function Y(){return this._level}function K(j){if(j!=="silent"&&!this.levels.values[j])throw Error("unknown level "+j);this._level=j,s(k,R,"error","log"),s(k,R,"fatal","error"),s(k,R,"warn","error"),s(k,R,"info","log"),s(k,R,"debug","log"),s(k,R,"trace","log")}function W(j,H){if(!j)throw new Error("missing bindings for child Pino");H=H||{},U&&j.serializers&&(H.serializers=j.serializers);const le=H.serializers;if(U&&le){var Q=Object.assign({},$,le),de=g.browser.serialize===!0?Object.keys(Q):U;delete j.serializers,u([j],de,Q,this._stdErrSerialize)}function se(pe){this._childLevel=(pe._childLevel|0)+1,this.error=l(pe,j,"error"),this.fatal=l(pe,j,"fatal"),this.warn=l(pe,j,"warn"),this.info=l(pe,j,"info"),this.debug=l(pe,j,"debug"),this.trace=l(pe,j,"trace"),Q&&(this.serializers=Q,this._serialize=de),a&&(this._logEvent=m([].concat(pe._logEvent.bindings,j)))}return se.prototype=this,new se(this)}return R}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=r,i.stdTimeFunctions=Object.assign({},{nullTime:M,epochTime:S,unixTime:C,isoTime:_});function s(g,a,y,$){const U=Object.getPrototypeOf(a);a[y]=a.levelVal>a.levels.values[y]?N:U[y]?U[y]:e[y]||e[$]||N,c(g,a,y)}function c(g,a,y){!g.transmit&&a[y]===N||(a[y]=function($){return function(){const G=g.timestamp(),J=new Array(arguments.length),Z=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var R=0;R<J.length;R++)J[R]=arguments[R];if(g.serialize&&!g.asObject&&u(J,this._serialize,this.serializers,this._stdErrSerialize),g.asObject?$.call(Z,o(this,y,J,G)):$.apply(Z,J),g.transmit){const k=g.transmit.level||a.level,re=i.levels.values[k],Y=i.levels.values[y];if(Y<re)return;d(this,{ts:G,methodLevel:y,methodValue:Y,transmitLevel:k,transmitValue:i.levels.values[g.transmit.level||a.level],send:g.transmit.send,val:a.levelVal},J)}}}(a[y]))}function o(g,a,y,$){g._serialize&&u(y,g._serialize,g.serializers,g._stdErrSerialize);const U=y.slice();let G=U[0];const J={};$&&(J.time=$),J.level=i.levels.values[a];let Z=(g._childLevel|0)+1;if(Z<1&&(Z=1),G!==null&&typeof G=="object"){for(;Z--&&typeof U[0]=="object";)Object.assign(J,U.shift());G=U.length?t(U.shift(),U):void 0}else typeof G=="string"&&(G=t(U.shift(),U));return G!==void 0&&(J.msg=G),J}function u(g,a,y,$){for(const U in g)if($&&g[U]instanceof Error)g[U]=i.stdSerializers.err(g[U]);else if(typeof g[U]=="object"&&!Array.isArray(g[U]))for(const G in g[U])a&&a.indexOf(G)>-1&&G in y&&(g[U][G]=y[G](g[U][G]))}function l(g,a,y){return function(){const $=new Array(1+arguments.length);$[0]=a;for(var U=1;U<$.length;U++)$[U]=arguments[U-1];return g[y].apply(this,$)}}function d(g,a,y){const $=a.send,U=a.ts,G=a.methodLevel,J=a.methodValue,Z=a.val,R=g._logEvent.bindings;u(y,g._serialize||Object.keys(g.serializers),g.serializers,g._stdErrSerialize===void 0?!0:g._stdErrSerialize),g._logEvent.ts=U,g._logEvent.messages=y.filter(function(k){return R.indexOf(k)===-1}),g._logEvent.level.label=G,g._logEvent.level.value=J,$(G,g._logEvent,Z),g._logEvent=m(R)}function m(g){return{ts:0,messages:[],bindings:g||[],level:{label:"",value:0}}}function b(g){const a={type:g.constructor.name,msg:g.message,stack:g.stack};for(const y in g)a[y]===void 0&&(a[y]=g[y]);return a}function x(g){return typeof g.timestamp=="function"?g.timestamp:g.timestamp===!1?M:S}function E(){return{}}function T(g){return g}function N(){}function M(){return!1}function S(){return Date.now()}function C(){return Math.round(Date.now()/1e3)}function _(){return new Date(Date.now()).toISOString()}function w(){function g(a){return typeof a<"u"&&a}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return g(self)||g(window)||g(this)||{}}}return Bi}var pr={},ga;function nl(){return ga||(ga=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.PINO_CUSTOM_CONTEXT_KEY=pr.PINO_LOGGER_DEFAULTS=void 0,pr.PINO_LOGGER_DEFAULTS={level:"info"},pr.PINO_CUSTOM_CONTEXT_KEY="custom_context"),pr}var ct={},_a;function g0(){if(_a)return ct;_a=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.generateChildLogger=ct.formatChildLoggerContext=ct.getLoggerContext=ct.setBrowserLoggerContext=ct.getBrowserLoggerContext=ct.getDefaultLoggerOptions=void 0;const t=nl();function e(o){return Object.assign(Object.assign({},o),{level:(o==null?void 0:o.level)||t.PINO_LOGGER_DEFAULTS.level})}ct.getDefaultLoggerOptions=e;function r(o,u=t.PINO_CUSTOM_CONTEXT_KEY){return o[u]||""}ct.getBrowserLoggerContext=r;function n(o,u,l=t.PINO_CUSTOM_CONTEXT_KEY){return o[l]=u,o}ct.setBrowserLoggerContext=n;function i(o,u=t.PINO_CUSTOM_CONTEXT_KEY){let l="";return typeof o.bindings>"u"?l=r(o,u):l=o.bindings().context||"",l}ct.getLoggerContext=i;function s(o,u,l=t.PINO_CUSTOM_CONTEXT_KEY){const d=i(o,l);return d.trim()?`${d}/${u}`:u}ct.formatChildLoggerContext=s;function c(o,u,l=t.PINO_CUSTOM_CONTEXT_KEY){const d=s(o,u,l),m=o.child({context:d});return n(m,d,l)}return ct.generateChildLogger=c,ct}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=Bt,r=e.__importDefault(p0());Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(nl(),t),e.__exportStar(g0(),t)})(Se);class _0 extends vr{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}let y0=class extends vr{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},m0=class{constructor(e,r){this.logger=e,this.core=r}};class w0 extends vr{constructor(e,r){super(),this.relayer=e,this.logger=r}}let v0=class extends vr{constructor(e){super()}},b0=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}};class E0 extends vr{constructor(e,r){super(),this.relayer=e,this.logger=r}}class x0 extends vr{constructor(e,r){super(),this.core=e,this.logger=r}}class S0{constructor(e,r){this.projectId=e,this.logger=r}}let D0=class{constructor(e,r){this.projectId=e,this.logger=r}},I0=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},C0=class{constructor(e){this.client=e}};var Fs={},qr={},hi={},fi={};Object.defineProperty(fi,"__esModule",{value:!0});fi.BrowserRandomSource=void 0;const ya=65536;class T0{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=ya)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,ya)));return r}}fi.BrowserRandomSource=T0;var di={},xt={};Object.defineProperty(xt,"__esModule",{value:!0});function O0(t){for(var e=0;e<t.length;e++)t[e]=0;return t}xt.wipe=O0;Object.defineProperty(di,"__esModule",{value:!0});di.NodeRandomSource=void 0;const N0=xt;class A0{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof mf<"u"){const e=Gh;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,N0.wipe)(r),n}}di.NodeRandomSource=A0;Object.defineProperty(hi,"__esModule",{value:!0});hi.SystemRandomSource=void 0;const R0=fi,P0=di;class L0{constructor(){if(this.isAvailable=!1,this.name="",this._source=new R0.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new P0.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}hi.SystemRandomSource=L0;var me={},il={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(o,u){var l=o>>>16&65535,d=o&65535,m=u>>>16&65535,b=u&65535;return d*b+(l*b+d*m<<16>>>0)|0}t.mul=Math.imul||e;function r(o,u){return o+u|0}t.add=r;function n(o,u){return o-u|0}t.sub=n;function i(o,u){return o<<u|o>>>32-u}t.rotl=i;function s(o,u){return o<<32-u|o>>>u}t.rotr=s;function c(o){return typeof o=="number"&&isFinite(o)&&Math.floor(o)===o}t.isInteger=Number.isInteger||c,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(o){return t.isInteger(o)&&o>=-t.MAX_SAFE_INTEGER&&o<=t.MAX_SAFE_INTEGER}})(il);Object.defineProperty(me,"__esModule",{value:!0});var sl=il;function U0(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}me.readInt16BE=U0;function M0(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}me.readUint16BE=M0;function $0(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}me.readInt16LE=$0;function B0(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}me.readUint16LE=B0;function ol(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}me.writeUint16BE=ol;me.writeInt16BE=ol;function al(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}me.writeUint16LE=al;me.writeInt16LE=al;function as(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}me.readInt32BE=as;function cs(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}me.readUint32BE=cs;function us(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}me.readInt32LE=us;function ls(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}me.readUint32LE=ls;function Gn(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}me.writeUint32BE=Gn;me.writeInt32BE=Gn;function Yn(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}me.writeUint32LE=Yn;me.writeInt32LE=Yn;function F0(t,e){e===void 0&&(e=0);var r=as(t,e),n=as(t,e+4);return r*4294967296+n-(n>>31)*4294967296}me.readInt64BE=F0;function k0(t,e){e===void 0&&(e=0);var r=cs(t,e),n=cs(t,e+4);return r*4294967296+n}me.readUint64BE=k0;function q0(t,e){e===void 0&&(e=0);var r=us(t,e),n=us(t,e+4);return n*4294967296+r-(r>>31)*4294967296}me.readInt64LE=q0;function z0(t,e){e===void 0&&(e=0);var r=ls(t,e),n=ls(t,e+4);return n*4294967296+r}me.readUint64LE=z0;function cl(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Gn(t/4294967296>>>0,e,r),Gn(t>>>0,e,r+4),e}me.writeUint64BE=cl;me.writeInt64BE=cl;function ul(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Yn(t>>>0,e,r),Yn(t/4294967296>>>0,e,r+4),e}me.writeUint64LE=ul;me.writeInt64LE=ul;function j0(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=t/8+r-1;s>=r;s--)n+=e[s]*i,i*=256;return n}me.readUintBE=j0;function K0(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+t/8;s++)n+=e[s]*i,i*=256;return n}me.readUintLE=K0;function H0(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!sl.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=t/8+n-1;s>=n;s--)r[s]=e/i&255,i*=256;return r}me.writeUintBE=H0;function W0(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!sl.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+t/8;s++)r[s]=e/i&255,i*=256;return r}me.writeUintLE=W0;function V0(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}me.readFloat32BE=V0;function G0(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}me.readFloat32LE=G0;function Y0(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}me.readFloat64BE=Y0;function J0(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}me.readFloat64LE=J0;function Q0(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}me.writeFloat32BE=Q0;function X0(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}me.writeFloat32LE=X0;function Z0(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}me.writeFloat64BE=Z0;function e_(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}me.writeFloat64LE=e_;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=hi,r=me,n=xt;t.defaultRandomSource=new e.SystemRandomSource;function i(l,d=t.defaultRandomSource){return d.randomBytes(l)}t.randomBytes=i;function s(l=t.defaultRandomSource){const d=i(4,l),m=(0,r.readUint32LE)(d);return(0,n.wipe)(d),m}t.randomUint32=s;const c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function o(l,d=c,m=t.defaultRandomSource){if(d.length<2)throw new Error("randomString charset is too short");if(d.length>256)throw new Error("randomString charset is too long");let b="";const x=d.length,E=256-256%x;for(;l>0;){const T=i(Math.ceil(l*256/E),m);for(let N=0;N<T.length&&l>0;N++){const M=T[N];M<E&&(b+=d.charAt(M%x),l--)}(0,n.wipe)(T)}return b}t.randomString=o;function u(l,d=c,m=t.defaultRandomSource){const b=Math.ceil(l/(Math.log(d.length)/Math.LN2));return o(b,d,m)}t.randomStringForEntropy=u})(qr);var ll={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=me,r=xt;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function o(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return o.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},o.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},o.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},o.prototype.update=function(u,l){if(l===void 0&&(l=u.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var d=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&l>0;)this._buffer[this._bufferLength++]=u[d++],l--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(d=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,u,d,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=u[d++],l--;return this},o.prototype.finish=function(u){if(!this._finished){var l=this._bytesHashed,d=this._bufferLength,m=l/536870912|0,b=l<<3,x=l%128<112?128:256;this._buffer[d]=128;for(var E=d+1;E<x-8;E++)this._buffer[E]=0;e.writeUint32BE(m,this._buffer,x-8),e.writeUint32BE(b,this._buffer,x-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,x),this._finished=!0}for(var E=0;E<this.digestLength/8;E++)e.writeUint32BE(this._stateHi[E],u,E*8),e.writeUint32BE(this._stateLo[E],u,E*8+4);return this},o.prototype.digest=function(){var u=new Uint8Array(this.digestLength);return this.finish(u),u},o.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},o.prototype.restoreState=function(u){return this._stateHi.set(u.stateHi),this._stateLo.set(u.stateLo),this._bufferLength=u.bufferLength,u.buffer&&this._buffer.set(u.buffer),this._bytesHashed=u.bytesHashed,this._finished=!1,this},o.prototype.cleanSavedState=function(u){r.wipe(u.stateHi),r.wipe(u.stateLo),u.buffer&&r.wipe(u.buffer),u.bufferLength=0,u.bytesHashed=0},o}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(o,u,l,d,m,b,x){for(var E=l[0],T=l[1],N=l[2],M=l[3],S=l[4],C=l[5],_=l[6],w=l[7],g=d[0],a=d[1],y=d[2],$=d[3],U=d[4],G=d[5],J=d[6],Z=d[7],R,k,re,Y,K,W,j,H;x>=128;){for(var le=0;le<16;le++){var Q=8*le+b;o[le]=e.readUint32BE(m,Q),u[le]=e.readUint32BE(m,Q+4)}for(var le=0;le<80;le++){var de=E,se=T,pe=N,F=M,B=S,P=C,h=_,O=w,X=g,ee=a,ve=y,xe=$,v=U,f=G,p=J,I=Z;if(R=w,k=Z,K=k&65535,W=k>>>16,j=R&65535,H=R>>>16,R=(S>>>14|U<<18)^(S>>>18|U<<14)^(U>>>9|S<<23),k=(U>>>14|S<<18)^(U>>>18|S<<14)^(S>>>9|U<<23),K+=k&65535,W+=k>>>16,j+=R&65535,H+=R>>>16,R=S&C^~S&_,k=U&G^~U&J,K+=k&65535,W+=k>>>16,j+=R&65535,H+=R>>>16,R=i[le*2],k=i[le*2+1],K+=k&65535,W+=k>>>16,j+=R&65535,H+=R>>>16,R=o[le%16],k=u[le%16],K+=k&65535,W+=k>>>16,j+=R&65535,H+=R>>>16,W+=K>>>16,j+=W>>>16,H+=j>>>16,re=j&65535|H<<16,Y=K&65535|W<<16,R=re,k=Y,K=k&65535,W=k>>>16,j=R&65535,H=R>>>16,R=(E>>>28|g<<4)^(g>>>2|E<<30)^(g>>>7|E<<25),k=(g>>>28|E<<4)^(E>>>2|g<<30)^(E>>>7|g<<25),K+=k&65535,W+=k>>>16,j+=R&65535,H+=R>>>16,R=E&T^E&N^T&N,k=g&a^g&y^a&y,K+=k&65535,W+=k>>>16,j+=R&65535,H+=R>>>16,W+=K>>>16,j+=W>>>16,H+=j>>>16,O=j&65535|H<<16,I=K&65535|W<<16,R=F,k=xe,K=k&65535,W=k>>>16,j=R&65535,H=R>>>16,R=re,k=Y,K+=k&65535,W+=k>>>16,j+=R&65535,H+=R>>>16,W+=K>>>16,j+=W>>>16,H+=j>>>16,F=j&65535|H<<16,xe=K&65535|W<<16,T=de,N=se,M=pe,S=F,C=B,_=P,w=h,E=O,a=X,y=ee,$=ve,U=xe,G=v,J=f,Z=p,g=I,le%16===15)for(var Q=0;Q<16;Q++)R=o[Q],k=u[Q],K=k&65535,W=k>>>16,j=R&65535,H=R>>>16,R=o[(Q+9)%16],k=u[(Q+9)%16],K+=k&65535,W+=k>>>16,j+=R&65535,H+=R>>>16,re=o[(Q+1)%16],Y=u[(Q+1)%16],R=(re>>>1|Y<<31)^(re>>>8|Y<<24)^re>>>7,k=(Y>>>1|re<<31)^(Y>>>8|re<<24)^(Y>>>7|re<<25),K+=k&65535,W+=k>>>16,j+=R&65535,H+=R>>>16,re=o[(Q+14)%16],Y=u[(Q+14)%16],R=(re>>>19|Y<<13)^(Y>>>29|re<<3)^re>>>6,k=(Y>>>19|re<<13)^(re>>>29|Y<<3)^(Y>>>6|re<<26),K+=k&65535,W+=k>>>16,j+=R&65535,H+=R>>>16,W+=K>>>16,j+=W>>>16,H+=j>>>16,o[Q]=j&65535|H<<16,u[Q]=K&65535|W<<16}R=E,k=g,K=k&65535,W=k>>>16,j=R&65535,H=R>>>16,R=l[0],k=d[0],K+=k&65535,W+=k>>>16,j+=R&65535,H+=R>>>16,W+=K>>>16,j+=W>>>16,H+=j>>>16,l[0]=E=j&65535|H<<16,d[0]=g=K&65535|W<<16,R=T,k=a,K=k&65535,W=k>>>16,j=R&65535,H=R>>>16,R=l[1],k=d[1],K+=k&65535,W+=k>>>16,j+=R&65535,H+=R>>>16,W+=K>>>16,j+=W>>>16,H+=j>>>16,l[1]=T=j&65535|H<<16,d[1]=a=K&65535|W<<16,R=N,k=y,K=k&65535,W=k>>>16,j=R&65535,H=R>>>16,R=l[2],k=d[2],K+=k&65535,W+=k>>>16,j+=R&65535,H+=R>>>16,W+=K>>>16,j+=W>>>16,H+=j>>>16,l[2]=N=j&65535|H<<16,d[2]=y=K&65535|W<<16,R=M,k=$,K=k&65535,W=k>>>16,j=R&65535,H=R>>>16,R=l[3],k=d[3],K+=k&65535,W+=k>>>16,j+=R&65535,H+=R>>>16,W+=K>>>16,j+=W>>>16,H+=j>>>16,l[3]=M=j&65535|H<<16,d[3]=$=K&65535|W<<16,R=S,k=U,K=k&65535,W=k>>>16,j=R&65535,H=R>>>16,R=l[4],k=d[4],K+=k&65535,W+=k>>>16,j+=R&65535,H+=R>>>16,W+=K>>>16,j+=W>>>16,H+=j>>>16,l[4]=S=j&65535|H<<16,d[4]=U=K&65535|W<<16,R=C,k=G,K=k&65535,W=k>>>16,j=R&65535,H=R>>>16,R=l[5],k=d[5],K+=k&65535,W+=k>>>16,j+=R&65535,H+=R>>>16,W+=K>>>16,j+=W>>>16,H+=j>>>16,l[5]=C=j&65535|H<<16,d[5]=G=K&65535|W<<16,R=_,k=J,K=k&65535,W=k>>>16,j=R&65535,H=R>>>16,R=l[6],k=d[6],K+=k&65535,W+=k>>>16,j+=R&65535,H+=R>>>16,W+=K>>>16,j+=W>>>16,H+=j>>>16,l[6]=_=j&65535|H<<16,d[6]=J=K&65535|W<<16,R=w,k=Z,K=k&65535,W=k>>>16,j=R&65535,H=R>>>16,R=l[7],k=d[7],K+=k&65535,W+=k>>>16,j+=R&65535,H+=R>>>16,W+=K>>>16,j+=W>>>16,H+=j>>>16,l[7]=w=j&65535|H<<16,d[7]=Z=K&65535|W<<16,b+=128,x-=128}return b}function c(o){var u=new n;u.update(o);var l=u.digest();return u.clean(),l}t.hash=c})(ll);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=qr,r=ll,n=xt;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(F){const B=new Float64Array(16);if(F)for(let P=0;P<F.length;P++)B[P]=F[P];return B}const s=new Uint8Array(32);s[0]=9;const c=i(),o=i([1]),u=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),m=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),b=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function x(F,B){for(let P=0;P<16;P++)F[P]=B[P]|0}function E(F){let B=1;for(let P=0;P<16;P++){let h=F[P]+B+65535;B=Math.floor(h/65536),F[P]=h-B*65536}F[0]+=B-1+37*(B-1)}function T(F,B,P){const h=~(P-1);for(let O=0;O<16;O++){const X=h&(F[O]^B[O]);F[O]^=X,B[O]^=X}}function N(F,B){const P=i(),h=i();for(let O=0;O<16;O++)h[O]=B[O];E(h),E(h),E(h);for(let O=0;O<2;O++){P[0]=h[0]-65517;for(let ee=1;ee<15;ee++)P[ee]=h[ee]-65535-(P[ee-1]>>16&1),P[ee-1]&=65535;P[15]=h[15]-32767-(P[14]>>16&1);const X=P[15]>>16&1;P[14]&=65535,T(h,P,1-X)}for(let O=0;O<16;O++)F[2*O]=h[O]&255,F[2*O+1]=h[O]>>8}function M(F,B){let P=0;for(let h=0;h<32;h++)P|=F[h]^B[h];return(1&P-1>>>8)-1}function S(F,B){const P=new Uint8Array(32),h=new Uint8Array(32);return N(P,F),N(h,B),M(P,h)}function C(F){const B=new Uint8Array(32);return N(B,F),B[0]&1}function _(F,B){for(let P=0;P<16;P++)F[P]=B[2*P]+(B[2*P+1]<<8);F[15]&=32767}function w(F,B,P){for(let h=0;h<16;h++)F[h]=B[h]+P[h]}function g(F,B,P){for(let h=0;h<16;h++)F[h]=B[h]-P[h]}function a(F,B,P){let h,O,X=0,ee=0,ve=0,xe=0,v=0,f=0,p=0,I=0,A=0,q=0,z=0,ne=0,oe=0,ue=0,fe=0,ae=0,ye=0,be=0,_e=0,De=0,Ie=0,Te=0,Oe=0,Ce=0,Ct=0,Rt=0,Jt=0,mt=0,ar=0,Wr=0,Dn=0,ke=P[0],Ue=P[1],qe=P[2],ze=P[3],je=P[4],Me=P[5],We=P[6],Ve=P[7],Ge=P[8],Ye=P[9],Je=P[10],He=P[11],Ke=P[12],Pe=P[13],Qe=P[14],Xe=P[15];h=B[0],X+=h*ke,ee+=h*Ue,ve+=h*qe,xe+=h*ze,v+=h*je,f+=h*Me,p+=h*We,I+=h*Ve,A+=h*Ge,q+=h*Ye,z+=h*Je,ne+=h*He,oe+=h*Ke,ue+=h*Pe,fe+=h*Qe,ae+=h*Xe,h=B[1],ee+=h*ke,ve+=h*Ue,xe+=h*qe,v+=h*ze,f+=h*je,p+=h*Me,I+=h*We,A+=h*Ve,q+=h*Ge,z+=h*Ye,ne+=h*Je,oe+=h*He,ue+=h*Ke,fe+=h*Pe,ae+=h*Qe,ye+=h*Xe,h=B[2],ve+=h*ke,xe+=h*Ue,v+=h*qe,f+=h*ze,p+=h*je,I+=h*Me,A+=h*We,q+=h*Ve,z+=h*Ge,ne+=h*Ye,oe+=h*Je,ue+=h*He,fe+=h*Ke,ae+=h*Pe,ye+=h*Qe,be+=h*Xe,h=B[3],xe+=h*ke,v+=h*Ue,f+=h*qe,p+=h*ze,I+=h*je,A+=h*Me,q+=h*We,z+=h*Ve,ne+=h*Ge,oe+=h*Ye,ue+=h*Je,fe+=h*He,ae+=h*Ke,ye+=h*Pe,be+=h*Qe,_e+=h*Xe,h=B[4],v+=h*ke,f+=h*Ue,p+=h*qe,I+=h*ze,A+=h*je,q+=h*Me,z+=h*We,ne+=h*Ve,oe+=h*Ge,ue+=h*Ye,fe+=h*Je,ae+=h*He,ye+=h*Ke,be+=h*Pe,_e+=h*Qe,De+=h*Xe,h=B[5],f+=h*ke,p+=h*Ue,I+=h*qe,A+=h*ze,q+=h*je,z+=h*Me,ne+=h*We,oe+=h*Ve,ue+=h*Ge,fe+=h*Ye,ae+=h*Je,ye+=h*He,be+=h*Ke,_e+=h*Pe,De+=h*Qe,Ie+=h*Xe,h=B[6],p+=h*ke,I+=h*Ue,A+=h*qe,q+=h*ze,z+=h*je,ne+=h*Me,oe+=h*We,ue+=h*Ve,fe+=h*Ge,ae+=h*Ye,ye+=h*Je,be+=h*He,_e+=h*Ke,De+=h*Pe,Ie+=h*Qe,Te+=h*Xe,h=B[7],I+=h*ke,A+=h*Ue,q+=h*qe,z+=h*ze,ne+=h*je,oe+=h*Me,ue+=h*We,fe+=h*Ve,ae+=h*Ge,ye+=h*Ye,be+=h*Je,_e+=h*He,De+=h*Ke,Ie+=h*Pe,Te+=h*Qe,Oe+=h*Xe,h=B[8],A+=h*ke,q+=h*Ue,z+=h*qe,ne+=h*ze,oe+=h*je,ue+=h*Me,fe+=h*We,ae+=h*Ve,ye+=h*Ge,be+=h*Ye,_e+=h*Je,De+=h*He,Ie+=h*Ke,Te+=h*Pe,Oe+=h*Qe,Ce+=h*Xe,h=B[9],q+=h*ke,z+=h*Ue,ne+=h*qe,oe+=h*ze,ue+=h*je,fe+=h*Me,ae+=h*We,ye+=h*Ve,be+=h*Ge,_e+=h*Ye,De+=h*Je,Ie+=h*He,Te+=h*Ke,Oe+=h*Pe,Ce+=h*Qe,Ct+=h*Xe,h=B[10],z+=h*ke,ne+=h*Ue,oe+=h*qe,ue+=h*ze,fe+=h*je,ae+=h*Me,ye+=h*We,be+=h*Ve,_e+=h*Ge,De+=h*Ye,Ie+=h*Je,Te+=h*He,Oe+=h*Ke,Ce+=h*Pe,Ct+=h*Qe,Rt+=h*Xe,h=B[11],ne+=h*ke,oe+=h*Ue,ue+=h*qe,fe+=h*ze,ae+=h*je,ye+=h*Me,be+=h*We,_e+=h*Ve,De+=h*Ge,Ie+=h*Ye,Te+=h*Je,Oe+=h*He,Ce+=h*Ke,Ct+=h*Pe,Rt+=h*Qe,Jt+=h*Xe,h=B[12],oe+=h*ke,ue+=h*Ue,fe+=h*qe,ae+=h*ze,ye+=h*je,be+=h*Me,_e+=h*We,De+=h*Ve,Ie+=h*Ge,Te+=h*Ye,Oe+=h*Je,Ce+=h*He,Ct+=h*Ke,Rt+=h*Pe,Jt+=h*Qe,mt+=h*Xe,h=B[13],ue+=h*ke,fe+=h*Ue,ae+=h*qe,ye+=h*ze,be+=h*je,_e+=h*Me,De+=h*We,Ie+=h*Ve,Te+=h*Ge,Oe+=h*Ye,Ce+=h*Je,Ct+=h*He,Rt+=h*Ke,Jt+=h*Pe,mt+=h*Qe,ar+=h*Xe,h=B[14],fe+=h*ke,ae+=h*Ue,ye+=h*qe,be+=h*ze,_e+=h*je,De+=h*Me,Ie+=h*We,Te+=h*Ve,Oe+=h*Ge,Ce+=h*Ye,Ct+=h*Je,Rt+=h*He,Jt+=h*Ke,mt+=h*Pe,ar+=h*Qe,Wr+=h*Xe,h=B[15],ae+=h*ke,ye+=h*Ue,be+=h*qe,_e+=h*ze,De+=h*je,Ie+=h*Me,Te+=h*We,Oe+=h*Ve,Ce+=h*Ge,Ct+=h*Ye,Rt+=h*Je,Jt+=h*He,mt+=h*Ke,ar+=h*Pe,Wr+=h*Qe,Dn+=h*Xe,X+=38*ye,ee+=38*be,ve+=38*_e,xe+=38*De,v+=38*Ie,f+=38*Te,p+=38*Oe,I+=38*Ce,A+=38*Ct,q+=38*Rt,z+=38*Jt,ne+=38*mt,oe+=38*ar,ue+=38*Wr,fe+=38*Dn,O=1,h=X+O+65535,O=Math.floor(h/65536),X=h-O*65536,h=ee+O+65535,O=Math.floor(h/65536),ee=h-O*65536,h=ve+O+65535,O=Math.floor(h/65536),ve=h-O*65536,h=xe+O+65535,O=Math.floor(h/65536),xe=h-O*65536,h=v+O+65535,O=Math.floor(h/65536),v=h-O*65536,h=f+O+65535,O=Math.floor(h/65536),f=h-O*65536,h=p+O+65535,O=Math.floor(h/65536),p=h-O*65536,h=I+O+65535,O=Math.floor(h/65536),I=h-O*65536,h=A+O+65535,O=Math.floor(h/65536),A=h-O*65536,h=q+O+65535,O=Math.floor(h/65536),q=h-O*65536,h=z+O+65535,O=Math.floor(h/65536),z=h-O*65536,h=ne+O+65535,O=Math.floor(h/65536),ne=h-O*65536,h=oe+O+65535,O=Math.floor(h/65536),oe=h-O*65536,h=ue+O+65535,O=Math.floor(h/65536),ue=h-O*65536,h=fe+O+65535,O=Math.floor(h/65536),fe=h-O*65536,h=ae+O+65535,O=Math.floor(h/65536),ae=h-O*65536,X+=O-1+37*(O-1),O=1,h=X+O+65535,O=Math.floor(h/65536),X=h-O*65536,h=ee+O+65535,O=Math.floor(h/65536),ee=h-O*65536,h=ve+O+65535,O=Math.floor(h/65536),ve=h-O*65536,h=xe+O+65535,O=Math.floor(h/65536),xe=h-O*65536,h=v+O+65535,O=Math.floor(h/65536),v=h-O*65536,h=f+O+65535,O=Math.floor(h/65536),f=h-O*65536,h=p+O+65535,O=Math.floor(h/65536),p=h-O*65536,h=I+O+65535,O=Math.floor(h/65536),I=h-O*65536,h=A+O+65535,O=Math.floor(h/65536),A=h-O*65536,h=q+O+65535,O=Math.floor(h/65536),q=h-O*65536,h=z+O+65535,O=Math.floor(h/65536),z=h-O*65536,h=ne+O+65535,O=Math.floor(h/65536),ne=h-O*65536,h=oe+O+65535,O=Math.floor(h/65536),oe=h-O*65536,h=ue+O+65535,O=Math.floor(h/65536),ue=h-O*65536,h=fe+O+65535,O=Math.floor(h/65536),fe=h-O*65536,h=ae+O+65535,O=Math.floor(h/65536),ae=h-O*65536,X+=O-1+37*(O-1),F[0]=X,F[1]=ee,F[2]=ve,F[3]=xe,F[4]=v,F[5]=f,F[6]=p,F[7]=I,F[8]=A,F[9]=q,F[10]=z,F[11]=ne,F[12]=oe,F[13]=ue,F[14]=fe,F[15]=ae}function y(F,B){a(F,B,B)}function $(F,B){const P=i();let h;for(h=0;h<16;h++)P[h]=B[h];for(h=253;h>=0;h--)y(P,P),h!==2&&h!==4&&a(P,P,B);for(h=0;h<16;h++)F[h]=P[h]}function U(F,B){const P=i();let h;for(h=0;h<16;h++)P[h]=B[h];for(h=250;h>=0;h--)y(P,P),h!==1&&a(P,P,B);for(h=0;h<16;h++)F[h]=P[h]}function G(F,B){const P=i(),h=i(),O=i(),X=i(),ee=i(),ve=i(),xe=i(),v=i(),f=i();g(P,F[1],F[0]),g(f,B[1],B[0]),a(P,P,f),w(h,F[0],F[1]),w(f,B[0],B[1]),a(h,h,f),a(O,F[3],B[3]),a(O,O,l),a(X,F[2],B[2]),w(X,X,X),g(ee,h,P),g(ve,X,O),w(xe,X,O),w(v,h,P),a(F[0],ee,ve),a(F[1],v,xe),a(F[2],xe,ve),a(F[3],ee,v)}function J(F,B,P){for(let h=0;h<4;h++)T(F[h],B[h],P)}function Z(F,B){const P=i(),h=i(),O=i();$(O,B[2]),a(P,B[0],O),a(h,B[1],O),N(F,h),F[31]^=C(P)<<7}function R(F,B,P){x(F[0],c),x(F[1],o),x(F[2],o),x(F[3],c);for(let h=255;h>=0;--h){const O=P[h/8|0]>>(h&7)&1;J(F,B,O),G(B,F),G(F,F),J(F,B,O)}}function k(F,B){const P=[i(),i(),i(),i()];x(P[0],d),x(P[1],m),x(P[2],o),a(P[3],d,m),R(F,P,B)}function re(F){if(F.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const B=(0,r.hash)(F);B[0]&=248,B[31]&=127,B[31]|=64;const P=new Uint8Array(32),h=[i(),i(),i(),i()];k(h,B),Z(P,h);const O=new Uint8Array(64);return O.set(F),O.set(P,32),{publicKey:P,secretKey:O}}t.generateKeyPairFromSeed=re;function Y(F){const B=(0,e.randomBytes)(32,F),P=re(B);return(0,n.wipe)(B),P}t.generateKeyPair=Y;function K(F){if(F.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(F.subarray(32))}t.extractPublicKeyFromSecretKey=K;const W=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function j(F,B){let P,h,O,X;for(h=63;h>=32;--h){for(P=0,O=h-32,X=h-12;O<X;++O)B[O]+=P-16*B[h]*W[O-(h-32)],P=Math.floor((B[O]+128)/256),B[O]-=P*256;B[O]+=P,B[h]=0}for(P=0,O=0;O<32;O++)B[O]+=P-(B[31]>>4)*W[O],P=B[O]>>8,B[O]&=255;for(O=0;O<32;O++)B[O]-=P*W[O];for(h=0;h<32;h++)B[h+1]+=B[h]>>8,F[h]=B[h]&255}function H(F){const B=new Float64Array(64);for(let P=0;P<64;P++)B[P]=F[P];for(let P=0;P<64;P++)F[P]=0;j(F,B)}function le(F,B){const P=new Float64Array(64),h=[i(),i(),i(),i()],O=(0,r.hash)(F.subarray(0,32));O[0]&=248,O[31]&=127,O[31]|=64;const X=new Uint8Array(64);X.set(O.subarray(32),32);const ee=new r.SHA512;ee.update(X.subarray(32)),ee.update(B);const ve=ee.digest();ee.clean(),H(ve),k(h,ve),Z(X,h),ee.reset(),ee.update(X.subarray(0,32)),ee.update(F.subarray(32)),ee.update(B);const xe=ee.digest();H(xe);for(let v=0;v<32;v++)P[v]=ve[v];for(let v=0;v<32;v++)for(let f=0;f<32;f++)P[v+f]+=xe[v]*O[f];return j(X.subarray(32),P),X}t.sign=le;function Q(F,B){const P=i(),h=i(),O=i(),X=i(),ee=i(),ve=i(),xe=i();return x(F[2],o),_(F[1],B),y(O,F[1]),a(X,O,u),g(O,O,F[2]),w(X,F[2],X),y(ee,X),y(ve,ee),a(xe,ve,ee),a(P,xe,O),a(P,P,X),U(P,P),a(P,P,O),a(P,P,X),a(P,P,X),a(F[0],P,X),y(h,F[0]),a(h,h,X),S(h,O)&&a(F[0],F[0],b),y(h,F[0]),a(h,h,X),S(h,O)?-1:(C(F[0])===B[31]>>7&&g(F[0],c,F[0]),a(F[3],F[0],F[1]),0)}function de(F,B,P){const h=new Uint8Array(32),O=[i(),i(),i(),i()],X=[i(),i(),i(),i()];if(P.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(Q(X,F))return!1;const ee=new r.SHA512;ee.update(P.subarray(0,32)),ee.update(F),ee.update(B);const ve=ee.digest();return H(ve),R(O,X,ve),k(X,P.subarray(32)),G(O,X),Z(h,O),!M(P,h)}t.verify=de;function se(F){let B=[i(),i(),i(),i()];if(Q(B,F))throw new Error("Ed25519: invalid public key");let P=i(),h=i(),O=B[1];w(P,o,O),g(h,o,O),$(h,h),a(P,P,h);let X=new Uint8Array(32);return N(X,P),X}t.convertPublicKeyToX25519=se;function pe(F){const B=(0,r.hash)(F.subarray(0,32));B[0]&=248,B[31]&=127,B[31]|=64;const P=new Uint8Array(B.subarray(0,32));return(0,n.wipe)(B),P}t.convertSecretKeyToX25519=pe})(Fs);const t_="EdDSA",r_="JWT",hl=".",fl="base64url",n_="utf8",i_="utf8",s_=":",o_="did",a_="key",ma="base58btc",c_="z",u_="K36",l_=32;function ks(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function dl(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ks(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function hs(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=dl(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return ks(r)}function h_(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),c=s.charCodeAt(0);if(r[c]!==255)throw new TypeError(s+" is ambiguous");r[c]=i}var o=t.length,u=t.charAt(0),l=Math.log(o)/Math.log(256),d=Math.log(256)/Math.log(o);function m(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var T=0,N=0,M=0,S=E.length;M!==S&&E[M]===0;)M++,T++;for(var C=(S-M)*d+1>>>0,_=new Uint8Array(C);M!==S;){for(var w=E[M],g=0,a=C-1;(w!==0||g<N)&&a!==-1;a--,g++)w+=256*_[a]>>>0,_[a]=w%o>>>0,w=w/o>>>0;if(w!==0)throw new Error("Non-zero carry");N=g,M++}for(var y=C-N;y!==C&&_[y]===0;)y++;for(var $=u.repeat(T);y<C;++y)$+=t.charAt(_[y]);return $}function b(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;var T=0;if(E[T]!==" "){for(var N=0,M=0;E[T]===u;)N++,T++;for(var S=(E.length-T)*l+1>>>0,C=new Uint8Array(S);E[T];){var _=r[E.charCodeAt(T)];if(_===255)return;for(var w=0,g=S-1;(_!==0||w<M)&&g!==-1;g--,w++)_+=o*C[g]>>>0,C[g]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");M=w,T++}if(E[T]!==" "){for(var a=S-M;a!==S&&C[a]===0;)a++;for(var y=new Uint8Array(N+(S-a)),$=N;a!==S;)y[$++]=C[a++];return y}}}function x(E){var T=b(E);if(T)return T;throw new Error(`Non-${e} character`)}return{encode:m,decodeUnsafe:b,decode:x}}var f_=h_,d_=f_;const p_=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},g_=t=>new TextEncoder().encode(t),__=t=>new TextDecoder().decode(t);class y_{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class m_{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return pl(this,e)}}class w_{constructor(e){this.decoders=e}or(e){return pl(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const pl=(t,e)=>new w_({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class v_{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new y_(e,r,n),this.decoder=new m_(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const pi=({name:t,prefix:e,encode:r,decode:n})=>new v_(t,e,r,n),wn=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=d_(r,e);return pi({prefix:t,name:e,encode:n,decode:s=>p_(i(s))})},b_=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const c=new Uint8Array(s*r/8|0);let o=0,u=0,l=0;for(let d=0;d<s;++d){const m=i[t[d]];if(m===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|m,o+=r,o>=8&&(o-=8,c[l++]=255&u>>o)}if(o>=r||255&u<<8-o)throw new SyntaxError("Unexpected end of data");return c},E_=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",c=0,o=0;for(let u=0;u<t.length;++u)for(o=o<<8|t[u],c+=8;c>r;)c-=r,s+=e[i&o>>c];if(c&&(s+=e[i&o<<r-c]),n)for(;s.length*r&7;)s+="=";return s},nt=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>pi({prefix:e,name:t,encode(i){return E_(i,n,r)},decode(i){return b_(i,n,r,t)}}),x_=pi({prefix:"\0",name:"identity",encode:t=>__(t),decode:t=>g_(t)}),S_=Object.freeze(Object.defineProperty({__proto__:null,identity:x_},Symbol.toStringTag,{value:"Module"})),D_=nt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),I_=Object.freeze(Object.defineProperty({__proto__:null,base2:D_},Symbol.toStringTag,{value:"Module"})),C_=nt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),T_=Object.freeze(Object.defineProperty({__proto__:null,base8:C_},Symbol.toStringTag,{value:"Module"})),O_=wn({prefix:"9",name:"base10",alphabet:"0123456789"}),N_=Object.freeze(Object.defineProperty({__proto__:null,base10:O_},Symbol.toStringTag,{value:"Module"})),A_=nt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),R_=nt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),P_=Object.freeze(Object.defineProperty({__proto__:null,base16:A_,base16upper:R_},Symbol.toStringTag,{value:"Module"})),L_=nt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),U_=nt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),M_=nt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),$_=nt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),B_=nt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),F_=nt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),k_=nt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),q_=nt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),z_=nt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),j_=Object.freeze(Object.defineProperty({__proto__:null,base32:L_,base32hex:B_,base32hexpad:k_,base32hexpadupper:q_,base32hexupper:F_,base32pad:M_,base32padupper:$_,base32upper:U_,base32z:z_},Symbol.toStringTag,{value:"Module"})),K_=wn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),H_=wn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),W_=Object.freeze(Object.defineProperty({__proto__:null,base36:K_,base36upper:H_},Symbol.toStringTag,{value:"Module"})),V_=wn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),G_=wn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Y_=Object.freeze(Object.defineProperty({__proto__:null,base58btc:V_,base58flickr:G_},Symbol.toStringTag,{value:"Module"})),J_=nt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Q_=nt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),X_=nt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Z_=nt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),ey=Object.freeze(Object.defineProperty({__proto__:null,base64:J_,base64pad:Q_,base64url:X_,base64urlpad:Z_},Symbol.toStringTag,{value:"Module"})),gl=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),ty=gl.reduce((t,e,r)=>(t[r]=e,t),[]),ry=gl.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function ny(t){return t.reduce((e,r)=>(e+=ty[r],e),"")}function iy(t){const e=[];for(const r of t){const n=ry[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const sy=pi({prefix:"🚀",name:"base256emoji",encode:ny,decode:iy}),oy=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:sy},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const wa={...S_,...I_,...T_,...N_,...P_,...j_,...W_,...Y_,...ey,...oy};function _l(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const va=_l("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Fi=_l("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=dl(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),yl={utf8:va,"utf-8":va,hex:wa.base16,latin1:Fi,ascii:Fi,binary:Fi,...wa};function dt(t,e="utf8"){const r=yl[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function yt(t,e="utf8"){const r=yl[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ks(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function Jn(t){return dt(yt(mn(t),n_),fl)}function ml(t){const e=yt(u_,ma),r=c_+dt(hs([e,t]),ma);return[o_,a_,r].join(s_)}function ay(t){return dt(t,fl)}function cy(t){return yt([Jn(t.header),Jn(t.payload)].join(hl),i_)}function uy(t){return[Jn(t.header),Jn(t.payload),ay(t.signature)].join(hl)}function ba(t=qr.randomBytes(l_)){return Fs.generateKeyPairFromSeed(t)}async function ly(t,e,r,n,i=he.fromMiliseconds(Date.now())){const s={alg:t_,typ:r_},c=ml(n.publicKey),o=i+r,u={iss:c,sub:t,aud:e,iat:i,exp:o},l=cy({header:s,payload:u}),d=Fs.sign(n.secretKey,l);return uy({header:s,payload:u,signature:d})}var qs={},gi={};Object.defineProperty(gi,"__esModule",{value:!0});var ot=me,fs=xt,hy=20;function fy(t,e,r){for(var n=1634760805,i=857760878,s=2036477234,c=1797285236,o=r[3]<<24|r[2]<<16|r[1]<<8|r[0],u=r[7]<<24|r[6]<<16|r[5]<<8|r[4],l=r[11]<<24|r[10]<<16|r[9]<<8|r[8],d=r[15]<<24|r[14]<<16|r[13]<<8|r[12],m=r[19]<<24|r[18]<<16|r[17]<<8|r[16],b=r[23]<<24|r[22]<<16|r[21]<<8|r[20],x=r[27]<<24|r[26]<<16|r[25]<<8|r[24],E=r[31]<<24|r[30]<<16|r[29]<<8|r[28],T=e[3]<<24|e[2]<<16|e[1]<<8|e[0],N=e[7]<<24|e[6]<<16|e[5]<<8|e[4],M=e[11]<<24|e[10]<<16|e[9]<<8|e[8],S=e[15]<<24|e[14]<<16|e[13]<<8|e[12],C=n,_=i,w=s,g=c,a=o,y=u,$=l,U=d,G=m,J=b,Z=x,R=E,k=T,re=N,Y=M,K=S,W=0;W<hy;W+=2)C=C+a|0,k^=C,k=k>>>16|k<<16,G=G+k|0,a^=G,a=a>>>20|a<<12,_=_+y|0,re^=_,re=re>>>16|re<<16,J=J+re|0,y^=J,y=y>>>20|y<<12,w=w+$|0,Y^=w,Y=Y>>>16|Y<<16,Z=Z+Y|0,$^=Z,$=$>>>20|$<<12,g=g+U|0,K^=g,K=K>>>16|K<<16,R=R+K|0,U^=R,U=U>>>20|U<<12,w=w+$|0,Y^=w,Y=Y>>>24|Y<<8,Z=Z+Y|0,$^=Z,$=$>>>25|$<<7,g=g+U|0,K^=g,K=K>>>24|K<<8,R=R+K|0,U^=R,U=U>>>25|U<<7,_=_+y|0,re^=_,re=re>>>24|re<<8,J=J+re|0,y^=J,y=y>>>25|y<<7,C=C+a|0,k^=C,k=k>>>24|k<<8,G=G+k|0,a^=G,a=a>>>25|a<<7,C=C+y|0,K^=C,K=K>>>16|K<<16,Z=Z+K|0,y^=Z,y=y>>>20|y<<12,_=_+$|0,k^=_,k=k>>>16|k<<16,R=R+k|0,$^=R,$=$>>>20|$<<12,w=w+U|0,re^=w,re=re>>>16|re<<16,G=G+re|0,U^=G,U=U>>>20|U<<12,g=g+a|0,Y^=g,Y=Y>>>16|Y<<16,J=J+Y|0,a^=J,a=a>>>20|a<<12,w=w+U|0,re^=w,re=re>>>24|re<<8,G=G+re|0,U^=G,U=U>>>25|U<<7,g=g+a|0,Y^=g,Y=Y>>>24|Y<<8,J=J+Y|0,a^=J,a=a>>>25|a<<7,_=_+$|0,k^=_,k=k>>>24|k<<8,R=R+k|0,$^=R,$=$>>>25|$<<7,C=C+y|0,K^=C,K=K>>>24|K<<8,Z=Z+K|0,y^=Z,y=y>>>25|y<<7;ot.writeUint32LE(C+n|0,t,0),ot.writeUint32LE(_+i|0,t,4),ot.writeUint32LE(w+s|0,t,8),ot.writeUint32LE(g+c|0,t,12),ot.writeUint32LE(a+o|0,t,16),ot.writeUint32LE(y+u|0,t,20),ot.writeUint32LE($+l|0,t,24),ot.writeUint32LE(U+d|0,t,28),ot.writeUint32LE(G+m|0,t,32),ot.writeUint32LE(J+b|0,t,36),ot.writeUint32LE(Z+x|0,t,40),ot.writeUint32LE(R+E|0,t,44),ot.writeUint32LE(k+T|0,t,48),ot.writeUint32LE(re+N|0,t,52),ot.writeUint32LE(Y+M|0,t,56),ot.writeUint32LE(K+S|0,t,60)}function wl(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,c;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),c=s.length-e.length,s.set(e,c)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,c=i}for(var o=new Uint8Array(64),u=0;u<r.length;u+=64){fy(o,s,t);for(var l=u;l<u+64&&l<r.length;l++)n[l]=r[l]^o[l-u];py(s,0,c)}return fs.wipe(o),i===0&&fs.wipe(s),n}gi.streamXOR=wl;function dy(t,e,r,n){return n===void 0&&(n=0),fs.wipe(r),wl(t,e,r,r,n)}gi.stream=dy;function py(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var vl={},or={};Object.defineProperty(or,"__esModule",{value:!0});function gy(t,e,r){return~(t-1)&e|t-1&r}or.select=gy;function _y(t,e){return(t|0)-(e|0)-1>>>31&1}or.lessOrEqual=_y;function bl(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}or.compare=bl;function yy(t,e){return t.length===0||e.length===0?!1:bl(t,e)!==0}or.equal=yy;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=or,r=xt;t.DIGEST_LENGTH=16;var n=function(){function c(o){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var u=o[0]|o[1]<<8;this._r[0]=u&8191;var l=o[2]|o[3]<<8;this._r[1]=(u>>>13|l<<3)&8191;var d=o[4]|o[5]<<8;this._r[2]=(l>>>10|d<<6)&7939;var m=o[6]|o[7]<<8;this._r[3]=(d>>>7|m<<9)&8191;var b=o[8]|o[9]<<8;this._r[4]=(m>>>4|b<<12)&255,this._r[5]=b>>>1&8190;var x=o[10]|o[11]<<8;this._r[6]=(b>>>14|x<<2)&8191;var E=o[12]|o[13]<<8;this._r[7]=(x>>>11|E<<5)&8065;var T=o[14]|o[15]<<8;this._r[8]=(E>>>8|T<<8)&8191,this._r[9]=T>>>5&127,this._pad[0]=o[16]|o[17]<<8,this._pad[1]=o[18]|o[19]<<8,this._pad[2]=o[20]|o[21]<<8,this._pad[3]=o[22]|o[23]<<8,this._pad[4]=o[24]|o[25]<<8,this._pad[5]=o[26]|o[27]<<8,this._pad[6]=o[28]|o[29]<<8,this._pad[7]=o[30]|o[31]<<8}return c.prototype._blocks=function(o,u,l){for(var d=this._fin?0:2048,m=this._h[0],b=this._h[1],x=this._h[2],E=this._h[3],T=this._h[4],N=this._h[5],M=this._h[6],S=this._h[7],C=this._h[8],_=this._h[9],w=this._r[0],g=this._r[1],a=this._r[2],y=this._r[3],$=this._r[4],U=this._r[5],G=this._r[6],J=this._r[7],Z=this._r[8],R=this._r[9];l>=16;){var k=o[u+0]|o[u+1]<<8;m+=k&8191;var re=o[u+2]|o[u+3]<<8;b+=(k>>>13|re<<3)&8191;var Y=o[u+4]|o[u+5]<<8;x+=(re>>>10|Y<<6)&8191;var K=o[u+6]|o[u+7]<<8;E+=(Y>>>7|K<<9)&8191;var W=o[u+8]|o[u+9]<<8;T+=(K>>>4|W<<12)&8191,N+=W>>>1&8191;var j=o[u+10]|o[u+11]<<8;M+=(W>>>14|j<<2)&8191;var H=o[u+12]|o[u+13]<<8;S+=(j>>>11|H<<5)&8191;var le=o[u+14]|o[u+15]<<8;C+=(H>>>8|le<<8)&8191,_+=le>>>5|d;var Q=0,de=Q;de+=m*w,de+=b*(5*R),de+=x*(5*Z),de+=E*(5*J),de+=T*(5*G),Q=de>>>13,de&=8191,de+=N*(5*U),de+=M*(5*$),de+=S*(5*y),de+=C*(5*a),de+=_*(5*g),Q+=de>>>13,de&=8191;var se=Q;se+=m*g,se+=b*w,se+=x*(5*R),se+=E*(5*Z),se+=T*(5*J),Q=se>>>13,se&=8191,se+=N*(5*G),se+=M*(5*U),se+=S*(5*$),se+=C*(5*y),se+=_*(5*a),Q+=se>>>13,se&=8191;var pe=Q;pe+=m*a,pe+=b*g,pe+=x*w,pe+=E*(5*R),pe+=T*(5*Z),Q=pe>>>13,pe&=8191,pe+=N*(5*J),pe+=M*(5*G),pe+=S*(5*U),pe+=C*(5*$),pe+=_*(5*y),Q+=pe>>>13,pe&=8191;var F=Q;F+=m*y,F+=b*a,F+=x*g,F+=E*w,F+=T*(5*R),Q=F>>>13,F&=8191,F+=N*(5*Z),F+=M*(5*J),F+=S*(5*G),F+=C*(5*U),F+=_*(5*$),Q+=F>>>13,F&=8191;var B=Q;B+=m*$,B+=b*y,B+=x*a,B+=E*g,B+=T*w,Q=B>>>13,B&=8191,B+=N*(5*R),B+=M*(5*Z),B+=S*(5*J),B+=C*(5*G),B+=_*(5*U),Q+=B>>>13,B&=8191;var P=Q;P+=m*U,P+=b*$,P+=x*y,P+=E*a,P+=T*g,Q=P>>>13,P&=8191,P+=N*w,P+=M*(5*R),P+=S*(5*Z),P+=C*(5*J),P+=_*(5*G),Q+=P>>>13,P&=8191;var h=Q;h+=m*G,h+=b*U,h+=x*$,h+=E*y,h+=T*a,Q=h>>>13,h&=8191,h+=N*g,h+=M*w,h+=S*(5*R),h+=C*(5*Z),h+=_*(5*J),Q+=h>>>13,h&=8191;var O=Q;O+=m*J,O+=b*G,O+=x*U,O+=E*$,O+=T*y,Q=O>>>13,O&=8191,O+=N*a,O+=M*g,O+=S*w,O+=C*(5*R),O+=_*(5*Z),Q+=O>>>13,O&=8191;var X=Q;X+=m*Z,X+=b*J,X+=x*G,X+=E*U,X+=T*$,Q=X>>>13,X&=8191,X+=N*y,X+=M*a,X+=S*g,X+=C*w,X+=_*(5*R),Q+=X>>>13,X&=8191;var ee=Q;ee+=m*R,ee+=b*Z,ee+=x*J,ee+=E*G,ee+=T*U,Q=ee>>>13,ee&=8191,ee+=N*$,ee+=M*y,ee+=S*a,ee+=C*g,ee+=_*w,Q+=ee>>>13,ee&=8191,Q=(Q<<2)+Q|0,Q=Q+de|0,de=Q&8191,Q=Q>>>13,se+=Q,m=de,b=se,x=pe,E=F,T=B,N=P,M=h,S=O,C=X,_=ee,u+=16,l-=16}this._h[0]=m,this._h[1]=b,this._h[2]=x,this._h[3]=E,this._h[4]=T,this._h[5]=N,this._h[6]=M,this._h[7]=S,this._h[8]=C,this._h[9]=_},c.prototype.finish=function(o,u){u===void 0&&(u=0);var l=new Uint16Array(10),d,m,b,x;if(this._leftover){for(x=this._leftover,this._buffer[x++]=1;x<16;x++)this._buffer[x]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(d=this._h[1]>>>13,this._h[1]&=8191,x=2;x<10;x++)this._h[x]+=d,d=this._h[x]>>>13,this._h[x]&=8191;for(this._h[0]+=d*5,d=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=d,d=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=d,l[0]=this._h[0]+5,d=l[0]>>>13,l[0]&=8191,x=1;x<10;x++)l[x]=this._h[x]+d,d=l[x]>>>13,l[x]&=8191;for(l[9]-=8192,m=(d^1)-1,x=0;x<10;x++)l[x]&=m;for(m=~m,x=0;x<10;x++)this._h[x]=this._h[x]&m|l[x];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,b=this._h[0]+this._pad[0],this._h[0]=b&65535,x=1;x<8;x++)b=(this._h[x]+this._pad[x]|0)+(b>>>16)|0,this._h[x]=b&65535;return o[u+0]=this._h[0]>>>0,o[u+1]=this._h[0]>>>8,o[u+2]=this._h[1]>>>0,o[u+3]=this._h[1]>>>8,o[u+4]=this._h[2]>>>0,o[u+5]=this._h[2]>>>8,o[u+6]=this._h[3]>>>0,o[u+7]=this._h[3]>>>8,o[u+8]=this._h[4]>>>0,o[u+9]=this._h[4]>>>8,o[u+10]=this._h[5]>>>0,o[u+11]=this._h[5]>>>8,o[u+12]=this._h[6]>>>0,o[u+13]=this._h[6]>>>8,o[u+14]=this._h[7]>>>0,o[u+15]=this._h[7]>>>8,this._finished=!0,this},c.prototype.update=function(o){var u=0,l=o.length,d;if(this._leftover){d=16-this._leftover,d>l&&(d=l);for(var m=0;m<d;m++)this._buffer[this._leftover+m]=o[u+m];if(l-=d,u+=d,this._leftover+=d,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(l>=16&&(d=l-l%16,this._blocks(o,u,d),u+=d,l-=d),l){for(var m=0;m<l;m++)this._buffer[this._leftover+m]=o[u+m];this._leftover+=l}return this},c.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var o=new Uint8Array(16);return this.finish(o),o},c.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},c}();t.Poly1305=n;function i(c,o){var u=new n(c);u.update(o);var l=u.digest();return u.clean(),l}t.oneTimeAuth=i;function s(c,o){return c.length!==t.DIGEST_LENGTH||o.length!==t.DIGEST_LENGTH?!1:e.equal(c,o)}t.equal=s})(vl);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=gi,r=vl,n=xt,i=me,s=or;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var c=new Uint8Array(16),o=function(){function u(l){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,l.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(l)}return u.prototype.seal=function(l,d,m,b){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var x=new Uint8Array(16);x.set(l,x.length-l.length);var E=new Uint8Array(32);e.stream(this._key,x,E,4);var T=d.length+this.tagLength,N;if(b){if(b.length!==T)throw new Error("ChaCha20Poly1305: incorrect destination length");N=b}else N=new Uint8Array(T);return e.streamXOR(this._key,x,d,N,4),this._authenticate(N.subarray(N.length-this.tagLength,N.length),E,N.subarray(0,N.length-this.tagLength),m),n.wipe(x),N},u.prototype.open=function(l,d,m,b){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(d.length<this.tagLength)return null;var x=new Uint8Array(16);x.set(l,x.length-l.length);var E=new Uint8Array(32);e.stream(this._key,x,E,4);var T=new Uint8Array(this.tagLength);if(this._authenticate(T,E,d.subarray(0,d.length-this.tagLength),m),!s.equal(T,d.subarray(d.length-this.tagLength,d.length)))return null;var N=d.length-this.tagLength,M;if(b){if(b.length!==N)throw new Error("ChaCha20Poly1305: incorrect destination length");M=b}else M=new Uint8Array(N);return e.streamXOR(this._key,x,d.subarray(0,d.length-this.tagLength),M,4),n.wipe(x),M},u.prototype.clean=function(){return n.wipe(this._key),this},u.prototype._authenticate=function(l,d,m,b){var x=new r.Poly1305(d);b&&(x.update(b),b.length%16>0&&x.update(c.subarray(b.length%16))),x.update(m),m.length%16>0&&x.update(c.subarray(m.length%16));var E=new Uint8Array(8);b&&i.writeUint64LE(b.length,E),x.update(E),i.writeUint64LE(m.length,E),x.update(E);for(var T=x.digest(),N=0;N<T.length;N++)l[N]=T[N];x.clean(),n.wipe(T),n.wipe(E)},u}();t.ChaCha20Poly1305=o})(qs);var El={},vn={},zs={};Object.defineProperty(zs,"__esModule",{value:!0});function my(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}zs.isSerializableHash=my;Object.defineProperty(vn,"__esModule",{value:!0});var Pt=zs,wy=or,vy=xt,xl=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),Pt.isSerializableHash(this._inner)&&Pt.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),vy.wipe(n)}return t.prototype.reset=function(){if(!Pt.isSerializableHash(this._inner)||!Pt.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){Pt.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Pt.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!Pt.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!Pt.isSerializableHash(this._inner)||!Pt.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!Pt.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();vn.HMAC=xl;function by(t,e,r){var n=new xl(t,e);n.update(r);var i=n.digest();return n.clean(),i}vn.hmac=by;vn.equal=wy.equal;Object.defineProperty(El,"__esModule",{value:!0});var Ea=vn,xa=xt,Ey=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=Ea.hmac(this._hash,n,r);this._hmac=new Ea.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),xa.wipe(this._buffer),xa.wipe(this._counter),this._bufpos=0},t}(),xy=El.HKDF=Ey,_i={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=me,r=xt;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function o(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return o.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},o.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},o.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},o.prototype.update=function(u,l){if(l===void 0&&(l=u.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var d=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&l>0;)this._buffer[this._bufferLength++]=u[d++],l--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(d=s(this._temp,this._state,u,d,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=u[d++],l--;return this},o.prototype.finish=function(u){if(!this._finished){var l=this._bytesHashed,d=this._bufferLength,m=l/536870912|0,b=l<<3,x=l%64<56?64:128;this._buffer[d]=128;for(var E=d+1;E<x-8;E++)this._buffer[E]=0;e.writeUint32BE(m,this._buffer,x-8),e.writeUint32BE(b,this._buffer,x-4),s(this._temp,this._state,this._buffer,0,x),this._finished=!0}for(var E=0;E<this.digestLength/4;E++)e.writeUint32BE(this._state[E],u,E*4);return this},o.prototype.digest=function(){var u=new Uint8Array(this.digestLength);return this.finish(u),u},o.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},o.prototype.restoreState=function(u){return this._state.set(u.state),this._bufferLength=u.bufferLength,u.buffer&&this._buffer.set(u.buffer),this._bytesHashed=u.bytesHashed,this._finished=!1,this},o.prototype.cleanSavedState=function(u){r.wipe(u.state),u.buffer&&r.wipe(u.buffer),u.bufferLength=0,u.bytesHashed=0},o}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(o,u,l,d,m){for(;m>=64;){for(var b=u[0],x=u[1],E=u[2],T=u[3],N=u[4],M=u[5],S=u[6],C=u[7],_=0;_<16;_++){var w=d+_*4;o[_]=e.readUint32BE(l,w)}for(var _=16;_<64;_++){var g=o[_-2],a=(g>>>17|g<<15)^(g>>>19|g<<13)^g>>>10;g=o[_-15];var y=(g>>>7|g<<25)^(g>>>18|g<<14)^g>>>3;o[_]=(a+o[_-7]|0)+(y+o[_-16]|0)}for(var _=0;_<64;_++){var a=(((N>>>6|N<<26)^(N>>>11|N<<21)^(N>>>25|N<<7))+(N&M^~N&S)|0)+(C+(i[_]+o[_]|0)|0)|0,y=((b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10))+(b&x^b&E^x&E)|0;C=S,S=M,M=N,N=T+a|0,T=E,E=x,x=b,b=a+y|0}u[0]+=b,u[1]+=x,u[2]+=E,u[3]+=T,u[4]+=N,u[5]+=M,u[6]+=S,u[7]+=C,d+=64,m-=64}return d}function c(o){var u=new n;u.update(o);var l=u.digest();return u.clean(),l}t.hash=c})(_i);var js={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=qr,r=xt;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n(_){const w=new Float64Array(16);if(_)for(let g=0;g<_.length;g++)w[g]=_[g];return w}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function c(_){let w=1;for(let g=0;g<16;g++){let a=_[g]+w+65535;w=Math.floor(a/65536),_[g]=a-w*65536}_[0]+=w-1+37*(w-1)}function o(_,w,g){const a=~(g-1);for(let y=0;y<16;y++){const $=a&(_[y]^w[y]);_[y]^=$,w[y]^=$}}function u(_,w){const g=n(),a=n();for(let y=0;y<16;y++)a[y]=w[y];c(a),c(a),c(a);for(let y=0;y<2;y++){g[0]=a[0]-65517;for(let U=1;U<15;U++)g[U]=a[U]-65535-(g[U-1]>>16&1),g[U-1]&=65535;g[15]=a[15]-32767-(g[14]>>16&1);const $=g[15]>>16&1;g[14]&=65535,o(a,g,1-$)}for(let y=0;y<16;y++)_[2*y]=a[y]&255,_[2*y+1]=a[y]>>8}function l(_,w){for(let g=0;g<16;g++)_[g]=w[2*g]+(w[2*g+1]<<8);_[15]&=32767}function d(_,w,g){for(let a=0;a<16;a++)_[a]=w[a]+g[a]}function m(_,w,g){for(let a=0;a<16;a++)_[a]=w[a]-g[a]}function b(_,w,g){let a,y,$=0,U=0,G=0,J=0,Z=0,R=0,k=0,re=0,Y=0,K=0,W=0,j=0,H=0,le=0,Q=0,de=0,se=0,pe=0,F=0,B=0,P=0,h=0,O=0,X=0,ee=0,ve=0,xe=0,v=0,f=0,p=0,I=0,A=g[0],q=g[1],z=g[2],ne=g[3],oe=g[4],ue=g[5],fe=g[6],ae=g[7],ye=g[8],be=g[9],_e=g[10],De=g[11],Ie=g[12],Te=g[13],Oe=g[14],Ce=g[15];a=w[0],$+=a*A,U+=a*q,G+=a*z,J+=a*ne,Z+=a*oe,R+=a*ue,k+=a*fe,re+=a*ae,Y+=a*ye,K+=a*be,W+=a*_e,j+=a*De,H+=a*Ie,le+=a*Te,Q+=a*Oe,de+=a*Ce,a=w[1],U+=a*A,G+=a*q,J+=a*z,Z+=a*ne,R+=a*oe,k+=a*ue,re+=a*fe,Y+=a*ae,K+=a*ye,W+=a*be,j+=a*_e,H+=a*De,le+=a*Ie,Q+=a*Te,de+=a*Oe,se+=a*Ce,a=w[2],G+=a*A,J+=a*q,Z+=a*z,R+=a*ne,k+=a*oe,re+=a*ue,Y+=a*fe,K+=a*ae,W+=a*ye,j+=a*be,H+=a*_e,le+=a*De,Q+=a*Ie,de+=a*Te,se+=a*Oe,pe+=a*Ce,a=w[3],J+=a*A,Z+=a*q,R+=a*z,k+=a*ne,re+=a*oe,Y+=a*ue,K+=a*fe,W+=a*ae,j+=a*ye,H+=a*be,le+=a*_e,Q+=a*De,de+=a*Ie,se+=a*Te,pe+=a*Oe,F+=a*Ce,a=w[4],Z+=a*A,R+=a*q,k+=a*z,re+=a*ne,Y+=a*oe,K+=a*ue,W+=a*fe,j+=a*ae,H+=a*ye,le+=a*be,Q+=a*_e,de+=a*De,se+=a*Ie,pe+=a*Te,F+=a*Oe,B+=a*Ce,a=w[5],R+=a*A,k+=a*q,re+=a*z,Y+=a*ne,K+=a*oe,W+=a*ue,j+=a*fe,H+=a*ae,le+=a*ye,Q+=a*be,de+=a*_e,se+=a*De,pe+=a*Ie,F+=a*Te,B+=a*Oe,P+=a*Ce,a=w[6],k+=a*A,re+=a*q,Y+=a*z,K+=a*ne,W+=a*oe,j+=a*ue,H+=a*fe,le+=a*ae,Q+=a*ye,de+=a*be,se+=a*_e,pe+=a*De,F+=a*Ie,B+=a*Te,P+=a*Oe,h+=a*Ce,a=w[7],re+=a*A,Y+=a*q,K+=a*z,W+=a*ne,j+=a*oe,H+=a*ue,le+=a*fe,Q+=a*ae,de+=a*ye,se+=a*be,pe+=a*_e,F+=a*De,B+=a*Ie,P+=a*Te,h+=a*Oe,O+=a*Ce,a=w[8],Y+=a*A,K+=a*q,W+=a*z,j+=a*ne,H+=a*oe,le+=a*ue,Q+=a*fe,de+=a*ae,se+=a*ye,pe+=a*be,F+=a*_e,B+=a*De,P+=a*Ie,h+=a*Te,O+=a*Oe,X+=a*Ce,a=w[9],K+=a*A,W+=a*q,j+=a*z,H+=a*ne,le+=a*oe,Q+=a*ue,de+=a*fe,se+=a*ae,pe+=a*ye,F+=a*be,B+=a*_e,P+=a*De,h+=a*Ie,O+=a*Te,X+=a*Oe,ee+=a*Ce,a=w[10],W+=a*A,j+=a*q,H+=a*z,le+=a*ne,Q+=a*oe,de+=a*ue,se+=a*fe,pe+=a*ae,F+=a*ye,B+=a*be,P+=a*_e,h+=a*De,O+=a*Ie,X+=a*Te,ee+=a*Oe,ve+=a*Ce,a=w[11],j+=a*A,H+=a*q,le+=a*z,Q+=a*ne,de+=a*oe,se+=a*ue,pe+=a*fe,F+=a*ae,B+=a*ye,P+=a*be,h+=a*_e,O+=a*De,X+=a*Ie,ee+=a*Te,ve+=a*Oe,xe+=a*Ce,a=w[12],H+=a*A,le+=a*q,Q+=a*z,de+=a*ne,se+=a*oe,pe+=a*ue,F+=a*fe,B+=a*ae,P+=a*ye,h+=a*be,O+=a*_e,X+=a*De,ee+=a*Ie,ve+=a*Te,xe+=a*Oe,v+=a*Ce,a=w[13],le+=a*A,Q+=a*q,de+=a*z,se+=a*ne,pe+=a*oe,F+=a*ue,B+=a*fe,P+=a*ae,h+=a*ye,O+=a*be,X+=a*_e,ee+=a*De,ve+=a*Ie,xe+=a*Te,v+=a*Oe,f+=a*Ce,a=w[14],Q+=a*A,de+=a*q,se+=a*z,pe+=a*ne,F+=a*oe,B+=a*ue,P+=a*fe,h+=a*ae,O+=a*ye,X+=a*be,ee+=a*_e,ve+=a*De,xe+=a*Ie,v+=a*Te,f+=a*Oe,p+=a*Ce,a=w[15],de+=a*A,se+=a*q,pe+=a*z,F+=a*ne,B+=a*oe,P+=a*ue,h+=a*fe,O+=a*ae,X+=a*ye,ee+=a*be,ve+=a*_e,xe+=a*De,v+=a*Ie,f+=a*Te,p+=a*Oe,I+=a*Ce,$+=38*se,U+=38*pe,G+=38*F,J+=38*B,Z+=38*P,R+=38*h,k+=38*O,re+=38*X,Y+=38*ee,K+=38*ve,W+=38*xe,j+=38*v,H+=38*f,le+=38*p,Q+=38*I,y=1,a=$+y+65535,y=Math.floor(a/65536),$=a-y*65536,a=U+y+65535,y=Math.floor(a/65536),U=a-y*65536,a=G+y+65535,y=Math.floor(a/65536),G=a-y*65536,a=J+y+65535,y=Math.floor(a/65536),J=a-y*65536,a=Z+y+65535,y=Math.floor(a/65536),Z=a-y*65536,a=R+y+65535,y=Math.floor(a/65536),R=a-y*65536,a=k+y+65535,y=Math.floor(a/65536),k=a-y*65536,a=re+y+65535,y=Math.floor(a/65536),re=a-y*65536,a=Y+y+65535,y=Math.floor(a/65536),Y=a-y*65536,a=K+y+65535,y=Math.floor(a/65536),K=a-y*65536,a=W+y+65535,y=Math.floor(a/65536),W=a-y*65536,a=j+y+65535,y=Math.floor(a/65536),j=a-y*65536,a=H+y+65535,y=Math.floor(a/65536),H=a-y*65536,a=le+y+65535,y=Math.floor(a/65536),le=a-y*65536,a=Q+y+65535,y=Math.floor(a/65536),Q=a-y*65536,a=de+y+65535,y=Math.floor(a/65536),de=a-y*65536,$+=y-1+37*(y-1),y=1,a=$+y+65535,y=Math.floor(a/65536),$=a-y*65536,a=U+y+65535,y=Math.floor(a/65536),U=a-y*65536,a=G+y+65535,y=Math.floor(a/65536),G=a-y*65536,a=J+y+65535,y=Math.floor(a/65536),J=a-y*65536,a=Z+y+65535,y=Math.floor(a/65536),Z=a-y*65536,a=R+y+65535,y=Math.floor(a/65536),R=a-y*65536,a=k+y+65535,y=Math.floor(a/65536),k=a-y*65536,a=re+y+65535,y=Math.floor(a/65536),re=a-y*65536,a=Y+y+65535,y=Math.floor(a/65536),Y=a-y*65536,a=K+y+65535,y=Math.floor(a/65536),K=a-y*65536,a=W+y+65535,y=Math.floor(a/65536),W=a-y*65536,a=j+y+65535,y=Math.floor(a/65536),j=a-y*65536,a=H+y+65535,y=Math.floor(a/65536),H=a-y*65536,a=le+y+65535,y=Math.floor(a/65536),le=a-y*65536,a=Q+y+65535,y=Math.floor(a/65536),Q=a-y*65536,a=de+y+65535,y=Math.floor(a/65536),de=a-y*65536,$+=y-1+37*(y-1),_[0]=$,_[1]=U,_[2]=G,_[3]=J,_[4]=Z,_[5]=R,_[6]=k,_[7]=re,_[8]=Y,_[9]=K,_[10]=W,_[11]=j,_[12]=H,_[13]=le,_[14]=Q,_[15]=de}function x(_,w){b(_,w,w)}function E(_,w){const g=n();for(let a=0;a<16;a++)g[a]=w[a];for(let a=253;a>=0;a--)x(g,g),a!==2&&a!==4&&b(g,g,w);for(let a=0;a<16;a++)_[a]=g[a]}function T(_,w){const g=new Uint8Array(32),a=new Float64Array(80),y=n(),$=n(),U=n(),G=n(),J=n(),Z=n();for(let Y=0;Y<31;Y++)g[Y]=_[Y];g[31]=_[31]&127|64,g[0]&=248,l(a,w);for(let Y=0;Y<16;Y++)$[Y]=a[Y];y[0]=G[0]=1;for(let Y=254;Y>=0;--Y){const K=g[Y>>>3]>>>(Y&7)&1;o(y,$,K),o(U,G,K),d(J,y,U),m(y,y,U),d(U,$,G),m($,$,G),x(G,J),x(Z,y),b(y,U,y),b(U,$,J),d(J,y,U),m(y,y,U),x($,y),m(U,G,Z),b(y,U,s),d(y,y,G),b(U,U,y),b(y,G,Z),b(G,$,a),x($,J),o(y,$,K),o(U,G,K)}for(let Y=0;Y<16;Y++)a[Y+16]=y[Y],a[Y+32]=U[Y],a[Y+48]=$[Y],a[Y+64]=G[Y];const R=a.subarray(32),k=a.subarray(16);E(R,R),b(k,k,R);const re=new Uint8Array(32);return u(re,k),re}t.scalarMult=T;function N(_){return T(_,i)}t.scalarMultBase=N;function M(_){if(_.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const w=new Uint8Array(_);return{publicKey:N(w),secretKey:w}}t.generateKeyPairFromSeed=M;function S(_){const w=(0,e.randomBytes)(32,_),g=M(w);return(0,r.wipe)(w),g}t.generateKeyPair=S;function C(_,w,g=!1){if(_.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(w.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const a=T(_,w);if(g){let y=0;for(let $=0;$<a.length;$++)y|=a[$];if(y===0)throw new Error("X25519: invalid shared key")}return a}t.sharedKey=C})(js);var Sa=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},Sy=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),Dy=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Iy=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),Cy=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Ty=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Oy=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Ny=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Da=3,Ay=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Oy]],Ia=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Ry(t){return t?Ca(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Ty:typeof navigator<"u"?Ca(navigator.userAgent):Uy()}function Py(t){return t!==""&&Ay.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function Ca(t){var e=Py(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Cy;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<Da&&(i=Sa(Sa([],i,!0),My(Da-i.length),!0)):i=[];var s=i.join("."),c=Ly(t),o=Ny.exec(t);return o&&o[1]?new Iy(r,s,c,o[1]):new Sy(r,s,c)}function Ly(t){for(var e=0,r=Ia.length;e<r;e++){var n=Ia[e],i=n[0],s=n[1],c=s.exec(t);if(c)return i}return null}function Uy(){var t=typeof process<"u"&&process.version;return t?new Dy(process.version.slice(1)):null}function My(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.getLocalStorage=Ae.getLocalStorageOrThrow=Ae.getCrypto=Ae.getCryptoOrThrow=Sl=Ae.getLocation=Ae.getLocationOrThrow=Hs=Ae.getNavigator=Ae.getNavigatorOrThrow=Ks=Ae.getDocument=Ae.getDocumentOrThrow=Ae.getFromWindowOrThrow=Ae.getFromWindow=void 0;function br(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Ae.getFromWindow=br;function zr(t){const e=br(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Ae.getFromWindowOrThrow=zr;function $y(){return zr("document")}Ae.getDocumentOrThrow=$y;function By(){return br("document")}var Ks=Ae.getDocument=By;function Fy(){return zr("navigator")}Ae.getNavigatorOrThrow=Fy;function ky(){return br("navigator")}var Hs=Ae.getNavigator=ky;function qy(){return zr("location")}Ae.getLocationOrThrow=qy;function zy(){return br("location")}var Sl=Ae.getLocation=zy;function jy(){return zr("crypto")}Ae.getCryptoOrThrow=jy;function Ky(){return br("crypto")}Ae.getCrypto=Ky;function Hy(){return zr("localStorage")}Ae.getLocalStorageOrThrow=Hy;function Wy(){return br("localStorage")}Ae.getLocalStorage=Wy;var Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});var Dl=Ws.getWindowMetadata=void 0;const Ta=Ae;function Vy(){let t,e;try{t=Ta.getDocumentOrThrow(),e=Ta.getLocationOrThrow()}catch{return null}function r(){const m=t.getElementsByTagName("link"),b=[];for(let x=0;x<m.length;x++){const E=m[x],T=E.getAttribute("rel");if(T&&T.toLowerCase().indexOf("icon")>-1){const N=E.getAttribute("href");if(N)if(N.toLowerCase().indexOf("https:")===-1&&N.toLowerCase().indexOf("http:")===-1&&N.indexOf("//")!==0){let M=e.protocol+"//"+e.host;if(N.indexOf("/")===0)M+=N;else{const S=e.pathname.split("/");S.pop();const C=S.join("/");M+=C+"/"+N}b.push(M)}else if(N.indexOf("//")===0){const M=e.protocol+N;b.push(M)}else b.push(N)}}return b}function n(...m){const b=t.getElementsByTagName("meta");for(let x=0;x<b.length;x++){const E=b[x],T=["itemprop","property","name"].map(N=>E.getAttribute(N)).filter(N=>N?m.includes(N):!1);if(T.length&&T){const N=E.getAttribute("content");if(N)return N}}return""}function i(){let m=n("name","og:site_name","og:title","twitter:title");return m||(m=t.title),m}function s(){return n("description","og:description","twitter:description","keywords")}const c=i(),o=s(),u=e.origin,l=r();return{description:o,url:u,icons:l,name:c}}Dl=Ws.getWindowMetadata=Vy;var hn={},Gy=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Il="%[a-f0-9]{2}",Oa=new RegExp("("+Il+")|([^%]+?)","gi"),Na=new RegExp("("+Il+")+","gi");function ds(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],ds(r),ds(n))}function Yy(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(Oa)||[],r=1;r<e.length;r++)t=ds(e,r).join(""),e=t.match(Oa)||[];return t}}function Jy(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=Na.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=Yy(r[0]);n!==r[0]&&(e[r[0]]=n)}r=Na.exec(t)}e["%C2"]="�";for(var i=Object.keys(e),s=0;s<i.length;s++){var c=i[s];t=t.replace(new RegExp(c,"g"),e[c])}return t}var Qy=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return Jy(t)}},Xy=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},Zy=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),s=0;s<n.length;s++){var c=n[s],o=t[c];(i?e.indexOf(c)!==-1:e(c,o,t))&&(r[c]=o)}return r};(function(t){const e=Gy,r=Qy,n=Xy,i=Zy,s=S=>S==null,c=Symbol("encodeFragmentIdentifier");function o(S){switch(S.arrayFormat){case"index":return C=>(_,w)=>{const g=_.length;return w===void 0||S.skipNull&&w===null||S.skipEmptyString&&w===""?_:w===null?[..._,[d(C,S),"[",g,"]"].join("")]:[..._,[d(C,S),"[",d(g,S),"]=",d(w,S)].join("")]};case"bracket":return C=>(_,w)=>w===void 0||S.skipNull&&w===null||S.skipEmptyString&&w===""?_:w===null?[..._,[d(C,S),"[]"].join("")]:[..._,[d(C,S),"[]=",d(w,S)].join("")];case"colon-list-separator":return C=>(_,w)=>w===void 0||S.skipNull&&w===null||S.skipEmptyString&&w===""?_:w===null?[..._,[d(C,S),":list="].join("")]:[..._,[d(C,S),":list=",d(w,S)].join("")];case"comma":case"separator":case"bracket-separator":{const C=S.arrayFormat==="bracket-separator"?"[]=":"=";return _=>(w,g)=>g===void 0||S.skipNull&&g===null||S.skipEmptyString&&g===""?w:(g=g===null?"":g,w.length===0?[[d(_,S),C,d(g,S)].join("")]:[[w,d(g,S)].join(S.arrayFormatSeparator)])}default:return C=>(_,w)=>w===void 0||S.skipNull&&w===null||S.skipEmptyString&&w===""?_:w===null?[..._,d(C,S)]:[..._,[d(C,S),"=",d(w,S)].join("")]}}function u(S){let C;switch(S.arrayFormat){case"index":return(_,w,g)=>{if(C=/\[(\d*)\]$/.exec(_),_=_.replace(/\[\d*\]$/,""),!C){g[_]=w;return}g[_]===void 0&&(g[_]={}),g[_][C[1]]=w};case"bracket":return(_,w,g)=>{if(C=/(\[\])$/.exec(_),_=_.replace(/\[\]$/,""),!C){g[_]=w;return}if(g[_]===void 0){g[_]=[w];return}g[_]=[].concat(g[_],w)};case"colon-list-separator":return(_,w,g)=>{if(C=/(:list)$/.exec(_),_=_.replace(/:list$/,""),!C){g[_]=w;return}if(g[_]===void 0){g[_]=[w];return}g[_]=[].concat(g[_],w)};case"comma":case"separator":return(_,w,g)=>{const a=typeof w=="string"&&w.includes(S.arrayFormatSeparator),y=typeof w=="string"&&!a&&m(w,S).includes(S.arrayFormatSeparator);w=y?m(w,S):w;const $=a||y?w.split(S.arrayFormatSeparator).map(U=>m(U,S)):w===null?w:m(w,S);g[_]=$};case"bracket-separator":return(_,w,g)=>{const a=/(\[\])$/.test(_);if(_=_.replace(/\[\]$/,""),!a){g[_]=w&&m(w,S);return}const y=w===null?[]:w.split(S.arrayFormatSeparator).map($=>m($,S));if(g[_]===void 0){g[_]=y;return}g[_]=[].concat(g[_],y)};default:return(_,w,g)=>{if(g[_]===void 0){g[_]=w;return}g[_]=[].concat(g[_],w)}}}function l(S){if(typeof S!="string"||S.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(S,C){return C.encode?C.strict?e(S):encodeURIComponent(S):S}function m(S,C){return C.decode?r(S):S}function b(S){return Array.isArray(S)?S.sort():typeof S=="object"?b(Object.keys(S)).sort((C,_)=>Number(C)-Number(_)).map(C=>S[C]):S}function x(S){const C=S.indexOf("#");return C!==-1&&(S=S.slice(0,C)),S}function E(S){let C="";const _=S.indexOf("#");return _!==-1&&(C=S.slice(_)),C}function T(S){S=x(S);const C=S.indexOf("?");return C===-1?"":S.slice(C+1)}function N(S,C){return C.parseNumbers&&!Number.isNaN(Number(S))&&typeof S=="string"&&S.trim()!==""?S=Number(S):C.parseBooleans&&S!==null&&(S.toLowerCase()==="true"||S.toLowerCase()==="false")&&(S=S.toLowerCase()==="true"),S}function M(S,C){C=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},C),l(C.arrayFormatSeparator);const _=u(C),w=Object.create(null);if(typeof S!="string"||(S=S.trim().replace(/^[?#&]/,""),!S))return w;for(const g of S.split("&")){if(g==="")continue;let[a,y]=n(C.decode?g.replace(/\+/g," "):g,"=");y=y===void 0?null:["comma","separator","bracket-separator"].includes(C.arrayFormat)?y:m(y,C),_(m(a,C),y,w)}for(const g of Object.keys(w)){const a=w[g];if(typeof a=="object"&&a!==null)for(const y of Object.keys(a))a[y]=N(a[y],C);else w[g]=N(a,C)}return C.sort===!1?w:(C.sort===!0?Object.keys(w).sort():Object.keys(w).sort(C.sort)).reduce((g,a)=>{const y=w[a];return y&&typeof y=="object"&&!Array.isArray(y)?g[a]=b(y):g[a]=y,g},Object.create(null))}t.extract=T,t.parse=M,t.stringify=(S,C)=>{if(!S)return"";C=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},C),l(C.arrayFormatSeparator);const _=y=>C.skipNull&&s(S[y])||C.skipEmptyString&&S[y]==="",w=o(C),g={};for(const y of Object.keys(S))_(y)||(g[y]=S[y]);const a=Object.keys(g);return C.sort!==!1&&a.sort(C.sort),a.map(y=>{const $=S[y];return $===void 0?"":$===null?d(y,C):Array.isArray($)?$.length===0&&C.arrayFormat==="bracket-separator"?d(y,C)+"[]":$.reduce(w(y),[]).join("&"):d(y,C)+"="+d($,C)}).filter(y=>y.length>0).join("&")},t.parseUrl=(S,C)=>{C=Object.assign({decode:!0},C);const[_,w]=n(S,"#");return Object.assign({url:_.split("?")[0]||"",query:M(T(S),C)},C&&C.parseFragmentIdentifier&&w?{fragmentIdentifier:m(w,C)}:{})},t.stringifyUrl=(S,C)=>{C=Object.assign({encode:!0,strict:!0,[c]:!0},C);const _=x(S.url).split("?")[0]||"",w=t.extract(S.url),g=t.parse(w,{sort:!1}),a=Object.assign(g,S.query);let y=t.stringify(a,C);y&&(y=`?${y}`);let $=E(S.url);return S.fragmentIdentifier&&($=`#${C[c]?d(S.fragmentIdentifier,C):S.fragmentIdentifier}`),`${_}${y}${$}`},t.pick=(S,C,_)=>{_=Object.assign({parseFragmentIdentifier:!0,[c]:!1},_);const{url:w,query:g,fragmentIdentifier:a}=t.parseUrl(S,_);return t.stringifyUrl({url:w,query:i(g,C),fragmentIdentifier:a},_)},t.exclude=(S,C,_)=>{const w=Array.isArray(C)?g=>!C.includes(g):(g,a)=>!C(g,a);return t.pick(S,w,_)}})(hn);const em={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}},tm=":";function rm(t){const[e,r,n]=t.split(tm);return{namespace:e,reference:r,address:n}}function Cl(t,e){return t.includes(":")?[t]:e.chains||[]}const Tl="base10",ft="base16",ps="base64pad",Vs="utf8",Ol=0,Er=1,nm=0,Aa=1,gs=12,Gs=32;function im(){const t=js.generateKeyPair();return{privateKey:dt(t.secretKey,ft),publicKey:dt(t.publicKey,ft)}}function _s(){const t=qr.randomBytes(Gs);return dt(t,ft)}function sm(t,e){const r=js.sharedKey(yt(t,ft),yt(e,ft),!0),n=new xy(_i.SHA256,r).expand(Gs);return dt(n,ft)}function om(t){const e=_i.hash(yt(t,ft));return dt(e,ft)}function Or(t){const e=_i.hash(yt(t,Vs));return dt(e,ft)}function am(t){return yt(`${t}`,Tl)}function bn(t){return Number(dt(t,Tl))}function cm(t){const e=am(typeof t.type<"u"?t.type:Ol);if(bn(e)===Er&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?yt(t.senderPublicKey,ft):void 0,n=typeof t.iv<"u"?yt(t.iv,ft):qr.randomBytes(gs),i=new qs.ChaCha20Poly1305(yt(t.symKey,ft)).seal(n,yt(t.message,Vs));return lm({type:e,sealed:i,iv:n,senderPublicKey:r})}function um(t){const e=new qs.ChaCha20Poly1305(yt(t.symKey,ft)),{sealed:r,iv:n}=Qn(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return dt(i,Vs)}function lm(t){if(bn(t.type)===Er){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return dt(hs([t.type,t.senderPublicKey,t.iv,t.sealed]),ps)}return dt(hs([t.type,t.iv,t.sealed]),ps)}function Qn(t){const e=yt(t,ps),r=e.slice(nm,Aa),n=Aa;if(bn(r)===Er){const o=n+Gs,u=o+gs,l=e.slice(n,o),d=e.slice(o,u),m=e.slice(u);return{type:r,sealed:m,iv:d,senderPublicKey:l}}const i=n+gs,s=e.slice(n,i),c=e.slice(i);return{type:r,sealed:c,iv:s}}function hm(t,e){const r=Qn(t);return Nl({type:bn(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?dt(r.senderPublicKey,ft):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Nl(t){const e=(t==null?void 0:t.type)||Ol;if(e===Er){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function Ra(t){return t.type===Er&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var fm=Object.defineProperty,Pa=Object.getOwnPropertySymbols,dm=Object.prototype.hasOwnProperty,pm=Object.prototype.propertyIsEnumerable,La=(t,e,r)=>e in t?fm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ua=(t,e)=>{for(var r in e||(e={}))dm.call(e,r)&&La(t,r,e[r]);if(Pa)for(var r of Pa(e))pm.call(e,r)&&La(t,r,e[r]);return t};const gm="ReactNative",bt={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},_m="js";function Ys(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function jr(){return!Ks()&&!!Hs()&&navigator.product===gm}function Kr(){return!Ys()&&!!Hs()&&!!Ks()}function En(){return jr()?bt.reactNative:Ys()?bt.node:Kr()?bt.browser:bt.unknown}function ym(){var t;try{return jr()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function mm(t,e){let r=hn.parse(t);return r=Ua(Ua({},r),e),t=hn.stringify(r),t}function wm(){return Dl()||{name:"",description:"",url:"",icons:[""]}}function vm(){if(En()===bt.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=Ry();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function bm(){var t;const e=En();return e===bt.browser?[e,((t=Sl())==null?void 0:t.host)||"unknown"].join(":"):e}function Em(t,e,r){const n=vm(),i=bm();return[[t,e].join("-"),[_m,r].join("-"),n,i].join("/")}function xm({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:c,bundleId:o}){const u=r.split("?"),l=Em(t,e,n),d={auth:i,ua:l,projectId:s,useOnCloseEvent:c||void 0,origin:o||void 0},m=mm(u[1]||"",d);return u[0]+"?"+m}function _r(t,e){return t.filter(r=>e.includes(r)).length===t.length}function Al(t){return Object.fromEntries(t.entries())}function Rl(t){return new Map(Object.entries(t))}function Ir(t=he.FIVE_MINUTES,e){const r=he.toMiliseconds(t||he.FIVE_MINUTES);let n,i,s;return{resolve:c=>{s&&n&&(clearTimeout(s),n(c))},reject:c=>{s&&i&&(clearTimeout(s),i(c))},done:()=>new Promise((c,o)=>{s=setTimeout(()=>{o(new Error(e))},r),n=c,i=o})}}function fn(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const c=await t;n(c)}catch(c){i(c)}clearTimeout(s)})}function Pl(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Sm(t){return Pl("topic",t)}function Dm(t){return Pl("id",t)}function Ll(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function vt(t,e){return he.fromMiliseconds((e||Date.now())+he.toMiliseconds(t))}function er(t){return Date.now()>=he.toMiliseconds(t)}function Fe(t,e){return`${t}${e?`:${e}`:""}`}async function Im({id:t,topic:e,wcDeepLink:r}){try{if(!r)return;const n=typeof r=="string"?JSON.parse(r):r;let i=n==null?void 0:n.href;if(typeof i!="string")return;i.endsWith("/")&&(i=i.slice(0,-1));const s=`${i}/wc?requestId=${t}&sessionTopic=${e}`,c=En();c===bt.browser?s.startsWith("https://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):c===bt.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(n){console.error(n)}}async function Cm(t,e){try{return await t.getItem(e)||(Kr()?localStorage.getItem(e):void 0)}catch(r){console.error(r)}}const Tm="irn";function ys(t){return(t==null?void 0:t.relay)||{protocol:Tm}}function zn(t){const e=em[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var Om=Object.defineProperty,Nm=Object.defineProperties,Am=Object.getOwnPropertyDescriptors,Ma=Object.getOwnPropertySymbols,Rm=Object.prototype.hasOwnProperty,Pm=Object.prototype.propertyIsEnumerable,$a=(t,e,r)=>e in t?Om(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Lm=(t,e)=>{for(var r in e||(e={}))Rm.call(e,r)&&$a(t,r,e[r]);if(Ma)for(var r of Ma(e))Pm.call(e,r)&&$a(t,r,e[r]);return t},Um=(t,e)=>Nm(t,Am(e));function Mm(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),c=t[i];r[s]=c}}),r}function Ba(t){t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",c=hn.parse(s);return{protocol:n,topic:$m(i[0]),version:parseInt(i[1],10),symKey:c.symKey,relay:Mm(c),expiryTimestamp:c.expiryTimestamp?parseInt(c.expiryTimestamp,10):void 0}}function $m(t){return t.startsWith("//")?t.substring(2):t}function Bm(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=r+e+i;t[i]&&(n[s]=t[i])}),n}function Fm(t){return`${t.protocol}:${t.topic}@${t.version}?`+hn.stringify(Um(Lm({symKey:t.symKey},Bm(t.relay)),{expiryTimestamp:t.expiryTimestamp}))}function Hr(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function km(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Hr(r.accounts))}),e}function qm(t,e){const r=[];return Object.values(t).forEach(n=>{Hr(n.accounts).includes(e)&&r.push(...n.methods)}),r}function zm(t,e){const r=[];return Object.values(t).forEach(n=>{Hr(n.accounts).includes(e)&&r.push(...n.events)}),r}const jm={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Km={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function te(t,e){const{message:r,code:n}=Km[t];return{message:e?`${r} ${e}`:r,code:n}}function Be(t,e){const{message:r,code:n}=jm[t];return{message:e?`${r} ${e}`:r,code:n}}function xn(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Xn(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function ht(t){return typeof t>"u"}function tt(t,e){return e&&ht(t)?!0:typeof t=="string"&&!!t.trim().length}function Js(t,e){return e&&ht(t)?!0:typeof t=="number"&&!isNaN(t)}function Hm(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return _r(i,n)?(n.forEach(c=>{const{accounts:o,methods:u,events:l}=t.namespaces[c],d=Hr(o),m=r[c];(!_r(Cl(c,m),d)||!_r(m.methods,u)||!_r(m.events,l))&&(s=!1)}),s):!1}function Zn(t){return tt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Wm(t){if(tt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Zn(r)}}return!1}function Vm(t){if(tt(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function Gm(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function Ym(t){return t==null?void 0:t.topic}function Jm(t,e){let r=null;return tt(t==null?void 0:t.publicKey,!1)||(r=te("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function Fa(t){let e=!0;return xn(t)?t.length&&(e=t.every(r=>tt(r,!1))):e=!1,e}function Qm(t,e,r){let n=null;return xn(e)&&e.length?e.forEach(i=>{n||Zn(i)||(n=Be("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Zn(t)||(n=Be("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function Xm(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const c=Qm(i,Cl(i,s),`${e} ${r}`);c&&(n=c)}),n}function Zm(t,e){let r=null;return xn(t)?t.forEach(n=>{r||Wm(n)||(r=Be("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=Be("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function ew(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Zm(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function tw(t,e){let r=null;return Fa(t==null?void 0:t.methods)?Fa(t==null?void 0:t.events)||(r=Be("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Be("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function Ul(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=tw(n,`${e}, namespace`);i&&(r=i)}),r}function rw(t,e,r){let n=null;if(t&&Xn(t)){const i=Ul(t,e);i&&(n=i);const s=Xm(t,e,r);s&&(n=s)}else n=te("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function ki(t,e){let r=null;if(t&&Xn(t)){const n=Ul(t,e);n&&(r=n);const i=ew(t,e);i&&(r=i)}else r=te("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function Ml(t){return tt(t.protocol,!0)}function nw(t,e){let r=!1;return e&&!t?r=!0:t&&xn(t)&&t.length&&t.forEach(n=>{r=Ml(n)}),r}function iw(t){return typeof t=="number"}function gt(t){return typeof t<"u"&&typeof t!==null}function sw(t){return!(!t||typeof t!="object"||!t.code||!Js(t.code,!1)||!t.message||!tt(t.message,!1))}function ow(t){return!(ht(t)||!tt(t.method,!1))}function aw(t){return!(ht(t)||ht(t.result)&&ht(t.error)||!Js(t.id,!1)||!tt(t.jsonrpc,!1))}function cw(t){return!(ht(t)||!tt(t.name,!1))}function ka(t,e){return!(!Zn(e)||!km(t).includes(e))}function uw(t,e,r){return tt(r,!1)?qm(t,e).includes(r):!1}function lw(t,e,r){return tt(r,!1)?zm(t,e).includes(r):!1}function qa(t,e,r){let n=null;const i=hw(t),s=fw(e),c=Object.keys(i),o=Object.keys(s),u=za(Object.keys(t)),l=za(Object.keys(e)),d=u.filter(m=>!l.includes(m));return d.length&&(n=te("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${d.toString()}
      Received: ${Object.keys(e).toString()}`)),_r(c,o)||(n=te("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${o.toString()}`)),Object.keys(e).forEach(m=>{if(!m.includes(":")||n)return;const b=Hr(e[m].accounts);b.includes(m)||(n=te("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${m}
        Required: ${m}
        Approved: ${b.toString()}`))}),c.forEach(m=>{n||(_r(i[m].methods,s[m].methods)?_r(i[m].events,s[m].events)||(n=te("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${m}`)):n=te("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${m}`))}),n}function hw(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function za(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function fw(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=Hr(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function dw(t,e){return Js(t,!1)&&t<=e.max&&t>=e.min}function ja(){const t=En();return new Promise(e=>{switch(t){case bt.browser:e(pw());break;case bt.reactNative:e(gw());break;case bt.node:e(_w());break;default:e(!0)}})}function pw(){return Kr()&&(navigator==null?void 0:navigator.onLine)}async function gw(){if(jr()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function _w(){return!0}function yw(t){switch(En()){case bt.browser:mw(t);break;case bt.reactNative:ww(t);break}}function mw(t){!jr()&&Kr()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function ww(t){jr()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const qi={};let $n=class{static get(e){return qi[e]}static set(e,r){qi[e]=r}static delete(e){delete qi[e]}};const vw="PARSE_ERROR",bw="INVALID_REQUEST",Ew="METHOD_NOT_FOUND",xw="INVALID_PARAMS",$l="INTERNAL_ERROR",Qs="SERVER_ERROR",Sw=[-32700,-32600,-32601,-32602,-32603],on={[vw]:{code:-32700,message:"Parse error"},[bw]:{code:-32600,message:"Invalid Request"},[Ew]:{code:-32601,message:"Method not found"},[xw]:{code:-32602,message:"Invalid params"},[$l]:{code:-32603,message:"Internal error"},[Qs]:{code:-32e3,message:"Server error"}},Bl=Qs;function Dw(t){return Sw.includes(t)}function Ka(t){return Object.keys(on).includes(t)?on[t]:on[Bl]}function Iw(t){const e=Object.values(on).find(r=>r.code===t);return e||on[Bl]}function Cw(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var Fl={},qt={},Ha;function Tw(){if(Ha)return qt;Ha=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.isBrowserCryptoAvailable=qt.getSubtleCrypto=qt.getBrowerCrypto=void 0;function t(){return(Ut===null||Ut===void 0?void 0:Ut.crypto)||(Ut===null||Ut===void 0?void 0:Ut.msCrypto)||{}}qt.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}qt.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return qt.isBrowserCryptoAvailable=r,qt}var zt={},Wa;function Ow(){if(Wa)return zt;Wa=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.isBrowser=zt.isNode=zt.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}zt.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}zt.isNode=e;function r(){return!t()&&!e()}return zt.isBrowser=r,zt}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Bt;e.__exportStar(Tw(),t),e.__exportStar(Ow(),t)})(Fl);function Xs(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function kl(t=6){return BigInt(Xs(t))}function Nr(t,e,r){return{id:r||Xs(),jsonrpc:"2.0",method:t,params:e}}function Zs(t,e){return{id:t,jsonrpc:"2.0",result:e}}function eo(t,e,r){return{id:t,jsonrpc:"2.0",error:Nw(e,r)}}function Nw(t,e){return typeof t>"u"?Ka($l):(typeof t=="string"&&(t=Object.assign(Object.assign({},Ka(Qs)),{message:t})),typeof e<"u"&&(t.data=e),Dw(t.code)&&(t=Iw(t.code)),t)}class Aw{}class Rw extends Aw{constructor(){super()}}class Pw extends Rw{constructor(e){super()}}const Lw="^wss?:";function Uw(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Mw(t,e){const r=Uw(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function Va(t){return Mw(t,Lw)}function $w(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function ql(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function to(t){return ql(t)&&"method"in t}function yi(t){return ql(t)&&(Wt(t)||Nt(t))}function Wt(t){return"result"in t}function Nt(t){return"error"in t}class Bw extends Pw{constructor(e){super(e),this.events=new Mt.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Nr(e.method,e.params||[],e.id||kl().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Nt(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),yi(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Fw=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),kw=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Ga=t=>t.split("?")[0],Ya=10,qw=Fw();class zw{constructor(e){if(this.url=e,this.events=new Mt.EventEmitter,this.registering=!1,!Va(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(mn(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!Va(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=new URLSearchParams(e).get("origin"),s=Fl.isReactNative()?{headers:{origin:i}}:{rejectUnauthorized:!$w(e)},c=new qw(e,[],s);kw()?c.onerror=o=>{const u=o;n(this.emitError(u.error))}:c.on("error",o=>{n(this.emitError(o))}),c.onopen=()=>{this.onOpen(c),r(c)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?li(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=eo(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return Cw(e,Ga(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Ya&&this.events.setMaxListeners(Ya)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Ga(this.url)}`));return this.events.emit("register_error",r),r}}var ei={exports:{}};ei.exports;(function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,c=9007199254740991,o="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",d="[object Boolean]",m="[object Date]",b="[object Error]",x="[object Function]",E="[object GeneratorFunction]",T="[object Map]",N="[object Number]",M="[object Null]",S="[object Object]",C="[object Promise]",_="[object Proxy]",w="[object RegExp]",g="[object Set]",a="[object String]",y="[object Symbol]",$="[object Undefined]",U="[object WeakMap]",G="[object ArrayBuffer]",J="[object DataView]",Z="[object Float32Array]",R="[object Float64Array]",k="[object Int8Array]",re="[object Int16Array]",Y="[object Int32Array]",K="[object Uint8Array]",W="[object Uint8ClampedArray]",j="[object Uint16Array]",H="[object Uint32Array]",le=/[\\^$.*+?()[\]{}|]/g,Q=/^\[object .+?Constructor\]$/,de=/^(?:0|[1-9]\d*)$/,se={};se[Z]=se[R]=se[k]=se[re]=se[Y]=se[K]=se[W]=se[j]=se[H]=!0,se[o]=se[u]=se[G]=se[d]=se[J]=se[m]=se[b]=se[x]=se[T]=se[N]=se[S]=se[w]=se[g]=se[a]=se[U]=!1;var pe=typeof Ut=="object"&&Ut&&Ut.Object===Object&&Ut,F=typeof self=="object"&&self&&self.Object===Object&&self,B=pe||F||Function("return this")(),P=e&&!e.nodeType&&e,h=P&&!0&&t&&!t.nodeType&&t,O=h&&h.exports===P,X=O&&pe.process,ee=function(){try{return X&&X.binding&&X.binding("util")}catch{}}(),ve=ee&&ee.isTypedArray;function xe(D,L){for(var V=-1,ce=D==null?0:D.length,Re=0,we=[];++V<ce;){var $e=D[V];L($e,V,D)&&(we[Re++]=$e)}return we}function v(D,L){for(var V=-1,ce=L.length,Re=D.length;++V<ce;)D[Re+V]=L[V];return D}function f(D,L){for(var V=-1,ce=D==null?0:D.length;++V<ce;)if(L(D[V],V,D))return!0;return!1}function p(D,L){for(var V=-1,ce=Array(D);++V<D;)ce[V]=L(V);return ce}function I(D){return function(L){return D(L)}}function A(D,L){return D.has(L)}function q(D,L){return D==null?void 0:D[L]}function z(D){var L=-1,V=Array(D.size);return D.forEach(function(ce,Re){V[++L]=[Re,ce]}),V}function ne(D,L){return function(V){return D(L(V))}}function oe(D){var L=-1,V=Array(D.size);return D.forEach(function(ce){V[++L]=ce}),V}var ue=Array.prototype,fe=Function.prototype,ae=Object.prototype,ye=B["__core-js_shared__"],be=fe.toString,_e=ae.hasOwnProperty,De=function(){var D=/[^.]+$/.exec(ye&&ye.keys&&ye.keys.IE_PROTO||"");return D?"Symbol(src)_1."+D:""}(),Ie=ae.toString,Te=RegExp("^"+be.call(_e).replace(le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Oe=O?B.Buffer:void 0,Ce=B.Symbol,Ct=B.Uint8Array,Rt=ae.propertyIsEnumerable,Jt=ue.splice,mt=Ce?Ce.toStringTag:void 0,ar=Object.getOwnPropertySymbols,Wr=Oe?Oe.isBuffer:void 0,Dn=ne(Object.keys,Object),ke=xr(B,"DataView"),Ue=xr(B,"Map"),qe=xr(B,"Promise"),ze=xr(B,"Set"),je=xr(B,"WeakMap"),Me=xr(Object,"create"),We=ur(ke),Ve=ur(Ue),Ge=ur(qe),Ye=ur(ze),Je=ur(je),He=Ce?Ce.prototype:void 0,Ke=He?He.valueOf:void 0;function Pe(D){var L=-1,V=D==null?0:D.length;for(this.clear();++L<V;){var ce=D[L];this.set(ce[0],ce[1])}}function Qe(){this.__data__=Me?Me(null):{},this.size=0}function Xe(D){var L=this.has(D)&&delete this.__data__[D];return this.size-=L?1:0,L}function sh(D){var L=this.__data__;if(Me){var V=L[D];return V===n?void 0:V}return _e.call(L,D)?L[D]:void 0}function oh(D){var L=this.__data__;return Me?L[D]!==void 0:_e.call(L,D)}function ah(D,L){var V=this.__data__;return this.size+=this.has(D)?0:1,V[D]=Me&&L===void 0?n:L,this}Pe.prototype.clear=Qe,Pe.prototype.delete=Xe,Pe.prototype.get=sh,Pe.prototype.has=oh,Pe.prototype.set=ah;function Ft(D){var L=-1,V=D==null?0:D.length;for(this.clear();++L<V;){var ce=D[L];this.set(ce[0],ce[1])}}function ch(){this.__data__=[],this.size=0}function uh(D){var L=this.__data__,V=Cn(L,D);if(V<0)return!1;var ce=L.length-1;return V==ce?L.pop():Jt.call(L,V,1),--this.size,!0}function lh(D){var L=this.__data__,V=Cn(L,D);return V<0?void 0:L[V][1]}function hh(D){return Cn(this.__data__,D)>-1}function fh(D,L){var V=this.__data__,ce=Cn(V,D);return ce<0?(++this.size,V.push([D,L])):V[ce][1]=L,this}Ft.prototype.clear=ch,Ft.prototype.delete=uh,Ft.prototype.get=lh,Ft.prototype.has=hh,Ft.prototype.set=fh;function cr(D){var L=-1,V=D==null?0:D.length;for(this.clear();++L<V;){var ce=D[L];this.set(ce[0],ce[1])}}function dh(){this.size=0,this.__data__={hash:new Pe,map:new(Ue||Ft),string:new Pe}}function ph(D){var L=Tn(this,D).delete(D);return this.size-=L?1:0,L}function gh(D){return Tn(this,D).get(D)}function _h(D){return Tn(this,D).has(D)}function yh(D,L){var V=Tn(this,D),ce=V.size;return V.set(D,L),this.size+=V.size==ce?0:1,this}cr.prototype.clear=dh,cr.prototype.delete=ph,cr.prototype.get=gh,cr.prototype.has=_h,cr.prototype.set=yh;function In(D){var L=-1,V=D==null?0:D.length;for(this.__data__=new cr;++L<V;)this.add(D[L])}function mh(D){return this.__data__.set(D,n),this}function wh(D){return this.__data__.has(D)}In.prototype.add=In.prototype.push=mh,In.prototype.has=wh;function Qt(D){var L=this.__data__=new Ft(D);this.size=L.size}function vh(){this.__data__=new Ft,this.size=0}function bh(D){var L=this.__data__,V=L.delete(D);return this.size=L.size,V}function Eh(D){return this.__data__.get(D)}function xh(D){return this.__data__.has(D)}function Sh(D,L){var V=this.__data__;if(V instanceof Ft){var ce=V.__data__;if(!Ue||ce.length<r-1)return ce.push([D,L]),this.size=++V.size,this;V=this.__data__=new cr(ce)}return V.set(D,L),this.size=V.size,this}Qt.prototype.clear=vh,Qt.prototype.delete=bh,Qt.prototype.get=Eh,Qt.prototype.has=xh,Qt.prototype.set=Sh;function Dh(D,L){var V=On(D),ce=!V&&kh(D),Re=!V&&!ce&&vi(D),we=!V&&!ce&&!Re&&_o(D),$e=V||ce||Re||we,Ze=$e?p(D.length,String):[],rt=Ze.length;for(var Le in D)(L||_e.call(D,Le))&&!($e&&(Le=="length"||Re&&(Le=="offset"||Le=="parent")||we&&(Le=="buffer"||Le=="byteLength"||Le=="byteOffset")||Uh(Le,rt)))&&Ze.push(Le);return Ze}function Cn(D,L){for(var V=D.length;V--;)if(ho(D[V][0],L))return V;return-1}function Ih(D,L,V){var ce=L(D);return On(D)?ce:v(ce,V(D))}function Vr(D){return D==null?D===void 0?$:M:mt&&mt in Object(D)?Ph(D):Fh(D)}function ao(D){return Gr(D)&&Vr(D)==o}function co(D,L,V,ce,Re){return D===L?!0:D==null||L==null||!Gr(D)&&!Gr(L)?D!==D&&L!==L:Ch(D,L,V,ce,co,Re)}function Ch(D,L,V,ce,Re,we){var $e=On(D),Ze=On(L),rt=$e?u:Xt(D),Le=Ze?u:Xt(L);rt=rt==o?S:rt,Le=Le==o?S:Le;var wt=rt==S,Tt=Le==S,st=rt==Le;if(st&&vi(D)){if(!vi(L))return!1;$e=!0,wt=!1}if(st&&!wt)return we||(we=new Qt),$e||_o(D)?uo(D,L,V,ce,Re,we):Ah(D,L,rt,V,ce,Re,we);if(!(V&i)){var St=wt&&_e.call(D,"__wrapped__"),Dt=Tt&&_e.call(L,"__wrapped__");if(St||Dt){var Zt=St?D.value():D,kt=Dt?L.value():L;return we||(we=new Qt),Re(Zt,kt,V,ce,we)}}return st?(we||(we=new Qt),Rh(D,L,V,ce,Re,we)):!1}function Th(D){if(!go(D)||$h(D))return!1;var L=fo(D)?Te:Q;return L.test(ur(D))}function Oh(D){return Gr(D)&&po(D.length)&&!!se[Vr(D)]}function Nh(D){if(!Bh(D))return Dn(D);var L=[];for(var V in Object(D))_e.call(D,V)&&V!="constructor"&&L.push(V);return L}function uo(D,L,V,ce,Re,we){var $e=V&i,Ze=D.length,rt=L.length;if(Ze!=rt&&!($e&&rt>Ze))return!1;var Le=we.get(D);if(Le&&we.get(L))return Le==L;var wt=-1,Tt=!0,st=V&s?new In:void 0;for(we.set(D,L),we.set(L,D);++wt<Ze;){var St=D[wt],Dt=L[wt];if(ce)var Zt=$e?ce(Dt,St,wt,L,D,we):ce(St,Dt,wt,D,L,we);if(Zt!==void 0){if(Zt)continue;Tt=!1;break}if(st){if(!f(L,function(kt,lr){if(!A(st,lr)&&(St===kt||Re(St,kt,V,ce,we)))return st.push(lr)})){Tt=!1;break}}else if(!(St===Dt||Re(St,Dt,V,ce,we))){Tt=!1;break}}return we.delete(D),we.delete(L),Tt}function Ah(D,L,V,ce,Re,we,$e){switch(V){case J:if(D.byteLength!=L.byteLength||D.byteOffset!=L.byteOffset)return!1;D=D.buffer,L=L.buffer;case G:return!(D.byteLength!=L.byteLength||!we(new Ct(D),new Ct(L)));case d:case m:case N:return ho(+D,+L);case b:return D.name==L.name&&D.message==L.message;case w:case a:return D==L+"";case T:var Ze=z;case g:var rt=ce&i;if(Ze||(Ze=oe),D.size!=L.size&&!rt)return!1;var Le=$e.get(D);if(Le)return Le==L;ce|=s,$e.set(D,L);var wt=uo(Ze(D),Ze(L),ce,Re,we,$e);return $e.delete(D),wt;case y:if(Ke)return Ke.call(D)==Ke.call(L)}return!1}function Rh(D,L,V,ce,Re,we){var $e=V&i,Ze=lo(D),rt=Ze.length,Le=lo(L),wt=Le.length;if(rt!=wt&&!$e)return!1;for(var Tt=rt;Tt--;){var st=Ze[Tt];if(!($e?st in L:_e.call(L,st)))return!1}var St=we.get(D);if(St&&we.get(L))return St==L;var Dt=!0;we.set(D,L),we.set(L,D);for(var Zt=$e;++Tt<rt;){st=Ze[Tt];var kt=D[st],lr=L[st];if(ce)var yo=$e?ce(lr,kt,st,L,D,we):ce(kt,lr,st,D,L,we);if(!(yo===void 0?kt===lr||Re(kt,lr,V,ce,we):yo)){Dt=!1;break}Zt||(Zt=st=="constructor")}if(Dt&&!Zt){var Nn=D.constructor,An=L.constructor;Nn!=An&&"constructor"in D&&"constructor"in L&&!(typeof Nn=="function"&&Nn instanceof Nn&&typeof An=="function"&&An instanceof An)&&(Dt=!1)}return we.delete(D),we.delete(L),Dt}function lo(D){return Ih(D,jh,Lh)}function Tn(D,L){var V=D.__data__;return Mh(L)?V[typeof L=="string"?"string":"hash"]:V.map}function xr(D,L){var V=q(D,L);return Th(V)?V:void 0}function Ph(D){var L=_e.call(D,mt),V=D[mt];try{D[mt]=void 0;var ce=!0}catch{}var Re=Ie.call(D);return ce&&(L?D[mt]=V:delete D[mt]),Re}var Lh=ar?function(D){return D==null?[]:(D=Object(D),xe(ar(D),function(L){return Rt.call(D,L)}))}:Kh,Xt=Vr;(ke&&Xt(new ke(new ArrayBuffer(1)))!=J||Ue&&Xt(new Ue)!=T||qe&&Xt(qe.resolve())!=C||ze&&Xt(new ze)!=g||je&&Xt(new je)!=U)&&(Xt=function(D){var L=Vr(D),V=L==S?D.constructor:void 0,ce=V?ur(V):"";if(ce)switch(ce){case We:return J;case Ve:return T;case Ge:return C;case Ye:return g;case Je:return U}return L});function Uh(D,L){return L=L??c,!!L&&(typeof D=="number"||de.test(D))&&D>-1&&D%1==0&&D<L}function Mh(D){var L=typeof D;return L=="string"||L=="number"||L=="symbol"||L=="boolean"?D!=="__proto__":D===null}function $h(D){return!!De&&De in D}function Bh(D){var L=D&&D.constructor,V=typeof L=="function"&&L.prototype||ae;return D===V}function Fh(D){return Ie.call(D)}function ur(D){if(D!=null){try{return be.call(D)}catch{}try{return D+""}catch{}}return""}function ho(D,L){return D===L||D!==D&&L!==L}var kh=ao(function(){return arguments}())?ao:function(D){return Gr(D)&&_e.call(D,"callee")&&!Rt.call(D,"callee")},On=Array.isArray;function qh(D){return D!=null&&po(D.length)&&!fo(D)}var vi=Wr||Hh;function zh(D,L){return co(D,L)}function fo(D){if(!go(D))return!1;var L=Vr(D);return L==x||L==E||L==l||L==_}function po(D){return typeof D=="number"&&D>-1&&D%1==0&&D<=c}function go(D){var L=typeof D;return D!=null&&(L=="object"||L=="function")}function Gr(D){return D!=null&&typeof D=="object"}var _o=ve?I(ve):Oh;function jh(D){return qh(D)?Dh(D):Nh(D)}function Kh(){return[]}function Hh(){return!1}t.exports=zh})(ei,ei.exports);var jw=ei.exports;const Kw=ti(jw);function Hw(t,e){return e=e||{},new Promise(function(r,n){var i=new XMLHttpRequest,s=[],c=[],o={},u=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:u,headers:{keys:function(){return s},entries:function(){return c},get:function(d){return o[d.toLowerCase()]},has:function(d){return d.toLowerCase()in o}}}};for(var l in i.open(e.method||"get",t,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(d,m,b){s.push(m=m.toLowerCase()),c.push([m,b]),o[m]=o[m]?o[m]+","+b:b}),r(u())},i.onerror=n,i.withCredentials=e.credentials=="include",e.headers)i.setRequestHeader(l,e.headers[l]);i.send(e.body||null)})}const Ww=Object.freeze(Object.defineProperty({__proto__:null,default:Hw},Symbol.toStringTag,{value:"Module"})),Ja=dn(Ww);var Vw=self.fetch||(self.fetch=Ja.default||Ja);const Gw=ti(Vw);var Yw={};function Jw(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),c=s.charCodeAt(0);if(r[c]!==255)throw new TypeError(s+" is ambiguous");r[c]=i}var o=t.length,u=t.charAt(0),l=Math.log(o)/Math.log(256),d=Math.log(256)/Math.log(o);function m(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var T=0,N=0,M=0,S=E.length;M!==S&&E[M]===0;)M++,T++;for(var C=(S-M)*d+1>>>0,_=new Uint8Array(C);M!==S;){for(var w=E[M],g=0,a=C-1;(w!==0||g<N)&&a!==-1;a--,g++)w+=256*_[a]>>>0,_[a]=w%o>>>0,w=w/o>>>0;if(w!==0)throw new Error("Non-zero carry");N=g,M++}for(var y=C-N;y!==C&&_[y]===0;)y++;for(var $=u.repeat(T);y<C;++y)$+=t.charAt(_[y]);return $}function b(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;var T=0;if(E[T]!==" "){for(var N=0,M=0;E[T]===u;)N++,T++;for(var S=(E.length-T)*l+1>>>0,C=new Uint8Array(S);E[T];){var _=r[E.charCodeAt(T)];if(_===255)return;for(var w=0,g=S-1;(_!==0||w<M)&&g!==-1;g--,w++)_+=o*C[g]>>>0,C[g]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");M=w,T++}if(E[T]!==" "){for(var a=S-M;a!==S&&C[a]===0;)a++;for(var y=new Uint8Array(N+(S-a)),$=N;a!==S;)y[$++]=C[a++];return y}}}function x(E){var T=b(E);if(T)return T;throw new Error(`Non-${e} character`)}return{encode:m,decodeUnsafe:b,decode:x}}var Qw=Jw,Xw=Qw;const zl=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Zw=t=>new TextEncoder().encode(t),e1=t=>new TextDecoder().decode(t);class t1{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class r1{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return jl(this,e)}}class n1{constructor(e){this.decoders=e}or(e){return jl(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const jl=(t,e)=>new n1({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class i1{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new t1(e,r,n),this.decoder=new r1(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const mi=({name:t,prefix:e,encode:r,decode:n})=>new i1(t,e,r,n),Sn=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Xw(r,e);return mi({prefix:t,name:e,encode:n,decode:s=>zl(i(s))})},s1=(t,e,r,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let s=t.length;for(;t[s-1]==="=";)--s;const c=new Uint8Array(s*r/8|0);let o=0,u=0,l=0;for(let d=0;d<s;++d){const m=i[t[d]];if(m===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|m,o+=r,o>=8&&(o-=8,c[l++]=255&u>>o)}if(o>=r||255&u<<8-o)throw new SyntaxError("Unexpected end of data");return c},o1=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",c=0,o=0;for(let u=0;u<t.length;++u)for(o=o<<8|t[u],c+=8;c>r;)c-=r,s+=e[i&o>>c];if(c&&(s+=e[i&o<<r-c]),n)for(;s.length*r&7;)s+="=";return s},it=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>mi({prefix:e,name:t,encode(i){return o1(i,n,r)},decode(i){return s1(i,n,r,t)}}),a1=mi({prefix:"\0",name:"identity",encode:t=>e1(t),decode:t=>Zw(t)});var c1=Object.freeze({__proto__:null,identity:a1});const u1=it({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var l1=Object.freeze({__proto__:null,base2:u1});const h1=it({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var f1=Object.freeze({__proto__:null,base8:h1});const d1=Sn({prefix:"9",name:"base10",alphabet:"0123456789"});var p1=Object.freeze({__proto__:null,base10:d1});const g1=it({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),_1=it({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var y1=Object.freeze({__proto__:null,base16:g1,base16upper:_1});const m1=it({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),w1=it({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),v1=it({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),b1=it({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),E1=it({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),x1=it({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),S1=it({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),D1=it({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),I1=it({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var C1=Object.freeze({__proto__:null,base32:m1,base32upper:w1,base32pad:v1,base32padupper:b1,base32hex:E1,base32hexupper:x1,base32hexpad:S1,base32hexpadupper:D1,base32z:I1});const T1=Sn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),O1=Sn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var N1=Object.freeze({__proto__:null,base36:T1,base36upper:O1});const A1=Sn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),R1=Sn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var P1=Object.freeze({__proto__:null,base58btc:A1,base58flickr:R1});const L1=it({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),U1=it({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),M1=it({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),$1=it({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var B1=Object.freeze({__proto__:null,base64:L1,base64pad:U1,base64url:M1,base64urlpad:$1});const Kl=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),F1=Kl.reduce((t,e,r)=>(t[r]=e,t),[]),k1=Kl.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function q1(t){return t.reduce((e,r)=>(e+=F1[r],e),"")}function z1(t){const e=[];for(const r of t){const n=k1[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const j1=mi({prefix:"🚀",name:"base256emoji",encode:q1,decode:z1});var K1=Object.freeze({__proto__:null,base256emoji:j1}),H1=Hl,Qa=128,W1=127,V1=~W1,G1=Math.pow(2,31);function Hl(t,e,r){e=e||[],r=r||0;for(var n=r;t>=G1;)e[r++]=t&255|Qa,t/=128;for(;t&V1;)e[r++]=t&255|Qa,t>>>=7;return e[r]=t|0,Hl.bytes=r-n+1,e}var Y1=ms,J1=128,Xa=127;function ms(t,n){var r=0,n=n||0,i=0,s=n,c,o=t.length;do{if(s>=o)throw ms.bytes=0,new RangeError("Could not decode varint");c=t[s++],r+=i<28?(c&Xa)<<i:(c&Xa)*Math.pow(2,i),i+=7}while(c>=J1);return ms.bytes=s-n,r}var Q1=Math.pow(2,7),X1=Math.pow(2,14),Z1=Math.pow(2,21),ev=Math.pow(2,28),tv=Math.pow(2,35),rv=Math.pow(2,42),nv=Math.pow(2,49),iv=Math.pow(2,56),sv=Math.pow(2,63),ov=function(t){return t<Q1?1:t<X1?2:t<Z1?3:t<ev?4:t<tv?5:t<rv?6:t<nv?7:t<iv?8:t<sv?9:10},av={encode:H1,decode:Y1,encodingLength:ov},Wl=av;const Za=(t,e,r=0)=>(Wl.encode(t,e,r),e),ec=t=>Wl.encodingLength(t),ws=(t,e)=>{const r=e.byteLength,n=ec(t),i=n+ec(r),s=new Uint8Array(i+r);return Za(t,s,0),Za(r,s,n),s.set(e,i),new cv(t,r,e,s)};class cv{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const Vl=({name:t,code:e,encode:r})=>new uv(t,e,r);class uv{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?ws(this.code,r):r.then(n=>ws(this.code,n))}else throw Error("Unknown type, must be binary type")}}const Gl=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),lv=Vl({name:"sha2-256",code:18,encode:Gl("SHA-256")}),hv=Vl({name:"sha2-512",code:19,encode:Gl("SHA-512")});var fv=Object.freeze({__proto__:null,sha256:lv,sha512:hv});const Yl=0,dv="identity",Jl=zl,pv=t=>ws(Yl,Jl(t)),gv={code:Yl,name:dv,encode:Jl,digest:pv};var _v=Object.freeze({__proto__:null,identity:gv});new TextEncoder,new TextDecoder;const tc={...c1,...l1,...f1,...p1,...y1,...C1,...N1,...P1,...B1,...K1};({...fv,..._v});function Ql(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function yv(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ql(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Xl(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const rc=Xl("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),zi=Xl("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=yv(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),mv={utf8:rc,"utf-8":rc,hex:tc.base16,latin1:zi,ascii:zi,binary:zi,...tc};function wv(t,e="utf8"){const r=mv[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ql(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const Zl="wc",vv=2,ro="core",nr=`${Zl}@2:${ro}:`,bv={name:ro,logger:"error"},Ev={database:":memory:"},xv="crypto",nc="client_ed25519_seed",Sv=he.ONE_DAY,Dv="keychain",Iv="0.3",Cv="messages",Tv="0.3",Ov=he.SIX_HOURS,Nv="publisher",eh="irn",Av="error",th="wss://relay.walletconnect.com",ic="wss://relay.walletconnect.org",Rv="relayer",at={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Pv="_subscription",jt={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Lv=he.ONE_SECOND,Uv="2.11.2",Mv=1e4,$v="0.3",Bv="WALLETCONNECT_CLIENT_ID",Ot={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Fv="subscription",kv="0.3",qv=he.FIVE_SECONDS*1e3,zv="pairing",jv="0.3",Zr={wc_pairingDelete:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:he.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:he.ONE_DAY,prompt:!1,tag:0},res:{ttl:he.ONE_DAY,prompt:!1,tag:0}}},tn={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Lt={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Kv="history",Hv="0.3",Wv="expirer",It={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Vv="0.3",ji="verify-api",Tr="https://verify.walletconnect.com",vs="https://verify.walletconnect.org",Gv=[Tr,vs],Yv="echo",Jv="https://echo.walletconnect.com";class Qv{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=Dv,this.version=Iv,this.initialized=!1,this.storagePrefix=nr,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=te("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=Se.generateChildLogger(r,this.name)}get context(){return Se.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Al(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Rl(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=te("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Xv{constructor(e,r,n){this.core=e,this.logger=r,this.name=xv,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=ba(i);return ml(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=im();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),c=ba(s),o=_s();return await ly(o,i,Sv,c)},this.generateSharedKey=(i,s,c)=>{this.isInitialized();const o=this.getPrivateKey(i),u=sm(o,s);return this.setSymKey(u,c)},this.setSymKey=async(i,s)=>{this.isInitialized();const c=s||om(i);return await this.keychain.set(c,i),c},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,c)=>{this.isInitialized();const o=Nl(c),u=mn(s);if(Ra(o)){const b=o.senderPublicKey,x=o.receiverPublicKey;i=await this.generateSharedKey(b,x)}const l=this.getSymKey(i),{type:d,senderPublicKey:m}=o;return cm({type:d,symKey:l,message:u,senderPublicKey:m})},this.decode=async(i,s,c)=>{this.isInitialized();const o=hm(s,c);if(Ra(o)){const u=o.receiverPublicKey,l=o.senderPublicKey;i=await this.generateSharedKey(u,l)}try{const u=this.getSymKey(i),l=um({symKey:u,encoded:s});return li(l)}catch(u){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(u)}},this.getPayloadType=i=>{const s=Qn(i);return bn(s.type)},this.getPayloadSenderPublicKey=i=>{const s=Qn(i);return s.senderPublicKey?dt(s.senderPublicKey,ft):void 0},this.core=e,this.logger=Se.generateChildLogger(r,this.name),this.keychain=n||new Qv(this.core,this.logger)}get context(){return Se.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(nc)}catch{e=_s(),await this.keychain.set(nc,e)}return wv(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=te("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Zv extends m0{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=Cv,this.version=Tv,this.initialized=!1,this.storagePrefix=nr,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=Or(i);let c=this.messages.get(n);return typeof c>"u"&&(c={}),typeof c[s]<"u"||(c[s]=i,this.messages.set(n,c),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),c=Or(i);return typeof s[c]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Se.generateChildLogger(e,this.name),this.core=r}get context(){return Se.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Al(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Rl(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=te("NOT_INITIALIZED",this.name);throw new Error(e)}}}class eb extends w0{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new Mt.EventEmitter,this.name=Nv,this.queue=new Map,this.publishTimeout=he.toMiliseconds(he.TEN_SECONDS*2),this.needsTransportRestart=!1,this.publish=async(n,i,s)=>{var c;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{const o=(s==null?void 0:s.ttl)||Ov,u=ys(s),l=(s==null?void 0:s.prompt)||!1,d=(s==null?void 0:s.tag)||0,m=(s==null?void 0:s.id)||kl().toString(),b={topic:n,message:i,opts:{ttl:o,relay:u,prompt:l,tag:d,id:m}},x=setTimeout(()=>this.queue.set(m,b),this.publishTimeout);try{await await fn(this.rpcPublish(n,i,o,u,l,d,m),this.publishTimeout,`Failed to publish payload, please try again. id:${m} tag:${d}`),this.removeRequestFromQueue(m),this.relayer.events.emit(at.publish,b)}catch(E){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(c=s==null?void 0:s.internal)!=null&&c.throwOnFailedPublish)throw this.removeRequestFromQueue(m),E;return}finally{clearTimeout(x)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(o){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(o),o}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=Se.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Se.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,s,c,o){var u,l,d,m;const b={method:zn(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:s,tag:c},id:o};return ht((u=b.params)==null?void 0:u.prompt)&&((l=b.params)==null||delete l.prompt),ht((d=b.params)==null?void 0:d.tag)&&((m=b.params)==null||delete m.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:b}),this.relayer.request(b)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(kr.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(at.connection_stalled);return}this.checkQueue()}),this.relayer.on(at.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class tb{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var rb=Object.defineProperty,nb=Object.defineProperties,ib=Object.getOwnPropertyDescriptors,sc=Object.getOwnPropertySymbols,sb=Object.prototype.hasOwnProperty,ob=Object.prototype.propertyIsEnumerable,oc=(t,e,r)=>e in t?rb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,en=(t,e)=>{for(var r in e||(e={}))sb.call(e,r)&&oc(t,r,e[r]);if(sc)for(var r of sc(e))ob.call(e,r)&&oc(t,r,e[r]);return t},Ki=(t,e)=>nb(t,ib(e));class ab extends E0{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new tb,this.events=new Mt.EventEmitter,this.name=Fv,this.version=kv,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=nr,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=ys(i),c={topic:n,relay:s};this.pending.set(n,c);const o=await this.rpcSubscribe(n,s);return this.onSubscribe(o,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),o}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>{if(this.topics.includes(n))return!0;const i=`${this.pendingSubscriptionWatchLabel}_${n}`;return await new Promise((s,c)=>{const o=new he.Watch;o.start(i);const u=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(u),o.stop(i),s(!0)),o.elapsed(i)>=qv&&(clearInterval(u),o.stop(i),c(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Se.generateChildLogger(r,this.name),this.clientId=""}get context(){return Se.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=ys(n);await this.rpcUnsubscribe(e,r,i);const s=Be("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){const n={method:zn(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await fn(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(at.connection_stalled)}return Or(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:zn(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await fn(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(at.connection_stalled)}}rpcUnsubscribe(e,r,n){const i={method:zn(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,Ki(en({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,en({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,en({},r)),this.topicMap.set(r.topic,e),this.events.emit(Ot.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Ot.deleted,Ki(en({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ot.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(Ot.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);xn(r)&&this.onBatchSubscribe(r.map((n,i)=>Ki(en({},e[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(kr.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(at.connect,async()=>{await this.onConnect()}),this.relayer.on(at.disconnect,()=>{this.onDisconnect()}),this.events.on(Ot.created,async e=>{const r=Ot.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(Ot.deleted,async e=>{const r=Ot.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=te("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}}var cb=Object.defineProperty,ac=Object.getOwnPropertySymbols,ub=Object.prototype.hasOwnProperty,lb=Object.prototype.propertyIsEnumerable,cc=(t,e,r)=>e in t?cb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hb=(t,e)=>{for(var r in e||(e={}))ub.call(e,r)&&cc(t,r,e[r]);if(ac)for(var r of ac(e))lb.call(e,r)&&cc(t,r,e[r]);return t};class fb extends v0{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Mt.EventEmitter,this.name=Rv,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.request=async r=>{this.logger.debug("Publishing Request Payload");const n=r.id;try{await this.toEstablishConnection();const i=this.provider.request(r);return this.requestsInFlight.set(n,{promise:i,request:r}),await i}catch(i){throw this.logger.debug("Failed to Publish Request"),this.logger.error(i),i}finally{this.requestsInFlight.delete(n)}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(at.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(at.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(jt.payload,this.onPayloadHandler),this.provider.on(jt.connect,this.onConnectHandler),this.provider.on(jt.disconnect,this.onDisconnectHandler),this.provider.on(jt.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Se.generateChildLogger(e.logger,this.name):Se.pino(Se.getDefaultLoggerOptions({level:e.logger||Av})),this.messages=new Zv(this.logger,e.core),this.subscriber=new ab(this,this.logger),this.publisher=new eb(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||th,this.projectId=e.projectId,this.bundleId=ym(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${ic}...`),await this.restartTransport(ic)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},Mv)}get context(){return Se.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"";if(i)return i;let s;const c=o=>{o.topic===e&&(this.subscriber.off(Ot.created,c),s())};return await Promise.all([new Promise(o=>{s=o,this.subscriber.on(Ot.created,c)}),new Promise(async o=>{i=await this.subscriber.subscribe(e,r),o()})]),i}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.requestsInFlight.size>0&&(this.logger.debug("Waiting for all in-flight requests to finish before closing transport..."),this.requestsInFlight.forEach(async e=>{await e.promise})),this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await fn(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(Ot.resubscribed,()=>{r()})}),new Promise(async(r,n)=>{try{await fn(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(i){n(i);return}r()})])}catch(r){this.logger.error(r);const n=r;if(!this.isConnectionStalled(n.message))throw r;this.provider.events.emit(jt.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await ja())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Bw(new zw(xm({sdkVersion:Uv,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),to(e)){if(!e.method.endsWith(Pv))return;const r=e.params,{topic:n,message:i,publishedAt:s}=r.data,c={topic:n,message:i,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(hb({type:"event",event:r.id},c)),this.events.emit(r.id,c),await this.acknowledgePayload(e),await this.onMessageEvent(c)}else yi(e)&&this.events.emit(at.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(at.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Zs(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(jt.payload,this.onPayloadHandler),this.provider.off(jt.connect,this.onConnectHandler),this.provider.off(jt.disconnect,this.onDisconnectHandler),this.provider.off(jt.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(at.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let e=await ja();yw(async r=>{this.initialized&&e!==r&&(e=r,r?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(n=>this.logger.error(n))))})}onProviderDisconnect(){this.events.emit(at.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},he.toMiliseconds(Lv)))}isInitialized(){if(!this.initialized){const{message:e}=te("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var db=Object.defineProperty,uc=Object.getOwnPropertySymbols,pb=Object.prototype.hasOwnProperty,gb=Object.prototype.propertyIsEnumerable,lc=(t,e,r)=>e in t?db(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hc=(t,e)=>{for(var r in e||(e={}))pb.call(e,r)&&lc(t,r,e[r]);if(uc)for(var r of uc(e))gb.call(e,r)&&lc(t,r,e[r]);return t};class wi extends b0{constructor(e,r,n,i=nr,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=$v,this.cached=[],this.initialized=!1,this.storagePrefix=nr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(c=>{this.getKey&&c!==null&&!ht(c)?this.map.set(this.getKey(c),c):Gm(c)?this.map.set(c.id,c):Ym(c)&&this.map.set(c.topic,c)}),this.cached=[],this.initialized=!0)},this.set=async(c,o)=>{this.isInitialized(),this.map.has(c)?await this.update(c,o):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:c,value:o}),this.map.set(c,o),await this.persist())},this.get=c=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:c}),this.getData(c)),this.getAll=c=>(this.isInitialized(),c?this.values.filter(o=>Object.keys(c).every(u=>Kw(o[u],c[u]))):this.values),this.update=async(c,o)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:c,update:o});const u=hc(hc({},this.getData(c)),o);this.map.set(c,u),await this.persist()},this.delete=async(c,o)=>{this.isInitialized(),this.map.has(c)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:c,reason:o}),this.map.delete(c),await this.persist())},this.logger=Se.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return Se.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=te("NOT_INITIALIZED",this.name);throw new Error(e)}}}class _b{constructor(e,r){this.core=e,this.logger=r,this.name=zv,this.version=jv,this.events=new bc,this.initialized=!1,this.storagePrefix=nr,this.ignoredPayloadTypes=[Er],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=_s(),i=await this.core.crypto.setSymKey(n),s=vt(he.FIVE_MINUTES),c={protocol:eh},o={topic:i,expiry:s,relay:c,active:!1},u=Fm({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:c,expiryTimestamp:s});return await this.pairings.set(i,o),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:u}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:s,relay:c,expiryTimestamp:o}=Ba(n.uri);let u;if(this.pairings.keys.includes(i)&&(u=this.pairings.get(i),u.active))throw new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);const l=o||vt(he.FIVE_MINUTES),d={topic:i,relay:c,expiry:l,active:!1};return await this.pairings.set(i,d),this.core.expirer.set(i,l),n.activatePairing&&await this.activate({topic:i}),this.events.emit(tn.create,d),this.core.crypto.keychain.has(i)||(await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:c})),d},this.activate=async({topic:n})=>{this.isInitialized();const i=vt(he.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:c,resolve:o,reject:u}=Ir();this.events.once(Fe("pairing_ping",s),({error:l})=>{l?u(l):o()}),await c()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Be("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{const c=Nr(i,s),o=await this.core.crypto.encode(n,c),u=Zr[i].req;return this.core.history.set(n,c),this.core.relayer.publish(n,o,u),c.id},this.sendResult=async(n,i,s)=>{const c=Zs(n,s),o=await this.core.crypto.encode(i,c),u=await this.core.history.get(i,n),l=Zr[u.request.method].res;await this.core.relayer.publish(i,o,l),await this.core.history.resolve(c)},this.sendError=async(n,i,s)=>{const c=eo(n,s),o=await this.core.crypto.encode(i,c),u=await this.core.history.get(i,n),l=Zr[u.request.method]?Zr[u.request.method].res:Zr.unregistered_method.res;await this.core.relayer.publish(i,o,l),await this.core.history.resolve(c)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Be("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>er(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,c=(await this.core.history.get(i,s.id)).request.method;switch(c){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(c)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(tn.ping,{id:s,topic:n})}catch(c){await this.sendError(s,n,c),this.logger.error(c)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{Wt(i)?this.events.emit(Fe("pairing_ping",s),{}):Nt(i)&&this.events.emit(Fe("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(tn.delete,{id:s,topic:n})}catch(c){await this.sendError(s,n,c),this.logger.error(c)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:c}=i;try{if(this.registeredMethods.includes(c))return;const o=Be("WC_METHOD_UNSUPPORTED",c);await this.sendError(s,n,o),this.logger.error(o)}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(Be("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{var i;if(!gt(n)){const{message:c}=te("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(c)}if(!Vm(n.uri)){const{message:c}=te("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(c)}const s=Ba(n.uri);if(!((i=s==null?void 0:s.relay)!=null&&i.protocol)){const{message:c}=te("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(c)}if(!(s!=null&&s.symKey)){const{message:c}=te("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(c)}if(s!=null&&s.expiryTimestamp&&he.toMiliseconds(s==null?void 0:s.expiryTimestamp)<Date.now()){const{message:c}=te("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(c)}},this.isValidPing=async n=>{if(!gt(n)){const{message:s}=te("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!gt(n)){const{message:s}=te("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!tt(n,!1)){const{message:i}=te("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=te("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(er(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=te("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=Se.generateChildLogger(r,this.name),this.pairings=new wi(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Se.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=te("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(at.message,async e=>{const{topic:r,message:n}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);try{to(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):yi(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id))}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(It.expired,async e=>{const{topic:r}=Ll(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(tn.expire,{topic:r}))})}}class yb extends y0{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new Mt.EventEmitter,this.name=Kv,this.version=Hv,this.cached=[],this.initialized=!1,this.storagePrefix=nr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const c={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:vt(he.THIRTY_DAYS)};this.records.set(c.id,c),this.events.emit(Lt.created,c)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Nt(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(Lt.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(Lt.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Se.generateChildLogger(r,this.name)}get context(){return Se.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:Nr(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Lt.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Lt.created,e=>{const r=Lt.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Lt.updated,e=>{const r=Lt.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Lt.deleted,e=>{const r=Lt.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(kr.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{he.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=te("NOT_INITIALIZED",this.name);throw new Error(e)}}}class mb extends x0{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new Mt.EventEmitter,this.name=Wv,this.version=Vv,this.cached=[],this.initialized=!1,this.storagePrefix=nr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),c={target:s,expiry:i};this.expirations.set(s,c),this.checkExpiry(s,c),this.events.emit(It.created,{target:s,expiration:c})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(It.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Se.generateChildLogger(r,this.name)}get context(){return Se.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Sm(e);if(typeof e=="number")return Dm(e);const{message:r}=te("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(It.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;he.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(It.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(kr.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(It.created,e=>{const r=It.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(It.expired,e=>{const r=It.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(It.deleted,e=>{const r=It.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=te("NOT_INITIALIZED",this.name);throw new Error(e)}}}class wb extends S0{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=ji,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async n=>{if(this.verifyDisabled||jr()||!Kr())return;const i=this.getVerifyUrl(n==null?void 0:n.verifyUrl);this.verifyUrl!==i&&this.removeIframe(),this.verifyUrl=i;try{await this.createIframe()}catch(s){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(s)}if(!this.initialized){this.removeIframe(),this.verifyUrl=vs;try{await this.createIframe()}catch(s){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(s),this.verifyDisabled=!0}}},this.register=async n=>{this.initialized?this.sendPost(n.attestationId):(this.addToQueue(n.attestationId),await this.init())},this.resolve=async n=>{if(this.isDevEnv)return"";const i=this.getVerifyUrl(n==null?void 0:n.verifyUrl);let s;try{s=await this.fetchAttestation(n.attestationId,i)}catch(c){this.logger.info(`failed to resolve attestation: ${n.attestationId} from url: ${i}`),this.logger.info(c),s=await this.fetchAttestation(n.attestationId,vs)}return s},this.fetchAttestation=async(n,i)=>{this.logger.info(`resolving attestation: ${n} from url: ${i}`);const s=this.startAbortTimer(he.ONE_SECOND*2),c=await fetch(`${i}/attestation/${n}`,{signal:this.abortController.signal});return clearTimeout(s),c.status===200?await c.json():void 0},this.addToQueue=n=>{this.queue.push(n)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(n=>this.sendPost(n)),this.queue=[])},this.sendPost=n=>{var i;try{if(!this.iframe)return;(i=this.iframe.contentWindow)==null||i.postMessage(n,"*"),this.logger.info(`postMessage sent: ${n} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let n;const i=s=>{s.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",i),n())};await Promise.race([new Promise(s=>{if(document.getElementById(ji))return s();window.addEventListener("message",i);const c=document.createElement("iframe");c.id=ji,c.src=`${this.verifyUrl}/${this.projectId}`,c.style.display="none",document.body.append(c),this.iframe=c,n=s}),new Promise((s,c)=>setTimeout(()=>{window.removeEventListener("message",i),c("verify iframe load timeout")},he.toMiliseconds(he.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=n=>{let i=n||Tr;return Gv.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${Tr}`),i=Tr),i},this.logger=Se.generateChildLogger(r,this.name),this.verifyUrl=Tr,this.abortController=new AbortController,this.isDevEnv=Ys()&&Yw.IS_VITEST}get context(){return Se.getLoggerContext(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),he.toMiliseconds(e))}}class vb extends D0{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.context=Yv,this.registerDeviceToken=async n=>{const{clientId:i,token:s,notificationType:c,enableEncrypted:o=!1}=n,u=`${Jv}/${this.projectId}/clients`;await Gw(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:c,token:s,always_raw:o})})},this.logger=Se.generateChildLogger(r,this.context)}}var bb=Object.defineProperty,fc=Object.getOwnPropertySymbols,Eb=Object.prototype.hasOwnProperty,xb=Object.prototype.propertyIsEnumerable,dc=(t,e,r)=>e in t?bb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pc=(t,e)=>{for(var r in e||(e={}))Eb.call(e,r)&&dc(t,r,e[r]);if(fc)for(var r of fc(e))xb.call(e,r)&&dc(t,r,e[r]);return t};class no extends _0{constructor(e){super(e),this.protocol=Zl,this.version=vv,this.name=ro,this.events=new Mt.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||th,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Se.pino(Se.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||bv.logger}));this.logger=Se.generateChildLogger(r,this.name),this.heartbeat=new kr.HeartBeat,this.crypto=new Xv(this,this.logger,e==null?void 0:e.keychain),this.history=new yb(this,this.logger),this.expirer=new mb(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Zg(pc(pc({},Ev),e==null?void 0:e.storageOptions)),this.relayer=new fb({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new _b(this,this.logger),this.verify=new wb(this.projectId||"",this.logger),this.echoClient=new vb(this.projectId||"",this.logger)}static async init(e){const r=new no(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(Bv,n),r}get context(){return Se.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const Sb=no,rh="wc",nh=2,ih="client",io=`${rh}@${nh}:${ih}:`,Hi={name:ih,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},gc="WALLETCONNECT_DEEPLINK_CHOICE",Db="proposal",Ib="Proposal expired",Cb="session",Bn=he.SEVEN_DAYS,Tb="engine",Kt={wc_sessionPropose:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1104},res:{ttl:he.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1106},res:{ttl:he.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1112},res:{ttl:he.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1115}}},Wi={min:he.FIVE_MINUTES,max:he.SEVEN_DAYS},Ht={idle:"IDLE",active:"ACTIVE"},Ob="request",Nb=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var Ab=Object.defineProperty,Rb=Object.defineProperties,Pb=Object.getOwnPropertyDescriptors,_c=Object.getOwnPropertySymbols,Lb=Object.prototype.hasOwnProperty,Ub=Object.prototype.propertyIsEnumerable,yc=(t,e,r)=>e in t?Ab(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ut=(t,e)=>{for(var r in e||(e={}))Lb.call(e,r)&&yc(t,r,e[r]);if(_c)for(var r of _c(e))Ub.call(e,r)&&yc(t,r,e[r]);return t},Dr=(t,e)=>Rb(t,Pb(e));class Mb extends C0{constructor(e){super(e),this.name=Tb,this.events=new bc,this.initialized=!1,this.ignoredPayloadTypes=[Er],this.requestQueue={state:Ht.idle,queue:[]},this.sessionRequestQueue={state:Ht.idle,queue:[]},this.requestQueueDelay=he.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(Kt)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},he.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const n=Dr(ut({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:c,sessionProperties:o,relays:u}=n;let l=i,d,m=!1;if(l&&(m=this.client.core.pairing.pairings.get(l).active),!l||!m){const{topic:_,uri:w}=await this.client.core.pairing.create();l=_,d=w}const b=await this.client.core.crypto.generateKeyPair(),x=Kt.wc_sessionPropose.req.ttl||he.FIVE_MINUTES,E=vt(x),T=ut({requiredNamespaces:s,optionalNamespaces:c,relays:u??[{protocol:eh}],proposer:{publicKey:b,metadata:this.client.metadata},expiryTimestamp:E},o&&{sessionProperties:o}),{reject:N,resolve:M,done:S}=Ir(x,Ib);if(this.events.once(Fe("session_connect"),async({error:_,session:w})=>{if(_)N(_);else if(w){w.self.publicKey=b;const g=Dr(ut({},w),{requiredNamespaces:T.requiredNamespaces,optionalNamespaces:T.optionalNamespaces});await this.client.session.set(w.topic,g),await this.setExpiry(w.topic,w.expiry),l&&await this.client.core.pairing.updateMetadata({topic:l,metadata:w.peer.metadata}),M(g)}}),!l){const{message:_}=te("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(_)}const C=await this.sendRequest({topic:l,method:"wc_sessionPropose",params:T,throwOnFailedPublish:!0});return await this.setProposal(C,ut({id:C},T)),{uri:d,approval:S}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:i,namespaces:s,sessionProperties:c}=r,o=this.client.proposal.get(n);let{pairingTopic:u,proposer:l,requiredNamespaces:d,optionalNamespaces:m}=o;u=u||"";const b=await this.client.core.crypto.generateKeyPair(),x=l.publicKey,E=await this.client.core.crypto.generateSharedKey(b,x);u&&n&&(await this.client.core.pairing.updateMetadata({topic:u,metadata:l.metadata}),await this.sendResult({id:n,topic:u,result:{relay:{protocol:i??"irn"},responderPublicKey:b}}),await this.client.proposal.delete(n,Be("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:u}));const T=ut({relay:{protocol:i??"irn"},namespaces:s,pairingTopic:u,controller:{publicKey:b,metadata:this.client.metadata},expiry:vt(Bn)},c&&{sessionProperties:c});await this.client.core.relayer.subscribe(E);const N=Dr(ut({},T),{topic:E,requiredNamespaces:d,optionalNamespaces:m,pairingTopic:u,acknowledged:!1,self:T.controller,peer:{publicKey:l.publicKey,metadata:l.metadata},controller:b});await this.client.session.set(E,N);try{await this.sendRequest({topic:E,method:"wc_sessionSettle",params:T,throwOnFailedPublish:!0})}catch(M){throw this.client.logger.error(M),this.client.session.delete(E,Be("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(E),M}return await this.setExpiry(E,vt(Bn)),{topic:E,acknowledged:()=>new Promise(M=>setTimeout(()=>M(this.client.session.get(E)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:n,reason:i}=r,{pairingTopic:s}=this.client.proposal.get(n);s&&(await this.sendError(n,s,i),await this.client.proposal.delete(n,Be("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:i}=r,s=await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i}}),{done:c,resolve:o,reject:u}=Ir();return this.events.once(Fe("session_update",s),({error:l})=>{l?u(l):o()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:c}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,i=await this.sendRequest({topic:n,method:"wc_sessionExtend",params:{}}),{done:s,resolve:c,reject:o}=Ir();return this.events.once(Fe("session_extend",i),({error:u})=>{u?o(u):c()}),await this.setExpiry(n,vt(Bn)),{acknowledged:s}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:i,topic:s,expiry:c=Kt.wc_sessionRequest.req.ttl}=r,o=Xs(),{done:u,resolve:l,reject:d}=Ir(c,"Request expired. Please try again.");return this.events.once(Fe("session_request",o),({error:m,result:b})=>{m?d(m):l(b)}),await Promise.all([new Promise(async m=>{await this.sendRequest({clientRpcId:o,topic:s,method:"wc_sessionRequest",params:{request:Dr(ut({},i),{expiryTimestamp:vt(c)}),chainId:n},expiry:c,throwOnFailedPublish:!0}).catch(b=>d(b)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:o}),m()}),new Promise(async m=>{const b=await Cm(this.client.core.storage,gc);Im({id:o,topic:s,wcDeepLink:b}),m()}),u()]).then(m=>m[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i;Wt(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0}):Nt(i)&&await this.sendError(s,n,i.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=await this.sendRequest({topic:n,method:"wc_sessionPing",params:{}}),{done:s,resolve:c,reject:o}=Ir();this.events.once(Fe("session_ping",i),({error:u})=>{u?o(u):c()}),await s()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r;await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:Be("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:i}=te("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>Hm(n,r))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var c,o;return((c=s.peerMetadata)==null?void 0:c.url)&&((o=s.peerMetadata)==null?void 0:o.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async r=>{const{topic:n,expirerHasDeleted:i=!1,emitEvent:s=!0,id:c=0}=r,{self:o}=this.client.session.get(n);await this.client.core.relayer.unsubscribe(n),await this.client.session.delete(n,Be("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(n)&&await this.client.core.crypto.deleteSymKey(n),i||this.client.core.expirer.del(n),this.client.core.storage.removeItem(gc).catch(u=>this.client.logger.warn(u)),this.getPendingSessionRequests().forEach(u=>{u.topic===n&&this.deletePendingSessionRequest(u.id,Be("USER_DISCONNECTED"))}),s&&this.client.events.emit("session_delete",{id:c,topic:n})},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,Be("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=Ht.idle,this.client.events.emit("session_request_expire",{id:r}))},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,vt(Kt.wc_sessionPropose.req.ttl))},this.setPendingSessionRequest=async r=>{const{id:n,topic:i,params:s,verifyContext:c}=r,o=s.request.expiryTimestamp||vt(Kt.wc_sessionRequest.req.ttl);await this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:c}),o&&this.client.core.expirer.set(n,o)},this.sendRequest=async r=>{const{topic:n,method:i,params:s,expiry:c,relayRpcId:o,clientRpcId:u,throwOnFailedPublish:l}=r,d=Nr(i,s,u);if(Kr()&&Nb.includes(i)){const x=Or(JSON.stringify(d));this.client.core.verify.register({attestationId:x})}const m=await this.client.core.crypto.encode(n,d),b=Kt[i].req;return c&&(b.ttl=c),o&&(b.id=o),this.client.core.history.set(n,d),l?(b.internal=Dr(ut({},b.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,m,b)):this.client.core.relayer.publish(n,m,b).catch(x=>this.client.logger.error(x)),d.id},this.sendResult=async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:c}=r,o=Zs(n,s),u=await this.client.core.crypto.encode(i,o),l=await this.client.core.history.get(i,n),d=Kt[l.request.method].res;c?(d.internal=Dr(ut({},d.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,u,d)):this.client.core.relayer.publish(i,u,d).catch(m=>this.client.logger.error(m)),await this.client.core.history.resolve(o)},this.sendError=async(r,n,i)=>{const s=eo(r,i),c=await this.client.core.crypto.encode(n,s),o=await this.client.core.history.get(n,r),u=Kt[o.request.method].res;this.client.core.relayer.publish(n,c,u),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;er(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{er(i.expiryTimestamp)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Ht.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Ht.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(n=>setTimeout(n,300))}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=Ht.idle},this.processRequest=r=>{const{topic:n,payload:i}=r,s=i.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i}=r,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:i}=te("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.onSessionProposeRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidConnect(ut({},n.params));const c=i.expiryTimestamp||vt(Kt.wc_sessionPropose.req.ttl),o=ut({id:s,pairingTopic:r,expiryTimestamp:c},i);await this.setProposal(s,o);const u=Or(JSON.stringify(n)),l=await this.getVerifyContext(u,o.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:o,verifyContext:l})}catch(c){await this.sendError(s,r,c),this.client.logger.error(c)}},this.onSessionProposeResponse=async(r,n)=>{const{id:i}=n;if(Wt(n)){const{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const c=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:c});const o=c.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});const u=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:u});const l=await this.client.core.crypto.generateSharedKey(o,u);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:l});const d=await this.client.core.relayer.subscribe(l);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:r})}else Nt(n)&&(await this.client.proposal.delete(i,Be("USER_DISCONNECTED")),this.events.emit(Fe("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:c,controller:o,expiry:u,namespaces:l,sessionProperties:d,pairingTopic:m}=n.params,b=ut({topic:r,relay:c,expiry:u,namespaces:l,acknowledged:!0,pairingTopic:m,requiredNamespaces:{},optionalNamespaces:{},controller:o.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:o.publicKey,metadata:o.metadata}},d&&{sessionProperties:d});await this.sendResult({id:n.id,topic:r,result:!0}),this.events.emit(Fe("session_connect"),{session:b}),this.cleanupDuplicatePairings(b)}catch(c){await this.sendError(i,r,c),this.client.logger.error(c)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;Wt(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Fe("session_approve",i),{})):Nt(n)&&(await this.client.session.delete(r,Be("USER_DISCONNECTED")),this.events.emit(Fe("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:s}=n;try{const c=`${r}_session_update`,o=$n.get(c);if(o&&this.isRequestOutOfSync(o,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidUpdate(ut({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0}),this.client.events.emit("session_update",{id:s,topic:r,params:i}),$n.set(c,s)}catch(c){await this.sendError(s,r,c),this.client.logger.error(c)}},this.isRequestOutOfSync=(r,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n;Wt(n)?this.events.emit(Fe("session_update",i),{}):Nt(n)&&this.events.emit(Fe("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,vt(Bn)),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n;Wt(n)?this.events.emit(Fe("session_extend",i),{}):Nt(n)&&this.events.emit(Fe("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n;setTimeout(()=>{Wt(n)?this.events.emit(Fe("session_ping",i),{}):Nt(n)&&this.events.emit(Fe("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(at.publish,async()=>{s(await this.deleteSession({topic:r,id:i}))})}),this.sendResult({id:i,topic:r,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:Be("USER_DISCONNECTED")})])}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidRequest(ut({topic:r},s));const c=Or(JSON.stringify(Nr("wc_sessionRequest",s,i))),o=this.client.session.get(r),u=await this.getVerifyContext(c,o.peer.metadata),l={id:i,topic:r,params:s,verifyContext:u};await this.setPendingSessionRequest(l),this.addSessionRequestToSessionRequestQueue(l),this.processSessionRequestQueue()}catch(c){await this.sendError(i,r,c),this.client.logger.error(c)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n;Wt(n)?this.events.emit(Fe("session_request",i),{result:n.result}):Nt(n)&&this.events.emit(Fe("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:s}=n;try{const c=`${r}_session_event_${s.event.name}`,o=$n.get(c);if(o&&this.isRequestOutOfSync(o,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(ut({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),$n.set(c,i)}catch(c){await this.sendError(i,r,c),this.client.logger.error(c)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Ht.idle,this.processSessionRequestQueue()},he.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:r,error:n})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{this.events.emit(Fe("session_request",s.request.id),{error:n})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Ht.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Ht.active,this.client.events.emit("session_request",r)}catch(n){this.client.logger.error(n)}},this.onPairingCreated=r=>{if(r.active)return;const n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest(r.topic,Nr("wc_sessionPropose",{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties},n.id))},this.isValidConnect=async r=>{if(!gt(r)){const{message:u}=te("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(u)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:c,relays:o}=r;if(ht(n)||await this.isValidPairingTopic(n),!nw(o,!0)){const{message:u}=te("MISSING_OR_INVALID",`connect() relays: ${o}`);throw new Error(u)}!ht(i)&&Xn(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!ht(s)&&Xn(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),ht(c)||this.validateSessionProps(c,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=rw(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!gt(r))throw new Error(te("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:c}=r;await this.isValidProposalId(n);const o=this.client.proposal.get(n),u=ki(i,"approve()");if(u)throw new Error(u.message);const l=qa(o.requiredNamespaces,i,"approve()");if(l)throw new Error(l.message);if(!tt(s,!0)){const{message:d}=te("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(d)}ht(c)||this.validateSessionProps(c,"sessionProperties")},this.isValidReject=async r=>{if(!gt(r)){const{message:s}=te("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(await this.isValidProposalId(n),!sw(i)){const{message:s}=te("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!gt(r)){const{message:l}=te("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(l)}const{relay:n,controller:i,namespaces:s,expiry:c}=r;if(!Ml(n)){const{message:l}=te("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const o=Jm(i,"onSessionSettleRequest()");if(o)throw new Error(o.message);const u=ki(s,"onSessionSettleRequest()");if(u)throw new Error(u.message);if(er(c)){const{message:l}=te("EXPIRED","onSessionSettleRequest()");throw new Error(l)}},this.isValidUpdate=async r=>{if(!gt(r)){const{message:u}=te("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(u)}const{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);const s=this.client.session.get(n),c=ki(i,"update()");if(c)throw new Error(c.message);const o=qa(s.requiredNamespaces,i,"update()");if(o)throw new Error(o.message)},this.isValidExtend=async r=>{if(!gt(r)){const{message:i}=te("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!gt(r)){const{message:u}=te("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(u)}const{topic:n,request:i,chainId:s,expiry:c}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!ka(o,s)){const{message:u}=te("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(u)}if(!ow(i)){const{message:u}=te("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(u)}if(!uw(o,s,i.method)){const{message:u}=te("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(u)}if(c&&!dw(c,Wi)){const{message:u}=te("MISSING_OR_INVALID",`request() expiry: ${c}. Expiry must be a number (in seconds) between ${Wi.min} and ${Wi.max}`);throw new Error(u)}},this.isValidRespond=async r=>{var n;if(!gt(r)){const{message:c}=te("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(c)}const{topic:i,response:s}=r;try{await this.isValidSessionTopic(i)}catch(c){throw(n=r==null?void 0:r.response)!=null&&n.id&&this.cleanupAfterResponse(r),c}if(!aw(s)){const{message:c}=te("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(c)}},this.isValidPing=async r=>{if(!gt(r)){const{message:i}=te("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!gt(r)){const{message:o}=te("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(o)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:c}=this.client.session.get(n);if(!ka(c,s)){const{message:o}=te("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(o)}if(!cw(i)){const{message:o}=te("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(o)}if(!lw(c,s,i.name)){const{message:o}=te("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(o)}},this.isValidDisconnect=async r=>{if(!gt(r)){const{message:i}=te("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(r,n)=>{const i={verified:{verifyUrl:n.verifyUrl||Tr,validation:"UNKNOWN",origin:n.url||""}};try{const s=await this.client.core.verify.resolve({attestationId:r,verifyUrl:n.verifyUrl});s&&(i.verified.origin=s.origin,i.verified.isScam=s.isScam,i.verified.validation=s.origin===new URL(n.url).origin?"VALID":"INVALID")}catch(s){this.client.logger.info(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!tt(i,!1)){const{message:s}=te("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}}async isInitialized(){if(!this.initialized){const{message:e}=te("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(at.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(r,n);try{to(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):yi(i)?(await this.client.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.client.core.history.delete(r,i.id)):this.onRelayEventUnknownPayload({topic:r,payload:i})}catch(s){this.client.logger.error(s)}})}registerExpirerEvents(){this.client.core.expirer.on(It.expired,async e=>{const{topic:r,id:n}=Ll(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,te("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(tn.create,e=>this.onPairingCreated(e))}isValidPairingTopic(e){if(!tt(e,!1)){const{message:r}=te("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=te("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(er(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=te("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!tt(e,!1)){const{message:r}=te("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=te("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(er(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=te("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=te("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(tt(e,!1)){const{message:r}=te("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=te("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!iw(e)){const{message:r}=te("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=te("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(er(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=te("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class $b extends wi{constructor(e,r){super(e,r,Db,io),this.core=e,this.logger=r}}class Bb extends wi{constructor(e,r){super(e,r,Cb,io),this.core=e,this.logger=r}}class Fb extends wi{constructor(e,r){super(e,r,Ob,io,n=>n.id),this.core=e,this.logger=r}}class so extends I0{constructor(e){super(e),this.protocol=rh,this.version=nh,this.name=Hi.name,this.events=new Mt.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(e==null?void 0:e.name)||Hi.name,this.metadata=(e==null?void 0:e.metadata)||wm();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Se.pino(Se.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Hi.logger}));this.core=(e==null?void 0:e.core)||new Sb(e),this.logger=Se.generateChildLogger(r,this.name),this.session=new Bb(this.core,this.logger),this.proposal=new $b(this.core,this.logger),this.pendingRequest=new Fb(this.core,this.logger),this.engine=new Mb(this)}static async init(e){const r=new so(e);return await r.initialize(),r}get context(){return Se.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}class gr extends Error{constructor(){super(),Object.setPrototypeOf(this,gr.prototype)}}class oo extends Error{constructor(){super(),Object.setPrototypeOf(this,oo.prototype)}}var mc;(function(t){t.Mainnet="solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",t.Devnet="solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"})(mc||(mc={}));var $r;(function(t){t.signTransaction="solana_signTransaction",t.signMessage="solana_signMessage"})($r||($r={}));const wc=t=>({requiredNamespaces:{solana:{chains:[t],methods:[$r.signTransaction,$r.signMessage],events:[]}}}),kb=t=>"version"in t;class eE{constructor(e){this._options=e.options,this._network=e.network}async connect(){const e=this._client??await so.init(this._options),r=e.find(wc(this._network)).filter(n=>n.acknowledged);if(r.length)return this._session=r[r.length-1],this._client=e,{publicKey:this.publicKey};{const{uri:n,approval:i}=await e.connect(wc(this._network));return new Promise((s,c)=>{n&&Go.open(n,()=>{c(new oo)}),i().then(o=>{this._session=o,this._client=e,s({publicKey:this.publicKey})}).catch(c).finally(()=>{Go.close()})})}}async disconnect(){if(this._client&&this._session)await this._client.disconnect({topic:this._session.topic,reason:Be("USER_DISCONNECTED")}),this._session=void 0;else throw new gr}get client(){if(this._client)return Object.assign({},this._client,{off:this._client.removeListener});throw new gr}get publicKey(){if(this._client&&this._session){const{address:e}=rm(this._session.namespaces.solana.accounts[0]);return new Yh(e)}else throw new gr}async signTransaction(e){if(this._client&&this._session){let r,n;kb(e)?(r=Buffer.from(e.serialize()).toString("base64"),e.version==="legacy"&&(n=Jh.from(e.serialize()))):(r=e.serialize({requireAllSignatures:!1,verifySignatures:!1}).toString("base64"),n=e);const{signature:i}=await this._client.request({chainId:this._network,topic:this._session.topic,request:{method:$r.signTransaction,params:{...n,transaction:r}}});return e.addSignature(this.publicKey,Buffer.from(bi.decode(i))),e}else throw new gr}async signMessage(e){if(this._client&&this._session){const{signature:r}=await this._client.request({chainId:this._network,topic:this._session.topic,request:{method:$r.signMessage,params:{pubkey:this.publicKey.toString(),message:bi.encode(e)}}});return bi.decode(r)}else throw new gr}}export{gr as ClientNotInitializedError,oo as QRCodeModalError,mc as WalletConnectChainID,so as WalletConnectClient,$r as WalletConnectRPCMethods,eE as WalletConnectWallet};
